!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=67)}([function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0}function o(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function a(e){return!o(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function u(e){if(_.isFunction(e)){if(M)return e.name;var t=e.toString(),n=t.match(T);return n&&n[1]}}function s(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function l(e){if(M||!_.isFunction(e))return _.inspect(e);var t=u(e);return"[Function"+(t?": "+t:"")+"]"}function c(e){return s(l(e.actual),128)+" "+e.operator+" "+s(l(e.expected),128)}function f(e,t,n,r,o){throw new A.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:o})}function h(e,t){e||f(e,!0,t,"==",A.ok)}function d(e,t,n,u){if(e===t)return!0;if(o(e)&&o(t))return 0===r(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(a(e)&&a(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(o(e)!==o(t))return!1;u=u||{actual:[],expected:[]};var s=u.actual.indexOf(e);return-1!==s&&s===u.expected.indexOf(t)||(u.actual.push(e),u.expected.push(t),y(e,t,n,u))}return n?e===t:e==t}function v(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function y(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var o=v(e),i=v(t);if(o&&!i||!o&&i)return!1;if(o)return e=S.call(e),t=S.call(t),d(e,t,n);var a,u,s=x(e),l=x(t);if(s.length!==l.length)return!1;for(s.sort(),l.sort(),u=s.length-1;u>=0;u--)if(s[u]!==l[u])return!1;for(u=s.length-1;u>=0;u--)if(a=s[u],!d(e[a],t[a],n,r))return!1;return!0}function p(e,t,n){d(e,t,!0)&&f(e,t,n,"notDeepStrictEqual",p)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function b(e){var t;try{e()}catch(e){t=e}return t}function g(e,t,n,r){var o;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),o=b(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!o&&f(o,n,"Missing expected exception"+r);var i="string"==typeof r,a=!e&&_.isError(o),u=!e&&o&&!n;if((a&&i&&m(o,n)||u)&&f(o,n,"Got unwanted exception"+r),e&&o&&n&&!m(o,n)||!e&&o)throw o}var _=n(107),E=Object.prototype.hasOwnProperty,S=Array.prototype.slice,M=function(){return"foo"===function(){}.name}(),A=e.exports=h,T=/\s*function\s+([^\(\s]*)\s*/;A.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var t=e.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,o=u(t),i=r.indexOf("\n"+o);if(i>=0){var a=r.indexOf("\n",i+1);r=r.substring(a+1)}this.stack=r}}},_.inherits(A.AssertionError,Error),A.fail=f,A.ok=h,A.equal=function(e,t,n){e!=t&&f(e,t,n,"==",A.equal)},A.notEqual=function(e,t,n){e==t&&f(e,t,n,"!=",A.notEqual)},A.deepEqual=function(e,t,n){d(e,t,!1)||f(e,t,n,"deepEqual",A.deepEqual)},A.deepStrictEqual=function(e,t,n){d(e,t,!0)||f(e,t,n,"deepStrictEqual",A.deepStrictEqual)},A.notDeepEqual=function(e,t,n){d(e,t,!1)&&f(e,t,n,"notDeepEqual",A.notDeepEqual)},A.notDeepStrictEqual=p,A.strictEqual=function(e,t,n){e!==t&&f(e,t,n,"===",A.strictEqual)},A.notStrictEqual=function(e,t,n){e===t&&f(e,t,n,"!==",A.notStrictEqual)},A.throws=function(e,t,n){g(!0,e,t,n)},A.doesNotThrow=function(e,t,n){g(!1,e,t,n)},A.ifError=function(e){if(e)throw e};var x=Object.keys||function(e){var t=[];for(var n in e)E.call(e,n)&&t.push(n);return t}}).call(t,n(15))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(30);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(98);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(99);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var u=n(100);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})});var s=n(53);Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return r(s).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof p.WebGLRenderingContext||e&&34962===e.ARRAY_BUFFER}function i(e){return e instanceof p.WebGL2RenderingContext||e&&32874===e.TEXTURE_BINDING_3D}function a(e){(0,E.default)(o(e),S)}function u(e){(0,E.default)(i(e),M)}function s(e){return-1!==A.indexOf(e)}function l(e,t){(0,E.default)(s(e),"Bad index type "+(0,m.glKey)(e)+" "+t)}function c(e){return-1!==T.indexOf(e)}function f(e,t){(0,E.default)(c(e),"Bad draw mode "+(0,m.glKey)(e)+" "+t)}function h(e,t,n){(0,E.default)(t===(0,g.glTypeFromArray)(e),(e.constructor.name||"Array")+" does not match element type "+(0,m.glKey)(t)+" "+n)}function d(e){for(var t=[],n=e.getError();n!==e.NO_ERROR;)t.push(y(e,n)),n=e.getError();return t.length?new Error(t.join("\n")):null}function v(e){if(e.debug){var t=d(e);if(t)throw t}}function y(e,t){switch(t){case b.default.CONTEXT_LOST_WEBGL:return"WebGL context lost";case b.default.INVALID_ENUM:return"WebGL invalid enumerated argument";case b.default.INVALID_VALUE:return"WebGL invalid value";case b.default.INVALID_OPERATION:return"WebGL invalid operation";case b.default.INVALID_FRAMEBUFFER_OPERATION:return"WebGL invalid framebuffer operation";case b.default.OUT_OF_MEMORY:return"WebGL out of memory";default:return"WebGL unknown error "+t}}Object.defineProperty(t,"__esModule",{value:!0}),t.GL_BUFFER_USAGE=t.GL_TARGETS=t.GL_DRAW_MODES=t.GL_INDEX_TYPES=void 0,t.isWebGLContext=o,t.isWebGL2Context=i,t.assertWebGLContext=a,t.assertWebGL2Context=u,t.isIndexType=s,t.assertIndexType=l,t.isDrawMode=c,t.assertDrawMode=f,t.assertArrayTypeMatch=h,t.glGetError=d,t.glCheckError=v;var p=n(22),m=n(14),b=r(m),g=n(62),_=n(0),E=r(_),S="Invalid WebGLRenderingContext",M="Requires WebGL2",A=t.GL_INDEX_TYPES=[b.default.UNSIGNED_BYTE,b.default.UNSIGNED_SHORT,b.default.UNSIGNED_INT],T=t.GL_DRAW_MODES=[b.default.POINTS,b.default.LINE_STRIP,b.default.LINE_LOOP,b.default.LINES,b.default.TRIANGLE_STRIP,b.default.TRIANGLE_FAN,b.default.TRIANGLES];t.GL_TARGETS=[b.default.ARRAY_BUFFER,b.default.ELEMENT_ARRAY_BUFFER,b.default.COPY_READ_BUFFER,b.default.COPY_WRITE_BUFFER,b.default.TRANSFORM_FEEDBACK_BUFFER,b.default.UNIFORM_BUFFER,b.default.PIXEL_PACK_BUFFER,b.default.PIXEL_UNPACK_BUFFER],t.GL_BUFFER_USAGE=[b.default.STATIC_DRAW,b.default.DYNAMIC_DRAW,b.default.STREAM_DRAW,b.default.STATIC_READ,b.default.DYNAMIC_READ,b.default.STREAM_READ,b.default.STATIC_COPY,b.default.DYNAMIC_COPY,b.default.STREAM_COPY]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(62);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(14);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return r(o).default}});var i=n(42);Object.defineProperty(t,"ConeGeometry",{enumerable:!0,get:function(){return r(i).default}});var a=n(43);Object.defineProperty(t,"CubeGeometry",{enumerable:!0,get:function(){return r(a).default}});var u=n(44);Object.defineProperty(t,"CylinderGeometry",{enumerable:!0,get:function(){return r(u).default}});var s=n(45);Object.defineProperty(t,"IcoSphereGeometry",{enumerable:!0,get:function(){return r(s).default}});var l=n(46);Object.defineProperty(t,"PlaneGeometry",{enumerable:!0,get:function(){return r(l).default}});var c=n(47);Object.defineProperty(t,"SphereGeometry",{enumerable:!0,get:function(){return r(c).default}});var f=n(17);Object.defineProperty(t,"TruncatedConeGeometry",{enumerable:!0,get:function(){return r(f).default}})},function(e,t,n){"use strict";function r(e){"epsilon"in e&&(b.glMatrix.EPSILON=e.epsilon),"debug"in e&&(b.glMatrix.debug=e.debug)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.glMatrix.precision||4;return parseFloat(e.toPrecision(t))}function i(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&void 0!==e.length}function a(e){return e.clone?e.clone():new Array(e)}function u(e,t){if(i(e)){for(var n=a(e),r=0;r<n.length;++r)n[r]=t(n[r],r,n);return n}return t(e)}function s(e){return u(e,function(e){return e/180*Math.PI})}function l(e){return u(e,function(e){return 180*e/Math.PI})}function c(e){return u(e,function(e){return Math.sin(e)})}function f(e){return u(e,function(e){return Math.cos(e)})}function h(e){return u(e,function(e){return Math.tan(e)})}function d(e){return u(e,function(e){return Math.asin(e)})}function v(e){return u(e,function(e){return Math.acos(e)})}function y(e){return u(e,function(e){return Math.atan(e)})}function p(e,t,n){return Math.max(t,Math.min(n,e))}function m(e,t){return Math.abs(e-t)<=b.glMatrix.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.glMatrix=void 0,t.configure=r,t.formatValue=o,t.isArray=i,t.clone=a,t.radians=s,t.degrees=l,t.sin=c,t.cos=f,t.tan=h,t.asin=d,t.acos=v,t.atan=y,t.clamp=p,t.equals=m;var b=n(9);b.glMatrix.debug=!0,b.glMatrix.printRowMajor=!0,t.glMatrix=b.glMatrix},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1,n.SIMD_AVAILABLE=n.ARRAY_TYPE===Float32Array&&"SIMD"in this,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var r=Math.PI/180;n.toRadian=function(e){return e*r},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(16);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return r(o).default}});var i=n(36);Object.defineProperty(t,"AnimationFrame",{enumerable:!0,get:function(){return r(i).default}}),Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(69);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var u=n(37);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="Geometry: Illegal argument",l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var n=t.id,i=t.drawMode,u=void 0===i?"TRIANGLES":i,l=t.vertexCount,c=void 0===l?void 0:l,f=t.attributes;(0,a.default)(u,s),this.id=n||(0,o.uid)(this.constructor.name),this.drawMode=u,this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),f?this.setAttributes(f):(o.log.once('Geometry: top-level attributes are deprecated, use "attributes" param'),delete t.id,delete t.drawMode,delete t.vertexCount,delete t.attributes,this.setAttributes(t))}return u(e,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setVertexCount",value:function(e){this.vertexCount=e}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(e){return Boolean(this.attributes[e])}},{key:"getAttribute",value:function(e){var t=this.attributes[e];return(0,a.default)(t),t.value}},{key:"getArray",value:function(e){var t=this.attributes[e];return(0,a.default)(t),t.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(e){for(var t in e){var n=e[t];n=ArrayBuffer.isView(n)?{value:n}:n,(0,a.default)(ArrayBuffer.isView(n.value),this._print(t)+": must be typed array or object with value as typed array"),this._autoDetectAttribute(t,n),this.attributes[t]=Object.assign({},n,{instanced:n.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(e,t){var n=void 0;switch(e){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break;case"indices":t.size=t.size||1,t.isIndexed=t.isIndexed||!0,(0,a.default)(t.value instanceof Uint16Array||t.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}(0,a.default)(t.size,"attribute "+e+" needs size")}},{key:"_print",value:function(e){return"Geometry "+this.id+" attribute "+e}}]),e}();t.default=l},function(e,t,n){t.glMatrix=n(6),t.mat2=n(109),t.mat2d=n(110),t.mat3=n(63),t.mat4=n(111),t.quat=n(112),t.vec2=n(113),t.vec3=n(64),t.vec4=n(65)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(5),c=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"clone",value:function(){var e=this.constructor,t=(new e).copy(this);return t.check(),t}},{key:"copy",value:function(e){for(var t=0;t<this.ELEMENTS;++t)this[t]=e[t];return this.check(),this}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<this.ELEMENTS;++r)this[r]=t[r]||0;return this.check(),this}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=e[n+t];return this.check(),this}},{key:"toString",value:function(){for(var e="",t=0;t<this.ELEMENTS;++t)e+=(t>0?", ":"")+(0,l.formatValue)(this[t]);return this.constructor.name+"("+e+")"}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)e[t+n]=this[n];return e}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(e){if(this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(!(0,l.equals)(this[t],e[t]))return!1;return!0}},{key:"exactEquals",value:function(e){if(this.length!==e.length)return!1;for(var t=0;t<this.ELEMENTS;++t)if(this[t]!==e[t])return!1;return!0}},{key:"validate",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=e.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)t=t&&Number.isFinite(e[n]);return t}},{key:"check",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(l.glMatrix.debug&&!this.validate(e))throw new Error("Invalid "+this.constructor.name)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VertexArrayObject=t.TimerQuery=t.VertexAttributes=t.TextureCube=t.Texture2D=t.Renderbuffer=t.Framebuffer=t.Program=t.FragmentShader=t.VertexShader=t.Shader=t.Buffer=t.isWebGL2Context=t.isWebGLContext=void 0;var o=n(3);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(31);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(2);Object.defineProperty(t,"isWebGLContext",{enumerable:!0,get:function(){return a.isWebGLContext}}),Object.defineProperty(t,"isWebGL2Context",{enumerable:!0,get:function(){return a.isWebGL2Context}});var u=n(13);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return r(u).default}});var s=n(33);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return r(s).default}}),Object.defineProperty(t,"VertexShader",{enumerable:!0,get:function(){return s.VertexShader}}),Object.defineProperty(t,"FragmentShader",{enumerable:!0,get:function(){return s.FragmentShader}});var l=n(56);Object.defineProperty(t,"Program",{enumerable:!0,get:function(){return r(l).default}});var c=n(32);Object.defineProperty(t,"Framebuffer",{enumerable:!0,get:function(){return r(c).default}});var f=n(19);Object.defineProperty(t,"Renderbuffer",{enumerable:!0,get:function(){return r(f).default}});var h=n(20);Object.defineProperty(t,"Texture2D",{enumerable:!0,get:function(){return r(h).default}});var d=n(57);Object.defineProperty(t,"TextureCube",{enumerable:!0,get:function(){return r(d).default}});var v=n(58);Object.defineProperty(t,"TimerQuery",{enumerable:!0,get:function(){return r(v).default}});var y=n(54);Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return y[e]}})});var p=n(59);Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}})});var m=n(60);Object.defineProperty(t,"VertexArrayObject",{enumerable:!0,get:function(){return r(m).default}});var b=n(61),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(b);t.VertexAttributes=g},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,i=arguments.length-1;i>=-1&&!o;i--){var a=i>=0?arguments[i]:e.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,o="/"===a.charAt(0))}return t=n(r(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return e=n(r(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var o=r(e.split("/")),i=r(n.split("/")),a=Math.min(o.length,i.length),u=a,s=0;s<a;s++)if(o[s]!==i[s]){u=s;break}for(var l=[],s=u;s<o.length;s++)l.push("..");return l=l.concat(i.slice(u)),l.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=i(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},t.basename=function(e,t){var n=i(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){return i(e)[3]};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(t,n(35))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BufferLayout=void 0;var o=n(3),i=n(2),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=t.BufferLayout=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,o=t.size,i=void 0===o?1:o,a=t.offset,u=void 0===a?0:a,s=t.stride,l=void 0===s?0:s,c=t.normalized,f=void 0!==c&&c,h=t.integer,d=void 0!==h&&h,v=t.instanced,y=void 0===v?0:v;r(this,e),this.type=n,this.size=i,this.offset=u,this.stride=l,this.normalized=f,this.integer=d,this.instanced=y},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.id,u=n.handle;if(r(this,e),(0,i.assertWebGLContext)(t),!((u=u||t.createBuffer())instanceof o.WebGLBuffer))throw new Error("Failed to create WebGLBuffer");this.gl=t,this.handle=u,this.id=a,this.bytes=void 0,this.data=null,this.target=o.GL.ARRAY_BUFFER,this.layout=null,this.userData={},Object.seal(this)}return s(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t).setData({handle:n.handle||n})}}]),s(e,[{key:"delete",value:function(){var e=this.gl;return this.handle&&(e.deleteBuffer(this.handle),this.handle=null),this}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.bytes,r=e.target,a=void 0===r?o.GL.ARRAY_BUFFER:r,s=e.usage,c=void 0===s?o.GL.STATIC_DRAW:s,f=e.layout,h=e.type,d=e.size,v=void 0===d?1:d,y=e.offset,p=void 0===y?0:y,m=e.stride,b=void 0===m?0:m,g=e.normalized,_=void 0!==g&&g,E=e.integer,S=void 0!==E&&E,M=e.instanced,A=void 0===M?0:M,T=this.gl;return(0,u.default)(t||n>=0,"Buffer.setData needs data or bytes"),h=h||(0,o.glTypeFromArray)(t),t&&(0,i.assertArrayTypeMatch)(t,h,"in Buffer.setData"),this.bytes=n,this.data=t,this.target=a,this.layout=f||new l({type:h,size:v,offset:p,stride:b,normalized:_,integer:S,instanced:A}),this.bind({target:a}),T.bufferData(a,t||n,c),this.unbind({target:a}),this}},{key:"subData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,n=e.offset,r=void 0===n?0:n,i=this.gl;return(0,u.default)(t,"Buffer.updateData needs data"),this.bind({target:o.GL.ARRAY_BUFFER}),i.bufferSubData(o.GL.ARRAY_BUFFER,r,t),this.unbind({target:o.GL.ARRAY_BUFFER}),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t;return this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;void 0===t&&this.target;return this}},{key:"bindBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index;return(0,i.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,this.handle),this}},{key:"unbindBase",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index;return(0,i.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,null),this}},{key:"bindRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,o=e.offset,a=void 0===o?0:o,u=e.size;return(0,i.assertWebGL2Context)(this.gl),this.gl.bindBufferRange(n,r,this.handle,a,u),this}},{key:"unbindRange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index;return(0,i.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,null),this}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e;return"string"==typeof e&&(t=u.default[e],(0,l.default)(void 0!==t,"Accessing GL."+e)),t}function i(e){for(var t in u.default)if(u.default[t]===e)return"GL."+t;return String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.GL=void 0,t.glGet=o,t.glKey=i;var a=n(108),u=r(a),s=n(0),l=r(s);t.GL=u.default,t.default=u.default},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":m(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":m(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Material=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=n(11),c=n(25),f=r(c),h=n(1),d=n(4),v=n(85),y=n(0),p=r(y),m="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=(t.Material=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shininess,r=void 0===n?0:n,o=t.reflection,i=void 0===o?0:o,a=t.refraction,s=void 0===a?0:a;u(this,e),this.shininess=r,this.reflection=i,this.refraction=s},function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,t),n=(0,l.isWebGLContext)(e)?Object.assign({},n,{gl:e}):e;var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.init(n),r}return a(t,e),b(t,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.program,n=e.gl,r=void 0===n?null:n,o=e.vs,i=void 0===o?v.SHADERS.vs:o,a=e.fs,u=void 0===a?v.SHADERS.fs:a,s=e.defaultUniforms,c=e.geometry,f=e.material,h=void 0===f?null:f,y=e.textures,m=e.isInstanced,b=void 0!==m&&m,g=e.instanced,_=e.instanceCount,E=void 0===_?0:_,S=e.vertexCount,M=void 0===S?void 0:S,A=e.pickable,T=void 0===A||A,x=e.pick,I=void 0===x?null:x,R=e.uniforms,w=void 0===R?{}:R,F=e.attributes,O=void 0===F?{}:F,P=(e.render,e.onBeforeRender),L=void 0===P?function(){}:P,k=e.onAfterRender,N=void 0===k?function(){}:k,C=e.timerQueryEnabled,D=void 0!==C&&C;if((0,p.default)(c instanceof d.Geometry,"Model needs a geometry"),(i===v.SHADERS.vs||u===v.SHADERS.fs&&void 0===s)&&(s=v.SHADERS.defaultUniforms),this.program=t||new l.Program(r,{vs:i,fs:u}),(0,p.default)(this.program instanceof l.Program,"Model needs a program"),g&&(console.warn('Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.'),b=b||g),y)throw new Error('Model: parameter "textures" removed. Use uniforms to set textures');this.buffers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,this.material=h,this.setGeometry(c),this.attributes={},this.setAttributes(O),w=Object.assign({},this.program.defaultUniforms,w),this.uniforms={},this.setUniforms(w),this.isInstanced=b,this.instanceCount=E,this.vertexCount=M,this.pickable=Boolean(T),this.pick=I||function(){return!1},this.onBeforeRender=L,this.onAfterRender=N,this.timeElapsedQuery=void 0,this.ext=this.program.gl.getExtension("EXT_disjoint_timer_query"),this.lastQueryReturned=!0,this.accumulatedFrameTime=0,this.averageFrameTime=0,this.profileFrameCount=0,this.timerQueryEnabled=D&&null!==this.ext}},{key:"destroy",value:function(){}},{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:n})}},{key:"setInstanceCount",value:function(e){return(0,p.default)(void 0!==e),this.instanceCount=e,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"setVertexCount",value:function(e){return this.vertexCount=e,this}},{key:"getVertexCount",value:function(){return void 0===this.vertexCount?this.geometry.getVertexCount():this.vertexCount}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(e),this}},{key:"getProgram",value:function(){return this.program}},{key:"getGeometry",value:function(){return this.geometry}},{key:"setGeometry",value:function(e){return this.geometry=e,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.attributes,e),this._createBuffersFromAttributeDescriptors(e),this.setNeedsRedraw(),this}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.checkUniformValues)(e,this.id),Object.assign(this.uniforms,e),this.setNeedsRedraw(),this}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.uniforms,n=void 0===t?{}:t;e.attributes,e.settings;return this.render(n)}},{key:"addViewUniforms",value:function(e){var t=e.camera,n=e.viewMatrix,r=e.modelMatrix,o=t?t.getUniforms():{},i=n?this.getCoordinateUniforms(n,r):{};return Object.assign({},e,o,i)}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.addViewUniforms(e);this.setUniforms(t),h.log.log(2,">>> RENDERING MODEL "+this.id,this),this.setProgramState(),this._logAttributesAndUniforms(3,t),this.onBeforeRender();var n=this.drawParams;n.isInstanced&&!this.isInstanced&&h.log.warn(0,"Found instanced attributes on non-instanced model");var r=n.isIndexed,o=n.indexType,i=this.geometry,a=this.isInstanced,u=this.instanceCount;if(!0===this.timerQueryEnabled&&!0===this.lastQueryReturned&&(this.program.gl.getParameter(this.ext.GPU_DISJOINT_EXT),this.timeElapsedQuery=this.ext.createQueryEXT(),this.ext.beginQueryEXT(this.ext.TIME_ELAPSED_EXT,this.timeElapsedQuery)),(0,l.draw)(this.program.gl,{drawMode:i.drawMode,vertexCount:this.getVertexCount(),isIndexed:r,indexType:o,isInstanced:a,instanceCount:u}),!0===this.timerQueryEnabled){!0===this.lastQueryReturned&&(this.ext.endQueryEXT(this.ext.TIME_ELAPSED_EXT),this.profileFrameCount++,this.lastQueryReturned=!1);if(this.program.gl.getParameter(this.ext.GPU_DISJOINT_EXT))this.lastQueryReturned=!0;else{if(this.ext.getQueryObjectEXT(this.timeElapsedQuery,this.ext.QUERY_RESULT_AVAILABLE_EXT)){var s=this.ext.getQueryObjectEXT(this.timeElapsedQuery,this.ext.QUERY_RESULT_EXT)/1e6;this.accumulatedFrameTime+=s,this.averageFrameTime=this.accumulatedFrameTime/this.profileFrameCount,h.log.log(2,"program.id: ",this.program.id),h.log.log(2,"last frame time: ",s,"ms"),h.log.log(2,"average frame time: ",this.averageFrameTime,"ms"),h.log.log(2,"accumulated frame time: ",this.accumulatedFrameTime,"ms"),h.log.log(2,"profile frame count: ",this.profileFrameCount),this.lastQueryReturned=!0}}}return this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),h.log.log(2,"<<< RENDERING MODEL "+this.id+" - complete"),this}},{key:"setProgramState",value:function(){var e=this.program;return e.use(),this.drawParams={},e.setBuffers(this.buffers,{drawParams:this.drawParams}),e.setUniforms(this.uniforms),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"_createBuffersFromAttributeDescriptors",value:function(e){var t=this.program.gl;for(var n in e){var r=e[n];if(r instanceof l.Buffer)this.buffers[n]=r;else{this.buffers[n]=this.buffers[n]||new l.Buffer(t);this.buffers[n].setData(Object.assign({},r,{data:r.value,target:r.isIndexed?l.GL.ELEMENT_ARRAY_BUFFER:l.GL.ARRAY_BUFFER}))}}return this}},{key:"_logAttributesAndUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(h.log.priority>=e){var n=this._getAttributesTable({header:"Attributes "+this.id,program:this.program,attributes:Object.assign({},this.geometry.attributes,this.attributes)});h.log.table(e,n);var r=(0,l.getUniformsTable)({header:"Uniforms "+this.id,program:this.program,uniforms:Object.assign({},this.uniforms,t)}),o=r.table,i=r.unusedTable,a=r.unusedCount;h.log.table(e,o),h.log.log(e,(a||"No")+" unused uniforms ",i)}}},{key:"_getAttributesTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,n=e.header,r=void 0===n?"Attributes":n,i=(e.instanced,e.program);(0,p.default)(i);var a=i._attributeLocations,u=o({},r,{});for(var s in a){var l=t[s],c=a[s];u[s]=this._getAttributeEntry(l,c)}for(var f in t){var h=t[f];u[f]||(u[f]=this._getAttributeEntry(h,null))}return u}},{key:"_getAttributeEntry",value:function(e,t){var n=function(e){return Math.round(10*e)/10},r="NOT PROVIDED",o=0,i="N/A",a="N/A",u="N/A",s="N/A";if(e&&null===t&&(t=e.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),e instanceof l.Buffer){var c=e;r=c.layout.type,o=c.layout.instanced,i=c.layout.size,a=n(c.data.length/c.layout.size),u=c.data.length*c.data.BYTES_PER_ELEMENT}else e&&(r=e.value.constructor.name,o=e.instanced,i=e.size,a=n(e.value.length/e.size),u=e.value.length*e.value.BYTES_PER_ELEMENT,s=e.value);r=String(r).replace("Array","");var f=-1!==r.indexOf("nt");return t+=o?" [instanced]":"",{Location:t,"Type Size x Verts = Bytes":r+" "+i+" x "+a+" = "+u,Value:(0,h.formatValue)(s,{size:i,isInteger:f})}}},{key:"setTextures",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new Error("model.setTextures replaced: setUniforms({sampler2D: new Texture2D})")}},{key:"hash",get:function(){return this.id+" "+this.$pickingIndex}}]),t}(f.default));t.default=g},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);for(var n=e.bottomRadius,i=void 0===n?0:n,a=e.topRadius,u=void 0===a?0:a,s=e.height,l=void 0===s?1:s,c=e.nradial,f=void 0===c?10:c,h=e.nvertical,d=void 0===h?10:h,v=e.topCap,y=void 0!==v&&v,p=e.bottomCap,m=void 0!==p&&p,b=(y?2:0)+(m?2:0),g=(f+1)*(d+1+b),_=Math.atan2(i-u,l),E=Math.sin,S=Math.cos,M=Math.PI,A=S(_),T=E(_),x=y?-2:0,I=d+(m?2:0),R=f+1,w=new Float32Array(3*g),F=new Float32Array(3*g),O=new Float32Array(2*g),P=new Uint16Array(f*(d+b)*6),L=0,k=0,N=x;N<=I;N++){var C=N/d,D=l*C,j=void 0;N<0?(D=0,C=1,j=i):N>d?(D=l,C=1,j=u):j=i+N/d*(u-i),-2!==N&&N!==d+2||(j=0,C=0),D-=l/2;for(var G=0;G<R;G++){var U=E(G*M*2/f),B=S(G*M*2/f);w[L+0]=U*j,w[L+1]=D,w[L+2]=B*j,F[L+0]=N<0||N>d?0:U*A,F[L+1]=N<0?-1:N>d?1:T,F[L+2]=N<0||N>d?0:B*A,O[k+0]=G/f,O[k+1]=C,k+=2,L+=3}}for(var V=0;V<d+b;V++)for(var W=0;W<f;W++){var X=6*(V*f+W);P[X+0]=R*(V+0)+0+W,P[X+1]=R*(V+0)+1+W,P[X+2]=R*(V+1)+1+W,P[X+3]=R*(V+0)+0+W,P[X+4]=R*(V+1)+1+W,P[X+5]=R*(V+1)+0+W}return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:w,normals:F,texCoords:O,indices:P}})))}return i(t,e),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(10),f=function(e){return e&&e.__esModule?e:{default:e}}(c),h=n(5),d=n(9),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?a.copy(e):a.set(e,n,r),a}return a(t,e),l(t,[{key:"set",value:function(e,t,n){return d.vec3.set(this,e,t,n),this.check(),this}},{key:"equals",value:function(e){return d.vec3.equals(this,e)}},{key:"exactEquals",value:function(e){return d.vec3.exactEquals(this,e)}},{key:"distance",value:function(e){return d.vec3.distance(e)}},{key:"dist",value:function(e){return d.vec3.dist(e)}},{key:"angle",value:function(e){return d.vec3.angle(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;d.vec3.add(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;d.vec3.subtract(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;d.vec3.multiply(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;d.vec3.divide(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"ceil",value:function(){return d.vec3.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return d.vec3.floor(this,this),this.check(),this}},{key:"min",value:function(){return d.vec3.min(this,this),this.check(),this}},{key:"max",value:function(){return d.vec3.max(this,this),this.check(),this}},{key:"scale",value:function(e){return d.vec3.scale(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return d.vec3.scaleAndAdd(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return d.vec3.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return d.vec3.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return d.vec3.normalize(this,this),this.check(),this}},{key:"dot",value:function(e){return d.vec3.dot(this,this,e),this.check(),this}},{key:"cross",value:function(e){return d.vec3.cross(this,this,e),this.check(),this}},{key:"lerp",value:function(e){return d.vec3.lerp(this,this,e),this.check(),this}},{key:"hermite",value:function(e){return d.vec3.hermite(this,this,e),this.check(),this}},{key:"bezier",value:function(e){return d.vec3.bezier(this,this,e),this.check(),this}},{key:"random",value:function(e){return d.vec3.cross(this,this,e),this.check(),this}},{key:"rotateX",value:function(e,t){return d.vec3.rotateX(this,this,e,t),this.check(),this}},{key:"rotateY",value:function(e,t){return d.vec3.rotateY(this,this,e,t),this.check(),this}},{key:"rotateZ",value:function(e,t){return d.vec3.rotateZ(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,h.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,h.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,h.checkNumber)(e)}}],[{key:"fromArray",value:function(e){return e instanceof t?e:new(Function.prototype.bind.apply(t,[null].concat(r(e))))}},{key:"dot",value:function(e,n){return t.fromArray(e).dot(n)}},{key:"cross",value:function(e,n){return t.fromArray(e).cross(n)}}]),t}(f.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(3),a=r(i),u=n(2),s=n(0),l=r(s),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(){function e(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o(this,e),(0,u.assertWebGLContext)(t),this.gl=t,this.handle=t.createRenderbuffer(),!this.handle)throw new Error("Failed to create WebGL Renderbuffer")}return c(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t,{handle:n.handle||n})}}]),c(e,[{key:"delete",value:function(){return this.gl.deleteRenderbuffer(this.handle),this}},{key:"bind",value:function(){return this.gl.bindRenderbuffer(a.default.RENDERBUFFER,this.handle),this}},{key:"unbind",value:function(){return this.gl.bindRenderbuffer(a.default.RENDERBUFFER,null),this}},{key:"storage",value:function(e){var t=e.internalFormat,n=e.width,r=e.height,o=this.gl;return(0,l.default)(t,"Needs internalFormat"),this.bind(),o.renderbufferStorage(a.default.RENDERBUFFER,(0,i.glGet)(t),n,r),this.unbind(),this}},{key:"getParameter",value:function(e){var t=this.gl;this.bind();var n=t.getRenderbufferParameter(a.default.RENDERBUFFER,(0,i.glGet)(e));return this.unbind(),n}},{key:"storageMultisample",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.samples,n=e.internalformat,r=e.width,o=e.height,i=this.gl;return(0,u.assertWebGL2Context)(i),i.renderbufferStorageMultisample(a.default.RENDERBUFFER,t,n,r,o),this}},{key:"getInternalformatParameter",value:function(e){var t=e.internalformat,n=e.pname,r=void 0===n?"SAMPLES":n,o=this.gl;return(0,u.assertWebGL2Context)(o),o.getInternalformatParameter(a.default.RENDERBUFFER,t,r)}},{key:"width",get:function(){return this.getParameter(a.default.RENDERBUFFER_WIDTH)}},{key:"height",get:function(){return this.getParameter(a.default.RENDERBUFFER_HEIGHT)}},{key:"internalFormat",get:function(){return this.getParameter(a.default.RENDERBUFFER_INTERNAL_FORMAT)}},{key:"greenSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_GREEN_SIZE)}},{key:"blueSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_BLUE_SIZE)}},{key:"redSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_RED_SIZE)}},{key:"alphaSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_ALPHA_SIZE)}},{key:"depthSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_DEPTH_SIZE)}},{key:"stencilSize",get:function(){return this.getParameter(a.default.RENDERBUFFER_STENCIL_SIZE)}},{key:"samples",get:function(){return this.getParameter(this.gl.RENDERBUFFER_SAMPLES)}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){if(null==e)throw new TypeError("Cannot destructure undefined")}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":h(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":h(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(3),l=n(2),c=n(21),f=function(e){return e&&e.__esModule?e:{default:e}}(c),h="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},d=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,t),(0,l.assertWebGLContext)(e);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:e.TEXTURE_2D})));return r.width=null,r.height=null,Object.seal(r),r.setImageData(n),n.generateMipmap&&r.generateMipmap(),r}return a(t,e),v(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e,{handle:n.handle||n})}},{key:"makeFromSolidColor",value:function(e,n){var r=d(n,4),o=r[0],i=void 0===o?0:o,a=r[1],u=void 0===a?0:a,s=r[2],l=void 0===s?0:s,c=r[3],f=void 0===c?1:c;return new t(e,{pixels:new Uint8Array([i,u,l,f]),width:1,format:e.RGBA,magFilter:e.NEAREST,minFilter:e.NEAREST})}},{key:"makeFromPixelArray",value:function(e,n){var r=n.dataArray,o=n.format,i=void 0===o?s.GL.RGBA:o,a=n.width,u=void 0===a?1:a,l=n.height,c=new Uint8Array(r);return new t(e,Object.assign({pixels:c,width:u,height:l,format:i},n))}}]),v(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;if(void 0===e)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=e,t.activeTexture(t.TEXTURE0+e),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return e.activeTexture(e.TEXTURE0+this.textureUnit),e.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(s.GL.ACTIVE_TEXTURE)-s.GL.TEXTURE0}},{key:"setPixels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buffer,n=e.width,r=void 0===n?null:n,o=e.height,i=void 0===o?null:o,a=e.mipmapLevel,u=void 0===a?0:a,l=e.format,c=void 0===l?s.GL.RGBA:l,f=e.type,h=void 0===f?s.GL.UNSIGNED_BYTE:f,d=e.border,v=void 0===d?0:d,y=this.gl;return y.bindBuffer(s.GL.PIXEL_UNPACK_BUFFER,t.target),this.bind(),y.texImage2D(y.TEXTURE_2D,u,c,r,i,v,c,h,t.target),this.unbind(),y.bindBuffer(s.GL.GL_PIXEL_UNPACK_BUFFER,null),this}},{key:"setImageDataFromCompressedBuffer",value:function(e){var t=e.buffer,n=e.width,r=void 0===n?null:n,o=e.height,i=void 0===o?null:o,a=e.mipmapLevel,u=void 0===a?0:a,l=e.internalFormat,c=void 0===l?s.GL.RGBA:l,f=e.border,h=void 0===f?0:f;return this.gl.compressedTexImage2D(this.target,u,c,r,i,h,t),this}},{key:"copyImageFromFramebuffer",value:function(e){var t=e.framebuffer,n=e.x,r=e.y,o=e.width,i=e.height,a=e.mipmapLevel,u=void 0===a?0:a,l=e.internalFormat,c=void 0===l?s.GL.RGBA:l,f=e.border,h=void 0===f?0:f,d=this.gl;t.bind(),this.bind(),d.copyTexImage2D(this.target,u,c,n,r,o,i,h),this.unbind(),t.unbind()}},{key:"copySubImage",value:function(e){r(e)}}]),t}(f.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(3),a=n(2),u=n(13),s=r(u),l=n(1),c=n(0),f=r(c),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(){function e(t,n){o(this,e);var r=n.id,u=void 0===r?(0,l.uid)("texture"):r,s=n.unpackFlipY,c=void 0===s||s,f=n.magFilter,h=void 0===f?i.GL.NEAREST:f,d=n.minFilter,v=void 0===d?i.GL.NEAREST:d,y=n.wrapS,p=void 0===y?i.GL.CLAMP_TO_EDGE:y,m=n.wrapT,b=void 0===m?i.GL.CLAMP_TO_EDGE:m,g=n.target,_=void 0===g?i.GL.TEXTURE_2D:g,E=n.handle;(0,a.assertWebGLContext)(t),this.handle=E||t.createTexture(),this.id=u,this.gl=t,this.target=_,this.hasFloatTexture=t.getExtension("OES_texture_float"),this.width=null,this.height=null,this.textureUnit=void 0,this.userData={},this.setPixelStorageModes(Object.assign({},n,{unpackFlipY:c})),this.setParameters(Object.assign({},n,{magFilter:h,minFilter:v,wrapS:p,wrapT:b}))}return h(e,[{key:"delete",value:function(){return this.handle&&(this.gl.deleteTexture(this.handle),this.handle=null),this}},{key:"toString",value:function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"generateMipmap",value:function(){return this.gl.bindTexture(this.target,this.handle),this.gl.generateMipmap(this.target),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(e){var t=e.target,n=void 0===t?this.target:t,r=e.pixels,o=void 0===r?null:r,a=e.data,u=void 0===a?null:a,l=e.width,c=e.height,h=e.mipmapLevel,d=void 0===h?0:h,v=e.format,y=void 0===v?i.GL.RGBA:v,p=e.type,m=e.offset,b=void 0===m?0:m,g=e.border,_=void 0===g?0:g,E=this.gl;if((o=o||u)&&o.data){var S=o;o=S.data,l=S.shape[0],c=S.shape[1]}if(E.bindTexture(this.target,this.handle),null===o)l=l||1,c=c||1,p=p||i.GL.UNSIGNED_BYTE,E.texImage2D(n,d,y,l,c,_,y,p,o),this.width=l,this.height=c;else if(ArrayBuffer.isView(o)){if((0,f.default)(l>0&&c>0,"Texture2D: Width and height required"),(p=p||(0,i.glTypeFromArray)(o))===E.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");E.texImage2D(n,d,y,l,c,_,y,p,o),this.width=l,this.height=c}else if(o instanceof i.WebGLBuffer||o instanceof s.default){(0,f.default)(E instanceof i.WebGL2RenderingContext,"Requires WebGL2"),p=p||i.GL.UNSIGNED_BYTE;var M=s.default.makeFrom(o);E.bindBuffer(i.GL.PIXEL_UNPACK_BUFFER,M.handle),E.texImage2D(n,d,y,l,c,_,y,p,b),E.bindBuffer(i.GL.GL_PIXEL_UNPACK_BUFFER,null),this.width=l,this.height=c}else{var A=this._deduceImageSize(o);(0,f.default)(void 0===l&&void 0===c,"Texture2D.setImageData: Width and height must not be provided"),p=p||i.GL.UNSIGNED_BYTE,E.texImage2D(n,d,y,y,p,o),this.width=A.width,this.height=A.height}return E.bindTexture(this.target,null),this}},{key:"_deduceImageSize",value:function(e){if("undefined"!=typeof ImageData&&e instanceof ImageData)return{width:e.width,height:e.height};if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)return{width:e.naturalWidth,height:e.naturalHeight};if("undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{width:e.width,height:e.height};if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)return{width:e.videoWidth,height:e.videoHeight};throw new Error("Unknown image data format. Failed to deduce image size")}},{key:"setPixelStorageModes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.packAlignment,n=e.unpackAlignment,r=e.unpackFlipY,o=e.unpackPremultiplyAlpha,i=e.unpackColorspaceConversion,a=e.packRowLength,u=e.packSkipPixels,s=e.packSkipRows,l=e.unpackRowLength,c=e.unpackImageHeight,f=e.unpackSkipPixels,h=e.unpackSkipRows,d=e.unpackSkipImages,v=this.gl;return v.bindTexture(this.target,this.handle),t&&v.pixelStorei(v.PACK_ALIGNMENT,t),n&&v.pixelStorei(v.UNPACK_ALIGNMENT,n),r&&v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,r),o&&v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),i&&v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,i),a&&v.pixelStorei(v.PACK_ROW_LENGTH,a),u&&v.pixelStorei(v.PACK_SKIP_PIXELS,u),s&&v.pixelStorei(v.PACK_SKIP_ROWS,s),l&&v.pixelStorei(v.UNPACK_ROW_LENGTH,l),c&&v.pixelStorei(v.UNPACK_IMAGE_HEIGHT,c),f&&v.pixelStorei(v.UNPACK_SKIP_PIXELS,f),h&&v.pixelStorei(v.UNPACK_SKIP_ROWS,h),d&&v.pixelStorei(v.UNPACK_SKIP_IMAGES,d),v.bindTexture(this.target,null),this}},{key:"setParameters",value:function(e){var t=e.magFilter,n=e.minFilter,r=e.wrapS,o=e.wrapT,i=e.wrapR,a=e.baseLevel,u=e.maxLevel,s=e.minLOD,l=e.maxLOD,c=e.compareFunc,f=e.compareMode,h=this.gl;return h.bindTexture(this.target,this.handle),t&&h.texParameteri(this.target,h.TEXTURE_MAG_FILTER,t),n&&h.texParameteri(this.target,h.TEXTURE_MIN_FILTER,n),r&&h.texParameteri(this.target,h.TEXTURE_WRAP_S,r),o&&h.texParameteri(this.target,h.TEXTURE_WRAP_T,o),i&&h.texParameteri(this.target,h.TEXTURE_WRAP_R,i),a&&h.texParameteri(this.target,h.TEXTURE_BASE_LEVEL,a),u&&h.texParameteri(this.target,h.TEXTURE_MAX_LEVEL,u),c&&h.texParameteri(this.target,h.TEXTURE_COMPARE_FUNC,c),f&&h.texParameteri(this.target,h.TEXTURE_COMPARE_MODE,f),s&&h.texParameterf(this.target,h.TEXTURE_MIN_LOD,s),l&&h.texParameterf(this.target,h.TEXTURE_MAX_LOD,l),h.bindTexture(this.target,null),this}},{key:"getParameters",value:function(){var e=this.gl;e.bindTexture(this.target,this.handle);var t={magFilter:e.getTexParameter(this.target,e.TEXTURE_MAG_FILTER),minFilter:e.getTexParameter(this.target,e.TEXTURE_MIN_FILTER),wrapS:e.getTexParameter(this.target,e.TEXTURE_WRAP_S),wrapT:e.getTexParameter(this.target,e.TEXTURE_WRAP_T)};return e.bindTexture(this.target,null),t}},{key:"image2D",value:function(e){var t=e.pixels,n=e.format,r=void 0===n?i.GL.RGBA:n,o=e.type,a=void 0===o?i.GL.UNSIGNED_BYTE:o;if(a===i.GL.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");return this.gl.bindTexture(this.target,this.handle),this.gl.texImage2D(i.GL.TEXTURE_2D,0,r,r,a,t),this.gl.bindTexture(this.target,null),this}},{key:"update",value:function(e){throw new Error("Texture.update() is deprecated()")}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.WebGL2RenderingContext=t.WebGLShaderPrecisionFormat=t.WebGLActiveInfo=t.WebGLUniformLocation=t.WebGLTexture=t.WebGLRenderbuffer=t.WebGLFramebuffer=t.WebGLBuffer=t.WebGLShader=t.WebGLProgram=t.WebGLRenderingContext=t.Image=t.webGLTypesAvailable=void 0;var o=n(48),i=function(e){return e&&e.__esModule?e:{default:e}}(o),a=function e(){r(this,e)},u=i.default.globals.headlessTypes||o.global,s=u.WebGLRenderingContext,l=void 0===s?a:s,c=u.WebGLProgram,f=void 0===c?a:c,h=u.WebGLShader,d=void 0===h?a:h,v=u.WebGLBuffer,y=void 0===v?a:v,p=u.WebGLFramebuffer,m=void 0===p?a:p,b=u.WebGLRenderbuffer,g=void 0===b?a:b,_=u.WebGLTexture,E=void 0===_?a:_,S=u.WebGLUniformLocation,M=void 0===S?a:S,A=u.WebGLActiveInfo,T=void 0===A?a:A,x=u.WebGLShaderPrecisionFormat,I=void 0===x?a:x,R=(t.webGLTypesAvailable=l!==a&&f!==a&&d!==a&&y!==a&&m!==a&&g!==a&&E!==a&&M!==a&&T!==a&&I!==a,function(){var e=function e(){r(this,e)};return o.global.WebGL2RenderingContext||e}()),w=function(){var e=function e(){r(this,e)};return o.global.Image||e}();t.Image=w,t.WebGLRenderingContext=l,t.WebGLProgram=f,t.WebGLShader=d,t.WebGLBuffer=y,t.WebGLFramebuffer=m,t.WebGLRenderbuffer=g,t.WebGLTexture=E,t.WebGLUniformLocation=M,t.WebGLActiveInfo=T,t.WebGLShaderPrecisionFormat=I,t.WebGL2RenderingContext=R},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Math.sqrt,c=Math.sin,f=Math.cos,h=Math.tan,d=Math.PI,v=Array.prototype.slice,y=t.Vec3=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,3));return a[0]=e,a[1]=n,a[2]=i,a}return i(t,e),s(t,[{key:"x",get:function(){return this[0]},set:function(e){return this[0]=e}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=e}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=e}}],[{key:"create",value:function(){return new t(3)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array)),p={setVec3:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},set:function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},add:function(e,t){return new y(e[0]+t[0],e[1]+t[1],e[2]+t[2])},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e},add2:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},sub:function(e,t){return new y(e[0]-t[0],e[1]-t[1],e[2]-t[2])},$sub:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e},sub2:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},scale:function(e,t){return new y(e[0]*t,e[1]*t,e[2]*t)},$scale:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e},neg:function(e){return new y(-e[0],-e[1],-e[2])},$neg:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e},unit:function(e){var t=y.norm(e);return t>0?y.scale(e,1/t):y.clone(e)},$unit:function(e){var t=y.norm(e);return t>0?y.$scale(e,1/t):e},cross:function(e,t){var n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],u=t[2];return new y(r*u-o*a,o*i-n*u,n*a-r*i)},$cross:function(e,t){var n=e[0],r=e[1],o=e[2],i=t[0],a=t[1],u=t[2];return e[0]=r*u-o*a,e[1]=o*i-n*u,e[2]=n*a-r*i,e},distTo:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return l(n*n+r*r+o*o)},distToSq:function(e,t){var n=e[0]-t[0],r=e[1]-t[1],o=e[2]-t[2];return n*n+r*r+o*o},norm:function(e){var t=e[0],n=e[1],r=e[2];return l(t*t+n*n+r*r)},normSq:function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},clone:function(e){return e instanceof y?new y(e[0],e[1],e[2]):y.setVec3(new Float32Array(3),e)},toFloat32Array:function(e){var t=e.typedContainer;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t):e}},m=y.prototype;for(var b in p)y[b]=p[b],m[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),y[e].apply(y,t)}}(b);var g=t.Mat4=function(e){function t(e,n,i,a,u,s,l,c,f,h,d,v,y,p,m,b){r(this,t);var g=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,16));return g.length=16,"number"==typeof e?g.set(e,n,i,a,u,s,l,c,f,h,d,v,y,p,m,b):g.id(),g.typedContainer=new Float32Array(16),g}return i(t,e),s(t,[{key:"copy",value:function(e){for(var t=0;t<16;++t)this[t]=e[t];return this}},{key:"n11",get:function(){return this[0]},set:function(e){this[0]=e}},{key:"n12",get:function(){return this[4]},set:function(e){this[4]=e}},{key:"n13",get:function(){return this[8]},set:function(e){this[8]=e}},{key:"n14",get:function(){return this[12]},set:function(e){this[12]=e}},{key:"n21",get:function(){return this[1]},set:function(e){this[1]=e}},{key:"n22",get:function(){return this[5]},set:function(e){this[5]=e}},{key:"n23",get:function(){return this[9]},set:function(e){this[9]=e}},{key:"n24",get:function(){return this[13]},set:function(e){this[13]=e}},{key:"n31",get:function(){return this[2]},set:function(e){this[2]=e}},{key:"n32",get:function(){return this[6]},set:function(e){this[6]=e}},{key:"n33",get:function(){return this[10]},set:function(e){this[10]=e}},{key:"n34",get:function(){return this[14]},set:function(e){this[14]=e}},{key:"n41",get:function(){return this[3]},set:function(e){this[3]=e}},{key:"n42",get:function(){return this[7]},set:function(e){this[7]=e}},{key:"n43",get:function(){return this[11]},set:function(e){this[11]=e}},{key:"n44",get:function(){return this[15]},set:function(e){this[15]=e}}],[{key:"create",value:function(){return new Array(16)}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));p={id:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},clone:function(e){return e instanceof g?new g(e[0],e[4],e[8],e[12],e[1],e[5],e[9],e[13],e[2],e[6],e[10],e[14],e[3],e[7],e[11],e[15]):new typedArray(e)},set:function(e,t,n,r,o,i,a,u,s,l,c,f,h,d,v,y,p){return e[0]=t,e[4]=n,e[8]=r,e[12]=o,e[1]=i,e[5]=a,e[9]=u,e[13]=s,e[2]=l,e[6]=c,e[10]=f,e[14]=h,e[3]=d,e[7]=v,e[11]=y,e[15]=p,e},mulVec3:function(e,t){var n=y.clone(t);return g.$mulVec3(e,n)},$mulVec3:function(e,t){var n=t[0],r=t[1],o=t[2],i=1/(e[3]*n+e[7]*r+e[11]*o+e[15]);return t[0]=(e[0]*n+e[4]*r+e[8]*o+e[12])*i,t[1]=(e[1]*n+e[5]*r+e[9]*o+e[13])*i,t[2]=(e[2]*n+e[6]*r+e[10]*o+e[14])*i,t},mulMat42:function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],v=t[11],y=t[12],p=t[13],m=t[14],b=t[15],g=n[0],_=n[1],E=n[2],S=n[3],M=n[4],A=n[5],T=n[6],x=n[7],I=n[8],R=n[9],w=n[10],F=n[11],O=n[12],P=n[13],L=n[14],k=n[15];return e[0]=g*r+_*u+E*f+S*y,e[1]=g*o+_*s+E*h+S*p,e[2]=g*i+_*l+E*d+S*m,e[3]=g*a+_*c+E*v+S*b,e[4]=M*r+A*u+T*f+x*y,e[5]=M*o+A*s+T*h+x*p,e[6]=M*i+A*l+T*d+x*m,e[7]=M*a+A*c+T*v+x*b,e[8]=I*r+R*u+w*f+F*y,e[9]=I*o+R*s+w*h+F*p,e[10]=I*i+R*l+w*d+F*m,e[11]=I*a+R*c+w*v+F*b,e[12]=O*r+P*u+L*f+k*y,e[13]=O*o+P*s+L*h+k*p,e[14]=O*i+P*l+L*d+k*m,e[15]=O*a+P*c+L*v+k*b,e},mulMat4:function(e,t){var n=g.clone(e);return g.mulMat42(n,e,t)},$mulMat4:function(e,t){return g.mulMat42(e,e,t)},add:function(e,t){var n=g.clone(e);return g.$add(n,t)},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e[4]+=t[4],e[5]+=t[5],e[6]+=t[6],e[7]+=t[7],e[8]+=t[8],e[9]+=t[9],e[10]+=t[10],e[11]+=t[11],e[12]+=t[12],e[13]+=t[13],e[14]+=t[14],e[15]+=t[15],e},transpose:function(e){var t=g.clone(e);return g.$transpose(t)},$transpose:function(e){var t=e[4],n=e[8],r=e[12],o=e[1],i=e[9],a=e[13],u=e[2],s=e[6],l=e[14],c=e[3],f=e[7],h=e[11];return e[1]=t,e[2]=n,e[3]=r,e[4]=o,e[6]=i,e[7]=a,e[8]=u,e[9]=s,e[11]=l,e[12]=c,e[13]=f,e[14]=h,e},rotateAxis:function(e,t,n){var r=g.clone(e);return g.$rotateAxis(r,t,n)},$rotateAxis:function(e,t,n){var r=c(t),o=f(t),i=1-o,a=n[0],u=n[1],s=n[2],l=a*a*i+o,h=a*u*i+s*r,d=a*s*i-u*r,v=u*a*i-s*r,y=u*u*i+o,p=u*s*i+a*r,m=a*s*i+u*r,b=u*s*i-a*r,g=s*s*i+o,_=e[0],E=e[1],S=e[2],M=e[3],A=e[4],T=e[5],x=e[6],I=e[7],R=e[8],w=e[9],F=e[10],O=e[11];e[12],e[13],e[14],e[15];return e[0]=_*l+A*h+R*d,e[1]=E*l+T*h+w*d,e[2]=S*l+x*h+F*d,e[3]=M*l+I*h+O*d,e[4]=_*v+A*y+R*p,e[5]=E*v+T*y+w*p,e[6]=S*v+x*y+F*p,e[7]=M*v+I*y+O*p,e[8]=_*m+A*b+R*g,e[9]=E*m+T*b+w*g,e[10]=S*m+x*b+F*g,e[11]=M*m+I*b+O*g,e},rotateXYZ:function(e,t,n,r){var o=g.clone(e);return g.$rotateXYZ(o,t,n,r)},$rotateXYZ:function(e,t,n,r){var o=e[0],i=e[1],a=e[2],u=e[3],s=e[4],l=e[5],h=e[6],d=e[7],v=e[8],y=e[9],p=e[10],m=e[11],b=f(t),g=f(n),_=f(r),E=c(t),S=c(n),M=c(r),A=g*_,T=-b*M+E*S*_,x=E*M+b*S*_,I=g*M,R=b*_+E*S*M,w=-E*_+b*S*M,F=-S,O=E*g,P=b*g;return e[0]=o*A+s*I+v*F,e[1]=i*A+l*I+y*F,e[2]=a*A+h*I+p*F,e[3]=u*A+d*I+m*F,e[4]=o*T+s*R+v*O,e[5]=i*T+l*R+y*O,e[6]=a*T+h*R+p*O,e[7]=u*T+d*R+m*O,e[8]=o*x+s*w+v*P,e[9]=i*x+l*w+y*P,e[10]=a*x+h*w+p*P,e[11]=u*x+d*w+m*P,e},translate:function(e,t,n,r){var o=g.clone(e);return g.$translate(o,t,n,r)},$translate:function(e,t,n,r){return e[12]=e[0]*t+e[4]*n+e[8]*r+e[12],e[13]=e[1]*t+e[5]*n+e[9]*r+e[13],e[14]=e[2]*t+e[6]*n+e[10]*r+e[14],e[15]=e[3]*t+e[7]*n+e[11]*r+e[15],e},scale:function(e,t,n,r){var o=g.clone(e);return g.$scale(o,t,n,r)},$scale:function(e,t,n,r){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e[4]*=n,e[5]*=n,e[6]*=n,e[7]*=n,e[8]*=r,e[9]*=r,e[10]*=r,e[11]*=r,e},invert:function(e){var t=g.clone(e);return g.$invert(t)},$invert:function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],v=e[13],y=e[14],p=e[15],m=t*a-n*i,b=t*u-r*i,g=t*s-o*i,_=n*u-r*a,E=n*s-o*a,S=r*s-o*u,M=l*v-c*d,A=l*y-f*d,T=l*p-h*d,x=c*y-f*v,I=c*p-h*v,R=f*p-h*y,w=1/(m*R-b*I+g*x+_*T-E*A+S*M);return e[0]=(+a*R-u*I+s*x)*w,e[1]=(-n*R+r*I-o*x)*w,e[2]=(+v*S-y*E+p*_)*w,e[3]=(-c*S+f*E-h*_)*w,e[4]=(-i*R+u*T-s*A)*w,e[5]=(+t*R-r*T+o*A)*w,e[6]=(-d*S+y*g-p*b)*w,e[7]=(+l*S-f*g+h*b)*w,e[8]=(+i*I-a*T+s*M)*w,e[9]=(-t*I+n*T-o*M)*w,e[10]=(+d*E-v*g+p*m)*w,e[11]=(-l*E+c*g-h*m)*w,e[12]=(-i*x+a*A-u*M)*w,e[13]=(+t*x-n*A+r*M)*w,e[14]=(-d*_+v*b-y*m)*w,e[15]=(+l*_-c*b+f*m)*w,e},lookAt:function(e,t,n,r){var o=y.sub(t,n);o.$unit();var i=y.cross(r,o);i.$unit();var a=y.cross(o,i);return a.$unit(),g.set(e,i[0],i[1],i[2],-i.dot(t),a[0],a[1],a[2],-a.dot(t),o[0],o[1],o[2],-o.dot(t),0,0,0,1)},frustum:function(e,t,n,r,o,i,a){var u=n-t,s=o-r,l=a-i;return e[0]=2*i/u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i/s,e[6]=0,e[7]=0,e[8]=(n+t)/u,e[9]=(o+r)/s,e[10]=-(a+i)/l,e[11]=-1,e[12]=0,e[13]=0,e[14]=-a*i*2/l,e[15]=0,e},perspective:function(e,t,n,r,o){var i=r*h(t*d/360),a=-i,u=a*n,s=i*n;return g.frustum(e,u,s,a,i,r,o)},ortho:function(e,t,n,r,o,i,a){var u=(this.elements,n-t),s=r-o,l=a-i,c=(n+t)/u,f=(r+o)/s,h=(a+i)/l;return e[0]=2/u,e[4]=0,e[8]=0,e[12]=-c,e[1]=0,e[5]=2/s,e[9]=0,e[13]=-f,e[2]=0,e[6]=0,e[10]=-2/l,e[14]=-h,e[3]=0,e[7]=0,e[11]=0,e[15]=1,e},toFloat32Array:function(e){var t=e.typedContainer;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t):e}},m=g.prototype;for(b in p)g[b]=p[b],m[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),g[e].apply(g,t)}}(b);var _=t.Quat=function(e){function t(e,n,i,a){r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,4));return u[0]=e||0,u[1]=n||0,u[2]=i||0,u[3]=a||0,u.typedContainer=new Float32Array(4),u}return i(t,e),s(t,null,[{key:"create",value:function(){return new Array(4)}},{key:"fromVec3",value:function(e,n){return new t(e[0],e[1],e[2],n||0)}},{key:"fromMat4",value:function(e){var n,r,o;e[0]>e[5]&&e[0]>e[10]?(n=0,r=1,o=2):e[5]>e[0]&&e[5]>e[10]?(n=1,r=2,o=0):(n=2,r=0,o=1);var i=l(1+e[5*n]-e[5*r]-e[5*o]),a=new t;return a[n]=.5*i,a[r]=.5*(e["n"+r+n]+e["n"+n+r])/i,a[o]=.5*(e["n"+n+o]+e["n"+o+n])/i,a[3]=.5*(e["n"+r+o]-e["n"+o+r])/i,a}},{key:"fromXRotation",value:function(e){return new t(c(e/2),0,0,f(e/2))}},{key:"fromYRotation",value:function(e){return new t(0,c(e/2),0,f(e/2))}},{key:"fromZRotation",value:function(e){return new t(0,0,c(e/2),f(e/2))}},{key:"fromAxisRotation",value:function(e,n){var r=e[0],o=e[1],i=e[2],a=1/l(r*r+o*o+i*i),u=c(n/2);return new t(u*r*a,u*o*a,u*i*a,f(n/2))}}]),t}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Array));p={setQuat:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},set:function(e,t,n,r,o){return e[0]=t||0,e[1]=n||0,e[2]=r||0,e[3]=o||0,e},clone:function(e){return e instanceof _?new _(e[0],e[1],e[2],e[3]):_.setQuat(new typedArray(4),e)},neg:function(e){return new _(-e[0],-e[1],-e[2],-e[3])},$neg:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e[3]=-e[3],e},add:function(e,t){return new _(e[0]+t[0],e[1]+t[1],e[2]+t[2],e[3]+t[3])},$add:function(e,t){return e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[3],e},sub:function(e,t){return new _(e[0]-t[0],e[1]-t[1],e[2]-t[2],e[3]-t[3])},$sub:function(e,t){return e[0]-=t[0],e[1]-=t[1],e[2]-=t[2],e[3]-=t[3],e},scale:function(e,t){return new _(e[0]*t,e[1]*t,e[2]*t,e[3]*t)},$scale:function(e,t){return e[0]*=t,e[1]*=t,e[2]*=t,e[3]*=t,e},mulQuat:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],u=t[1],s=t[2],l=t[3];return new _(i*a+n*l+r*s-o*u,i*u+r*l+o*a-n*s,i*s+o*l+n*u-r*a,i*l-n*a-r*u-o*s)},$mulQuat:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],u=t[1],s=t[2],l=t[3];return e[0]=i*a+n*l+r*s-o*u,e[1]=i*u+r*l+o*a-n*s,e[2]=i*s+o*l+n*u-r*a,e[3]=i*l-n*a-r*u-o*s,e},divQuat:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],u=t[1],s=t[2],l=t[3],c=1/(l*l+a*a+u*u+s*s);return new _((n*l-i*a-r*s+o*u)*c,(n*s-i*u+r*l-o*a)*c,(r*a+o*l-i*s-n*u)*c,(i*l+n*a+r*u+o*s)*c)},$divQuat:function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3],a=t[0],u=t[1],s=t[2],l=t[3],c=1/(l*l+a*a+u*u+s*s);return e[0]=(n*l-i*a-r*s+o*u)*c,e[1]=(n*s-i*u+r*l-o*a)*c,e[2]=(r*a+o*l-i*s-n*u)*c,e[3]=(i*l+n*a+r*u+o*s)*c,e},invert:function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=1/(t*t+n*n+r*r+o*o);return new _(-t*i,-n*i,-r*i,o*i)},$invert:function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=1/(t*t+n*n+r*r+o*o);return e[0]=-t*i,e[1]=-n*i,e[2]=-r*i,e[3]=o*i,e},norm:function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return l(t*t+n*n+r*r+o*o)},normSq:function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},unit:function(e){return _.scale(e,1/_.norm(e))},$unit:function(e){return _.$scale(e,1/_.norm(e))},conjugate:function(e){return new _(-e[0],-e[1],-e[2],e[3])},$conjugate:function(e){return e[0]=-e[0],e[1]=-e[1],e[2]=-e[2],e}},m=_.prototype={};for(b in p)_[b]=p[b],m[b]=function(e){return function(){var t=v.call(arguments);return t.unshift(this),_[e].apply(_,t)}}(b);y.fromQuat=function(e){return new y(e[0],e[1],e[2])},g.fromQuat=function(e){var t=e[3],n=e[0],r=e[1],o=e[2];return new g(t*t+n*n-r*r-o*o,2*n*r-2*t*o,2*n*o+2*t*r,0,2*n*r+2*t*o,t*t-n*n+r*r-o*o,2*r*o-2*t*n,0,2*n*o-2*t*r,2*r*o+2*t*n,t*t-n*n-r*r+o*o,0,0,0,0,1)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(25),h=r(f),d=n(0),v=r(d),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,t);var n=e.children,r=void 0===n?[]:n;r.every(function(e){return(0,v.default)(e instanceof h.default)});var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.children=r,o}return u(t,e),c(t,[{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var l=u.value;Array.isArray(l)?this.add.apply(this,o(l)):this.children.push(l)}}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return this}},{key:"remove",value:function(e){var t=this.children,n=t.indexOf(e);return n>-1&&t.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}}]),t}(h.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=n(23),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(){function e(t){var n=t.id;t.display;r(this,e),this.position=new a.Vec3,this.rotation=new a.Vec3,this.scale=new a.Vec3(1,1,1),this.matrix=new a.Mat4,this.id=n||(0,i.uid)(this.constructor.name),this.display=!0,this.userData={}}return o(e,[{key:"setPosition",value:function(e){return(0,s.default)(3===e.length,"setPosition requires vector argument"),this.position=e,this}},{key:"setRotation",value:function(e){return(0,s.default)(3===e.length,"setRotation requires vector argument"),this.rotation=e,this}},{key:"setScale",value:function(e){return(0,s.default)(3===e.length,"setScale requires vector argument"),this.scale=e,this}},{key:"setMatrixComponents",value:function(e){var t=e.position,n=e.rotation,r=e.scale,o=e.update,i=void 0===o||o;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),i&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var e=this.position,t=this.rotation,n=this.scale;return this.matrix.id(),this.matrix.$translate(e[0],e[1],e[2]),this.matrix.$rotateXYZ(t[0],t[1],t[2]),this.matrix.$scale(n[0],n[1],n[2]),this}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.position,n=e.rotation,r=e.scale;return t&&this.setPosition(t),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(e,t){(0,s.default)(e),t=t||this.matrix;var n=(new a.Mat4).copy(e).mulMat4(t),r=n.invert();return{viewMatrix:e,modelMatrix:t,objectMatrix:t,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var e=this.parent;this.endPosition.setVec3(this.position.add(e.endPosition)),this.endRotation.setVec3(this.rotation.add(e.endRotation)),this.endScale.setVec3(this.scale.add(e.endScale))}else this.endPosition.setVec3(this.position),this.endRotation.setVec3(this.rotation),this.endScale.setVec3(this.scale);for(var t=this.children,n=0;n<t.length;++n)t[n].transform();return this}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(10),h=r(f),d=n(5),v=n(28),y=r(v),p=n(18),m=r(p),b=n(29),g=r(b),_=n(9),E=n(97),S=function(e){function t(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(n[0])&&1===arguments.length?a.copy(n[0]):a.identity(),a}return a(t,e),c(t,[{key:"setRowMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return _.mat4.set(this,e,o,s,h,t,i,l,d,n,a,c,v,r,u,f,y),this.check(),this}},{key:"setColumnMajor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,d=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,v=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,y=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return _.mat4.set(this,e,t,n,r,o,i,a,u,s,l,c,f,h,d,v,y),this.check(),this}},{key:"equals",value:function(e){return _.mat4.equals(this,e)}},{key:"exactEquals",value:function(e){return _.mat4.exactEquals(this,e)}},{key:"toString",value:function(){d.glMatrix.printRowMajor,_.mat4.str(this)}},{key:"determinant",value:function(){return _.mat4.determinant(this)}},{key:"getRotation",value:function(){throw new Error("Not implemented")}},{key:"identity",value:function(){return _.mat4.identity(this),this.check(),this}},{key:"frustum",value:function(e){var t=e.left,n=e.right,r=e.bottom,o=e.top,i=e.near,a=e.far;return _.mat4.frustum(this,t,n,r,o,i,a),this.check(),this}},{key:"lookAt",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.eye,n=e.center,r=void 0===n?[0,0,0]:n,o=e.up,i=void 0===o?[0,1,0]:o;return _.mat4.lookAt(this,t,r,i),this.check(),this}},{key:"ortho",value:function(e){var t=e.left,n=e.right,r=e.bottom,o=e.top,i=e.near,a=void 0===i?.1:i,u=e.far,s=void 0===u?500:u;return _.mat4.ortho(this,t,n,r,o,a,s),this.check(),this}},{key:"perspective",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fov,n=void 0===t?45*Math.PI/180:t,r=e.aspect,o=void 0===r?1:r,i=e.near,a=void 0===i?.1:i,u=e.far,s=void 0===u?500:u;if(n>2*Math.PI)throw Error("radians");return _.mat4.perspective(this,n,o,a,s),this.check(),this}},{key:"perspectiveFromFieldOfView",value:function(e,t,n,r){return _.mat4.perspectiveFromFieldOfView(e,t,n,r),this.check(),this}},{key:"fromQuaternion",value:function(e){return _.mat4.fromQuat(this,e),this.check(),this}},{key:"fromRotation",value:function(e,t){return _.mat4.fromRotation(this,e,t),this.check(),this}},{key:"fromRotationTranslation",value:function(e,t){return _.mat4.fromRotationTranslation(this,e,t),this.check(),this}},{key:"fromRotationTranslationScale",value:function(e,t,n){return _.mat4.fromRotationTranslationScale(this,e,t,n),this.check(),this}},{key:"fromRotationTranslationScaleOrigin",value:function(e,t,n,r){return _.mat4.fromRotationTranslationScaleOrigin(this,e,t,n,r),this.check(),this}},{key:"fromScaling",value:function(e){return _.mat4.fromScaling(this,e),this.check(),this}},{key:"fromTranslation",value:function(e){return _.mat4.fromTranslation(this,e),this.check(),this}},{key:"fromXRotation",value:function(e){return _.mat4.fromXRotation(this,e),this.check(),this}},{key:"fromYRotation",value:function(e){return _.mat4.fromYRotation(this,e),this.check(),this}},{key:"fromZRotation",value:function(e){return _.mat4.fromZRotation(this,e),this.check(),this}},{key:"transpose",value:function(){return _.mat4.transpose(this,this),this.check(),this}},{key:"invert",value:function(){return _.mat4.invert(this,this),this.check(),this}},{key:"adjoint",value:function(){return _.mat4.adjoint(this,this),this.check(),this}},{key:"add",value:function(e,t){return _.mat4.add(this,this,e),this.check(),this}},{key:"multiplyLeft",value:function(e){return _.mat4.multiply(this,e,this),this.check(),this}},{key:"multiplyRight",value:function(e){return _.mat4.multiply(this,this,e),this.check(),this}},{key:"rotateX",value:function(e){return _.mat4.rotateX(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return _.mat4.rotateY(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return _.mat4.rotateZ(this,this,e),this.check(),this}},{key:"rotateXYZ",value:function(e){var t=l(e,3),n=t[0],r=t[1],o=t[2],i=this[0],a=this[1],u=this[2],s=this[3],c=this[4],f=this[5],h=this[6],d=this[7],v=this[8],y=this[9],p=this[10],m=this[11],b=Math.cos(n),g=Math.cos(r),_=Math.cos(o),E=Math.sin(n),S=Math.sin(r),M=Math.sin(o),A=g*_,T=-b*M+E*S*_,x=E*M+b*S*_,I=g*M,R=b*_+E*S*M,w=-E*_+b*S*M,F=-S,O=E*g,P=b*g;return this[0]=i*A+c*I+v*F,this[1]=a*A+f*I+y*F,this[2]=u*A+h*I+p*F,this[3]=s*A+d*I+m*F,this[4]=i*T+c*R+v*O,this[5]=a*T+f*R+y*O,this[6]=u*T+h*R+p*O,this[7]=s*T+d*R+m*O,this[8]=i*x+c*w+v*P,this[9]=a*x+f*w+y*P,this[10]=u*x+h*w+p*P,this[11]=s*x+d*w+m*P,this.check(),this}},{key:"scale",value:function(e){return _.mat4.scale(this,this,e),this.check(),this}},{key:"translate",value:function(e){return _.mat4.translate(this,this,e),this.check(),this}},{key:"transformVector2",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y.default;return _.vec2.transformMat4(t,e,this),(0,E.checkVector2)(t),t}},{key:"transformVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new m.default;return _.vec3.transformMat4(t,e,this),(0,E.checkVector3)(t),t}},{key:"transformVector4",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new g.default;return _.vec4.transformMat4(t,e,this),(0,E.checkVector4)(t),t}},{key:"transformVector",value:function(e){switch(e.length){case 2:return this.transformVector2(e);case 3:return this.transformVector3(e);case 4:return this.transformVector4(e);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(e){return this[0]=(0,d.checkNumber)(e)}},{key:"m01",get:function(){return this[4]},set:function(e){return this[4]=(0,d.checkNumber)(e)}},{key:"m02",get:function(){return this[8]},set:function(e){return this[8]=(0,d.checkNumber)(e)}},{key:"m03",get:function(){return this[12]},set:function(e){return this[12]=(0,d.checkNumber)(e)}},{key:"m10",get:function(){return this[1]},set:function(e){return this[1]=(0,d.checkNumber)(e)}},{key:"m11",get:function(){return this[5]},set:function(e){return this[5]=(0,d.checkNumber)(e)}},{key:"m12",get:function(){return this[9]},set:function(e){return this[9]=(0,d.checkNumber)(e)}},{key:"m13",get:function(){return this[13]},set:function(e){return this[13]=(0,d.checkNumber)(e)}},{key:"m20",get:function(){return this[2]},set:function(e){return this[2]=(0,d.checkNumber)(e)}},{key:"m21",get:function(){return this[6]},set:function(e){return this[6]=(0,d.checkNumber)(e)}},{key:"m22",get:function(){return this[10]},set:function(e){return this[10]=(0,d.checkNumber)(e)}},{key:"m23",get:function(){return this[14]},set:function(e){return this[14]=(0,d.checkNumber)(e)}},{key:"m30",get:function(){return this[3]},set:function(e){return this[3]=(0,d.checkNumber)(e)}},{key:"m31",get:function(){return this[7]},set:function(e){return this[7]=(0,d.checkNumber)(e)}},{key:"m32",get:function(){return this[11]},set:function(e){return this[11]=(0,d.checkNumber)(e)}},{key:"m33",get:function(){return this[15]},set:function(e){return this[15]=(0,d.checkNumber)(e)}}],[{key:"equals",value:function(e,t){return _.mat4.equals(e,t)}},{key:"exactEquals",value:function(e,t){return _.mat4.exactEquals(e,t)}},{key:"determinant",value:function(e){return _.mat4.determinant(e)}},{key:"frustum",value:function(e){return(new t).frustum(e)}},{key:"lookAt",value:function(e){return(new t).lookAt(e)}},{key:"ortho",value:function(e){return(new t).ortho(e)}},{key:"perspective",value:function(e){return(new t).perspective(e)}},{key:"perspectiveFromFieldOfView",value:function(e){return(new t).perspectiveFromFieldOfView(e)}},{key:"fromQuaternion",value:function(e){return(new t).fromQuaternion(e)}}]),t}(h.default);t.default=S},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(10),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(5),h=n(9),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?u.copy(e):u.set(e,n,i,a),u}return i(t,e),s(t,[{key:"fromMatrix3",value:function(e){return h.quat.fromMat3(this,e),this.check(),this}},{key:"fromValues",value:function(e,t,n,r){return this.set(e,t,n,r)}},{key:"identity",value:function(){return h.quat.identity(this),this.check(),this}},{key:"equals",value:function(e){return h.quat.equals(this,e)}},{key:"exactEquals",value:function(e){return h.quat.exactEquals(this,e)}},{key:"length",value:function(){return h.quat.length(this)}},{key:"squaredLength",value:function(e){return h.quat.squaredLength(this)}},{key:"dot",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.dot only takes one argument");return h.quat.dot(this,e)}},{key:"getAxisAngle",value:function(){var e=[];return{axis:e,angle:h.quat.getAxisAngle(e,this)}}},{key:"rotationTo",value:function(e,t){return h.quat.rotationTo(this,e,t),this.check(),this}},{key:"add",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.add only takes one argument");return h.quat.add(this,e),this.check(),this}},{key:"calculateW",value:function(){return h.quat.calculateW(this,this),this.check(),this}},{key:"conjugate",value:function(){return h.quat.conjugate(this,this),this.check(),this}},{key:"invert",value:function(){return h.quat.invert(this,this),this.check(),this}},{key:"lerp",value:function(e,t,n){return h.quat.lerp(this,e,t,n),this.check(),this}},{key:"multiply",value:function(e,t){if(void 0!==t)throw new Error("Quaternion.multiply only takes one argument");return h.quat.multiply(this,this,t),this.check(),this}},{key:"normalize",value:function(){return h.quat.normalize(this,this),this.check(),this}},{key:"rotateX",value:function(e){return h.quat.rotateX(this,this,e),this.check(),this}},{key:"rotateY",value:function(e){return h.quat.rotateY(this,this,e),this.check(),this}},{key:"rotateZ",value:function(e){return h.quat.rotateZ(this,this,e),this.check(),this}},{key:"scale",value:function(e){return h.quat.scale(this,this,e),this.check(),this}},{key:"set",value:function(e,t,n,r){return h.quat.set(this,e,t,n,r),this.check(),this}},{key:"setAxisAngle",value:function(e,t){return h.quat.setAxisAngle(this,e,t),this.check(),this}},{key:"slerp",value:function(e,t,n){return h.quat.slerp(this,e,t,n),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,f.checkNumber)(e)}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(10),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(5),h=n(9),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?i.copy(e):i.set(e,n),i}return i(t,e),s(t,[{key:"set",value:function(e,t){return h.vec2.set(this,e,t),this.check(),this}},{key:"equals",value:function(e){return h.vec2.equals(this,e)}},{key:"exactEquals",value:function(e){return h.vec2.exactEquals(this,e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;h.vec2.add(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":u(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":u(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(10),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f=n(5),h=n(9),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return Array.isArray(e)&&1===arguments.length?u.copy(e):u.set(e,n,i,a),u}return i(t,e),s(t,[{key:"set",value:function(e,t,n,r){return h.vec4.set(this,e,t,n,r),this.check(),this}},{key:"equals",value:function(e){return h.vec4.equals(this,e)}},{key:"exactEquals",value:function(e){return h.vec4.exactEquals(this,e)}},{key:"distance",value:function(e){return h.vec4.distance(e)}},{key:"dist",value:function(e){return h.vec4.dist(e)}},{key:"angle",value:function(e){return h.vec4.angle(e)}},{key:"add",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;h.vec4.add(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"subtract",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;h.vec4.subtract(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"multiply",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;h.vec4.multiply(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"divide",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;h.vec4.divide(this,s)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return this.check(),this}},{key:"ceil",value:function(){return h.vec4.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return h.vec4.floor(this,this),this.check(),this}},{key:"min",value:function(){return h.vec4.min(this,this),this.check(),this}},{key:"max",value:function(){return h.vec4.max(this,this),this.check(),this}},{key:"scale",value:function(e){return h.vec4.scale(this,this,e),this.check(),this}},{key:"scaleAndAdd",value:function(e,t){return h.vec4.scaleAndAdd(this,this,e,t),this.check(),this}},{key:"negate",value:function(){return h.vec4.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return h.vec4.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return h.vec4.normalize(this,this),this.check(),this}},{key:"dot",value:function(e){return h.vec4.dot(this,this,e),this.check(),this}},{key:"cross",value:function(e){return h.vec4.cross(this,this,e),this.check(),this}},{key:"lerp",value:function(e){return h.vec4.lerp(this,this,e),this.check(),this}},{key:"hermite",value:function(e){return h.vec4.hermite(this,this,e),this.check(),this}},{key:"bezier",value:function(e){return h.vec4.bezier(this,this,e),this.check(),this}},{key:"random",value:function(e){return h.vec4.random(this,this,e),this.check(),this}},{key:"rotateX",value:function(e,t){return h.vec4.rotateX(this,this,e,t),this.check(),this}},{key:"rotateY",value:function(e,t){return h.vec4.rotateY(this,this,e,t),this.check(),this}},{key:"rotateZ",value:function(e,t){return h.vec4.rotateZ(this,this,e,t),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,f.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,f.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,f.checkNumber)(e)}},{key:"w",get:function(){return this[3]},set:function(e){return this[3]=(0,f.checkNumber)(e)}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},o="function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return void 0===e?"undefined":r(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":r(e)},i=t.isNode="object"===(void 0===e?"undefined":o(e))&&"[object process]"===String(e)&&!e.browser,a=t.isBrowser=!i;t.default=a}).call(t,n(35))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canvas,n=e.width,r=void 0===n?800:n,i=e.height,s=void 0===i?600:i,l=e.webgl2,c=void 0!==l&&l,f=e.debug,d=void 0===f||f,p=void 0;if(S.isBrowser){if(!b.webGLTypesAvailable)throw new Error(I);if("string"==typeof(t=t)){if(!S.isPageLoaded)throw new Error("createGLContext called on canvas '"+t+"' before page was loaded");t=document.getElementById(t)}t||(t=a()),t.addEventListener("webglcontextcreationerror",function(e){S.log.log(0,e.statusMessage||"Unknown error")},!1),c?(p=p||t.getContext("webgl2",e),p=p||t.getContext("experimental-webgl2",e)):(p=p||t.getContext("webgl",e),p=p||t.getContext("experimental-webgl",e)),(0,T.default)(p,"Failed to create WebGLRenderingContext")}else p=u(r,s,e);if(S.isBrowser&&d){var g=m.default.makeDebugContext(p,v,y),_=function e(){o(this,e)};Object.assign(_.prototype,g),p=g,p.debug=!0,S.log.priority=S.log.priority<1?1:S.log.priority,h(p)}return p}function a(){var e=document.createElement("canvas");return e.id="lumagl-canvas",e.style.width="100%",e.style.height="100%",S.pageLoadPromise.then(function(t){var n=t.body;n.insertBefore(e,n.firstChild)}),e}function u(e,t,n){if(!b.webGLTypesAvailable)throw new Error(R);if(!x.globals.headlessGL)throw new Error(w);var r=x.globals.headlessGL(e,t,n);if(!r)throw new Error(F);return r}function s(e,t){var n="Illegal arg to getExtension";(0,T.default)(e instanceof b.WebGLRenderingContext,n),(0,T.default)("string"==typeof t,n);var r=e.getExtension(t);return(0,T.default)(r,t+" not supported!"),r}function l(e){(0,g.assertWebGLContext)(e),E.default.poll(e)}function c(e,t,n){var r=t.scissorTest,o=t.framebuffer,i=void 0;if(r){i=e.isEnabled(e.SCISSOR_TEST);var a=r.x,u=r.y,s=r.w,l=r.h;e.enable(e.SCISSOR_TEST),e.scissor(a,u,s,l)}o&&o.bind();var c=void 0;try{c=n(e)}finally{i||e.disable(e.SCISSOR_TEST),o&&e.bindFramebuffer(e.FRAMEBUFFER,null)}return c}function f(e){var t=e.getExtension("WEBGL_debug_renderer_info");return{vendor:t&&t.UNMASKED_VENDOR_WEBGL?e.getParameter(t.UNMASKED_VENDOR_WEBGL):"unknown",renderer:t&&t.UNMASKED_RENDERER_WEBGL?e.getParameter(t.UNMASKED_RENDERER_WEBGL):"unknown"}}function h(e){var t=(0,g.isWebGL2Context)(e)?"WebGL2":"WebGL1",n=f(e),r=n?"("+n.vendor+" "+n.renderer+")":"",o=e.debug?"debug":"";S.log.log(0,"luma.gl: Created "+t+" "+o+" context "+r,e)}function d(e,t){var n=m.default.glFunctionArgsToString(e,t);return n=n.slice(0,100)+(n.length>100?"...":""),"gl."+e+"("+n+")"}function v(e,t,n){var r=m.default.glEnumToString(e),o=m.default.glFunctionArgsToString(t,n);throw new Error(r+" was caused by call to: gl."+t+"("+o+")")}function y(e,t){var n=void 0;S.log.priority>=4&&(n=d(e,t),S.log.info(4,""+n));var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){if(void 0===a.value)throw n=n||d(e,t),new Error("Undefined argument: "+n)}}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}if(S.log.break){n=n||d(e,t);S.log.break&&S.log.break.every(function(e){return-1!==n.indexOf(e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.createGLContext=i,t.getGLExtension=s,t.poll=l,t.glContextWithState=c,t.glGetDebugInfo=f;var p=n(114),m=r(p),b=n(22),g=n(2),_=n(55),E=r(_),S=n(1),M=n(52),A=n(0),T=r(A),x=M.global.luma,I="WebGL API is missing. Check your if your browser supports WebGL or\ninstall a recent version of a major browser.",R="WebGL API is missing. To run luma.gl under Node.js, please \"npm install gl\"\nand import 'luma.gl/headless' before importing 'luma.gl'.",w="Cannot create headless WebGL context, headlessGL not available",F="headlessGL failed to create headless WebGL context"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){switch(e){case a.GL.ALPHA:return 1;case a.GL.RGB:return 3;case a.GL.RGBA:return 4;default:throw new Error("Unknown format")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),u=n(2),s=n(20),l=r(s),c=n(19),f=r(c),h=n(0),d=r(h),v=n(1),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,u.assertWebGLContext)(t);var r=n.id,i=t.createFramebuffer();if(!i)throw new Error("Failed to create WebGL Framebuffer");this.gl=t,this.id=(0,v.uid)(r),this.handle=i,this.colorBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.texture=null,this.userData={},this.width=0,this.height=0,Object.seal(this),this.resize(n)}return y(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t,{handle:n.handle||n})}}]),y(e,[{key:"delete",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.update({width:t,height:n})}},{key:"update",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,o=void 0===r?1:r,i=e.depth,u=void 0===i||i,s=e.minFilter,c=(void 0===s&&a.GL.NEAREST,e.magFilter),h=(void 0===c&&a.GL.NEAREST,e.format),y=void 0===h?a.GL.RGBA:h,p=e.type,m=void 0===p?a.GL.UNSIGNED_BYTE:p;if((0,d.default)(n>=0&&o>=0,"Width and height need to be integers"),n!==this.width||o!==this.height){v.log.log(2,"Resizing framebuffer "+this.id+" to "+n+"x"+o);var b=this.gl,g=new l.default(b,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:n,height:o,type:m,format:y});if(this.attachTexture({attachment:a.GL.COLOR_ATTACHMENT0,texture:g}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=g,this.texture=g,u){var _=new f.default(b).storage({internalFormat:a.GL.DEPTH_COMPONENT16,width:n,height:o});this.attachRenderbuffer({attachment:a.GL.DEPTH_ATTACHMENT,renderbuffer:_}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=_}this.checkStatus(),this.width=n,this.height=o}}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t;return this.gl.bindFramebuffer(n,null),this}},{key:"readPixels",value:function(e){var t=e.x,n=void 0===t?0:t,r=e.y,o=void 0===r?0:r,u=e.width,s=e.height,l=e.format,c=void 0===l?a.GL.RGBA:l,f=e.type,h=e.pixelArray,d=void 0===h?null:h,v=this.gl;if(!d){f=f||a.GL.UNSIGNED_BYTE;var y=(0,a.glTypeToArray)(f),p=i(c);d=d||new y(u*s*p)}return f=f||(0,a.glTypeFromArray)(d),this.bind(),v.readPixels(n,o,u,s,c,f,d),this.unbind(),d}},{key:"attachTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.texture,n=void 0===t?null:t,r=e.target,o=void 0===r?a.GL.FRAMEBUFFER:r,i=e.attachment,u=void 0===i?a.GL.COLOR_ATTACHMENT0:i,s=e.textureTarget,c=void 0===s?a.GL.TEXTURE_2D:s,f=e.mipmapLevel,h=void 0===f?0:f,d=this.gl;return n=n&&l.default.makeFrom(d,n),this.bind({target:o}),d.framebufferTexture2D(o,(0,a.glGet)(u),(0,a.glGet)(c),n.handle,h),this.unbind(),this}},{key:"attachRenderbuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderbuffer,n=void 0===t?null:t,r=e.attachment,o=void 0===r?a.GL.COLOR_ATTACHMENT0:r,i=e.target,u=void 0===i?a.GL.FRAMEBUFFER:i,s=e.renderbufferTarget,l=void 0===s?a.GL.RENDERBUFFER:s,c=this.gl;return n=n&&f.default.makeFrom(c,n),this.bind({target:u}),c.framebufferRenderbuffer(u,(0,a.glGet)(o),(0,a.glGet)(l),n.handle),this.unbind({target:u}),this}},{key:"checkStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t,r=this.gl;this.bind({target:n});var o=r.checkFramebufferStatus(n);if(this.unbind({target:n}),o!==r.FRAMEBUFFER_COMPLETE)throw new Error(this._getFrameBufferStatus(o));return this}},{key:"blit",value:function(e){var t=e.srcX0,n=e.srcY0,r=e.srcX1,o=e.srcY1,i=e.dstX0,s=e.dstY0,l=e.dstX1,c=e.dstY1,f=e.mask,h=e.filter,d=void 0===h?a.GL.NEAREST:h,v=this.gl;return(0,u.assertWebGL2Context)(v),v.blitFramebuffer(t,n,r,o,i,s,l,c,f,d),this}},{key:"textureLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t,r=e.attachment,o=e.texture,i=e.level,s=e.layer,l=this.gl;return(0,u.assertWebGL2Context)(l),l.framebufferTextureLayer(n,r,o,i,s),this}},{key:"invalidate",value:function(e){var t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t,r=e.attachments,o=void 0===r?[]:r,i=this.gl;return(0,u.assertWebGL2Context)(i),i.invalidateFramebuffer(n,o),this}},{key:"invalidateSub",value:function(e){var t=e.target,n=void 0===t?a.GL.FRAMEBUFFER:t,r=e.attachments,o=void 0===r?[]:r,i=e.x,s=void 0===i?0:i,l=e.y,c=void 0===l?0:l,f=e.width,h=e.height,d=this.gl;return(0,u.assertWebGL2Context)(d),d.invalidateFramebuffer(n,o,s,c,f,h),this}},{key:"readBuffer",value:function(e){var t=e.src,n=this.gl;return(0,u.assertWebGL2Context)(n),n.readBuffer(t),this}},{key:"alphaSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE)}},{key:"blueSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE)}},{key:"colorEncoding",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING)}},{key:"componentType",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE)}},{key:"depthSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE)}},{key:"greenSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE)}},{key:"objectName",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}},{key:"objectType",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)}},{key:"redSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE)}},{key:"stencilSize",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE)}},{key:"cubeMapFace",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE)}},{key:"layer",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER)}},{key:"level",value:function(){return this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}},{key:"getParameters",value:function(){return{redSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE),greenSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),blueSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),alphaSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),depthSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),stencilSize:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),colorEncoding:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),componentType:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),objectName:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),objectType:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),cubeMapFace:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),layer:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),level:this.getAttachmentParameter(a.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}}},{key:"getAttachmentParameter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pname,n=e.target,r=e.attachment,o=this.gl;return(0,u.assertWebGL2Context)(o),o.getFramebufferAttachmentParameter(n,r,t)}},{key:"_getFrameBufferStatus",value:function(e){var t=void 0;switch(e){case a.GL.FRAMEBUFFER_COMPLETE:t="Success. Framebuffer is correctly set up";break;case a.GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:t="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case a.GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:t="There is no attachment.";break;case a.GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:t="Height and width of the attachment are not the same.";break;case a.GL.FRAMEBUFFER_UNSUPPORTED:t="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.";break;case a.GL.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:t="The values of GL.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.";break;default:t="Framebuffer error "+e}return t}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":d(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":d(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.FragmentShader=t.VertexShader=t.Shader=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(3),s=n(2),l=n(101),c=n(1),f=n(0),h=function(e){return e&&e.__esModule?e:{default:e}}(f),d="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y="Shader: GLSL source code must be a JavaScript string",p=t.Shader=function(){function e(t,n,r){if(i(this,e),(0,s.assertWebGLContext)(t),(0,h.default)("string"==typeof n,y),this.id=(0,l.getShaderName)(n)||(0,c.uid)(this.getTypeName(r)),this.gl=t,this.shaderType=r,this.source=n,this.handle=t.createShader(r),null===this.handle)throw new Error("Error creating shader with type "+r);this.compile()}return v(e,[{key:"delete",value:function(){var e=this.gl;this.handle&&(e.deleteShader(this.handle),this.handle=null)}},{key:"toString",value:function(){return this.getTypeName(this.shaderType)+":"+this.id}},{key:"getName",value:function(){return(0,l.getShaderName)(this.source)}},{key:"getTypeName",value:function(e){switch(e){case u.GL.VERTEX_SHADER:return"vertex-shader";case u.GL.FRAGMENT_SHADER:return"fragment-shader";default:return"shader"}}},{key:"compile",value:function(){var e=this.gl;if(e.shaderSource(this.handle,this.source),e.compileShader(this.handle),e.debug){if(!e.getShaderParameter(this.handle,u.GL.COMPILE_STATUS)){var t=e.getShaderInfoLog(this.handle),n=(0,l.formatGLSLCompilerError)(t,this.source,this.shaderType);throw this.delete(),new Error("Error while compiling the shader "+n)}}}},{key:"copyToClipboard",value:function(e){if(c.isBrowser){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.focus(),t.select(),document.execCommand("copy")||console.log("Failed to copy to clipboard"),t.remove()}}}]),e}();t.VertexShader=function(e){function t(e,n){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,u.GL.VERTEX_SHADER))}return o(t,e),t}(p),t.FragmentShader=function(e){function t(e,n){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,u.GL.FRAGMENT_SHADER))}return o(t,e),t}(p)},function(e,t,n){"use strict";(function(e){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):d(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function s(e,t,n,r){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function l(e,t){if(u(t),e=o(e,t<0?0:0|v(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n);e=o(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|v(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=f(e,t),e}function d(e,t){if(i.isBuffer(t)){var n=0|v(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||q(t.length)?o(e,0):f(e,t);if("Buffer"===t.type&&J(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),i.alloc(+e)}function p(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(r)return X(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return F(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:_(e,t,n,r,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):_(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,n,r,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,s=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,n/=2}var l;if(o){var c=-1;for(l=n;l<u;l++)if(i(e,l)===i(t,-1===c?0:l-c)){if(-1===c&&(c=l),l-c+1===s)return c*a}else-1!==c&&(l-=l-c),c=-1}else for(n+s>u&&(n=u-s),l=n;l>=0;l--){for(var f=!0,h=0;h<s;h++)if(i(e,l+h)!==i(t,h)){f=!1;break}if(f)return l}return-1}function E(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function S(e,t,n,r){return H(X(t,e.length-n),e,n,r)}function M(e,t,n,r){return H(Y(t),e,n,r)}function A(e,t,n,r){return M(e,t,n,r)}function T(e,t,n,r){return H(Z(t),e,n,r)}function x(e,t,n,r){return H(z(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i=e[o],a=null,u=i>239?4:i>223?3:i>191?2:1;if(o+u<=n){var s,l,c,f;switch(u){case 1:i<128&&(a=i);break;case 2:s=e[o+1],128==(192&s)&&(f=(31&i)<<6|63&s)>127&&(a=f);break;case 3:s=e[o+1],l=e[o+2],128==(192&s)&&128==(192&l)&&(f=(15&i)<<12|(63&s)<<6|63&l)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:s=e[o+1],l=e[o+2],c=e[o+3],128==(192&s)&&128==(192&l)&&128==(192&c)&&(f=(15&i)<<18|(63&s)<<12|(63&l)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),o+=u}return w(r)}function w(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function F(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=W(e[i]);return o}function L(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function N(e,t,n,r,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function C(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function D(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function j(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,r,o){return o||j(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||j(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function B(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function X(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function z(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function Z(e){return K.toByteArray(B(e))}function H(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function q(e){return e!==e}var K=n(102),Q=n(103),J=n(104);t.Buffer=i,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return a(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return s(null,e,t,n)},i.allocUnsafe=function(e){return l(null,e)},i.allocUnsafeSlow=function(e){return l(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,a=Math.min(n,r);o<a;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!J(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):m.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,o>>>=0,this===e)return 0;for(var a=o-r,u=n-t,s=Math.min(a,u),l=this.slice(r,o),c=e.slice(t,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],u=c[f];break}return a<u?-1:u<a?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return M(this,e,t,n);case"latin1":case"binary":return A(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=i.prototype;else{var o=t-e;r=new i(o,void 0);for(var a=0;a<o;++a)r[a]=this[a+e]}return r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},i.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),Q.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),Q.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){N(this,e,t,n,Math.pow(2,8*n)-1,0)}var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):D(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=0,a=1,u=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===u&&0!==this[t+i-1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);N(this,e,t,n,o-1,-o)}var i=n-1,a=1,u=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===u&&0!==this[t+i+1]&&(u=1),this[t+i]=(e/a>>0)-u&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):C(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):C(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):D(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||N(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):D(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,a=r-n;if(this===e&&n<t&&t<r)for(o=a-1;o>=0;--o)e[o+t]=this[o+n];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=i.isBuffer(e)?e:X(new i(e,r).toString()),s=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%s]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(15))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){y&&d&&(y=!1,d.length?v=d.concat(v):p=-1,v.length&&u())}function u(){if(!y){var e=o(a);y=!0;for(var t=v.length;t;){for(d=v,v=[];++p<t;)d&&d[p].run();p=-1,t=v.length}d=null,y=!1,i(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,f,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,v=[],y=!1,p=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new s(e,t)),1!==v.length||y||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.cancelAnimationFrame=t.requestAnimationFrame=void 0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(1),a=n(2),u="function"==typeof Symbol&&"symbol"===o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=t.requestAnimationFrame=function(e){return i.isBrowser?window.requestAnimationFrame(e):setTimeout(e,1e3/60)},f=t.cancelAnimationFrame=function(e){return i.isBrowser?window.cancelAnimationFrame(e):clearTimeout(e)},h=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e);var o=n.gl,a=void 0===o?null:o,u=n.width,s=void 0===u?null:u,l=n.height,c=void 0===l?null:l,f=n.autoResizeViewport,h=void 0===f||f,d=n.autoResizeCanvas,v=void 0===d||d,y=n.autoResizeDrawingBuffer,p=void 0===y||y,m=n.useDevicePixelRatio,b=void 0===m||m;this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._frame=this._frame.bind(this),this.update({autoResizeViewport:h,autoResizeCanvas:v,autoResizeDrawingBuffer:p,useDevicePixelRatio:b}),this.width=s,this.height=c,this._startPromise=i.pageLoadPromise.then(function(e){return t.gl=a,e})}return l(e,[{key:"update",value:function(e){var t=e.autoResizeDrawingBuffer,n=void 0===t||t,r=e.autoResizeCanvas,o=void 0===r||r,i=e.autoResizeViewport,a=void 0===i||i,u=e.useDevicePixelRatio,s=void 0===u||u;return this.autoResizeViewport=a,this.autoResizeCanvas=o,this.autoResizeDrawingBuffer=n,this.useDevicePixelRatio=s,this}},{key:"context",value:function(e){var t=this;if(this.gl)throw new Error("AnimationFrame.context - context already provided");return this._startPromise=this._startPromise.then(function(){if(t.gl=e(),!(0,a.isWebGLContext)(t.gl))throw new Error("AnimationFrame.context - illegal context returned")}),this}},{key:"init",value:function(e){var t=this;return this._startPromise=this._startPromise.then(function(){if(!t.gl)throw new Error("AnimationFrame.context - no context provided");return t._initializeContext(),e(t._context)||{}}),this}},{key:"setupFrame",value:function(e){return this._onSetupFrame=e,this}},{key:"frame",value:function(e){return this._onRenderFrame=e,this}},{key:"start",value:function(){var e=this;return this._startPromise.then(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e._initializeContext(t),e._animationFrameId||(e._animationFrameId=c(e._frame))}),this}},{key:"stop",value:function(){return this._animationFrameId&&(f(this._animationFrameId),this._animationFrameId=null),this}},{key:"resizeCanvas",value:function(e,t){return this._resizeCanvas(e,t),this}},{key:"_initializeContext",value:function(e){this._context||(this._context={gl:this.gl,canvas:this.gl.canvas,stop:this.stop,tick:0,tock:0}),this._updateContext(),"object"===(void 0===e?"undefined":s(e))&&null!==e&&(this._context=Object.assign({},e,this._context))}},{key:"_updateContext",value:function(){var e=this._context.canvas;this._context.width=e.width,this._context.height=e.height,this._context.aspect=e.width/e.height}},{key:"_frame",value:function(){var e=this._context.canvas;this._onSetupFrame?this._onSetupFrame(this._context):(this._resizeCanvasDrawingBuffer(e),this.autoResizeViewport&&this.gl.viewport(0,0,e.width,e.height)),this._updateContext(),this._onRenderFrame(this._context),this._context.tick++,this._animationFrameId=c(this._frame)}},{key:"_resizeCanvas",value:function(e,t){var n=this._context.canvas;if(n){if(this.autoResizeDrawingBuffer){var r=this.useDevicePixelRatio?window.devicePixelRatio||1:1,o=Math.floor(e*r),i=Math.floor(t*r);n.width===o&&n.height===i||(n.width=o,n.height=i)}n.style.width=e+"px",n.style.height=t+"px"}return this}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var e=this._context.canvas,t=this.useDevicePixelRatio?window.devicePixelRatio||1:1,n=window.innerWidth,r=window.innerHeight,o=Math.floor(n*t),i=Math.floor(r*t);n===o&&r===i||(e.width=o,e.height=i,e.style.width=n,e.style.height=r)}}},{key:"_resizeDrawingBuffer",value:function(e,t){var n=this._context.canvas;return n&&(n.width=e,n.height=t,this.autoResizeDrawingBuffer=!1),this}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return!0!==e&&e}function i(e){var t=e.getBoundingClientRect();return{x:t.left,y:t.top,bbox:t}}function a(e,t){return t=t||window,e||t.event}function u(e){return e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}function s(e){var t=e.which||e.keyCode,n=h(t),r=t-111;return r>0&&r<13&&(n="f"+r),n=n||String.fromCharCode(t).toLowerCase(),{code:t,key:n,shift:e.shiftKey,control:e.ctrlKey,alt:e.altKey,meta:e.metaKey}}function l(e){return 3===e.which||2===e.button}function c(e,t){t=t||window,e=e||t.event;var n=t.document;if(n=n.documentElement||n.body,e.touches&&e.touches.length){for(var r=[],o=e.touches.length,i=void 0,a=0;a<o;++a)i=e.touches[a],r.push({x:i.pageX||i.clientX+n.scrollLeft,y:i.pageY||i.clientY+n.scrollTop});return r}return[{x:e.pageX||e.clientX+n.scrollLeft,y:e.pageY||e.clientY+n.scrollTop}]}function f(e){e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1}function h(e){var t=g;for(var n in t)if(t[n]===e)return n;return null}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=Object.assign({},b,t);var n=t.bind;if(n)for(var r in t)r.match(/^on[a-zA-Z0-9]+$/)&&function(e,r){t[e]=function(){r.apply(n,Array.prototype.slice.call(arguments))}}(r,t[r]);return new m(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Keys=t.EventsProxy=t.stop=void 0,t.get=a,t.getWheel=u,t.getKey=s,t.isRightClick=l,t.getPos=c,t.addEvents=d;var v=n(1);t.stop=f;var y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46},m=t.EventsProxy=function(){function e(t,n){r(this,e),this.scene=n.scene,this.domElem=t,this.pos=i(t),this.opt=this.callbacks=n,this.size={width:t.width||t.offsetWidth,height:t.height||t.offsetHeight},this.attachEvents()}return y(e,[{key:"attachEvents",value:function(){var e=this,t=this.domElem,n=this.opt;if(n.disableContextMenu&&(t.oncontextmenu=function(){return!1}),n.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)});var r="";r=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",t.addEventListener(r,function(t,n){e.mousewheel(e.eventInfo("mousewheel",t,n))},!1)}n.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(n){t.addEventListener(n,function(t,r){e[n](e.eventInfo(n,t,r))},!1)}),n.enableKeyboard&&["keydown","keyup"].forEach(function(t){document.addEventListener(t,function(n,r){e[t](e.eventInfo(t,n,r))},!1)})}},{key:"eventInfo",value:function(e,t,n){for(var r=this.domElem,o=this.scene,h=this.opt,d=this.getSize(),v=h.relative,y=h.centerOrigin,p=h.cachePosition&&this.pos||i(r),m=a(t,n),b=c(t,n),g={x:b[0].x,y:b[0].y},_={},E=void 0,S=void 0,M=0,A=b.length;M<A;++M)E=b[M].x,S=b[M].y,v&&(E-=p.x,S-=p.y,y&&(E-=d.width/2,S-=d.height/2,S*=-1)),b[M].x=E,b[M].y=S;switch(e){case"mousewheel":_.wheel=u(m);break;case"keydown":case"keyup":Object.assign(_,s(m));break;case"mouseup":_.isRightClick=l(m)}var T=void 0;return Object.assign(_,{x:b[0].x,y:b[0].y,posArray:b,cache:!1,stop:function(){f(m)},getTarget:function(){return T||(T=h.picking&&o.pick(g.x-p.x,g.y-p.y)||!0)}}),_.event=m,_}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var e=this.domElem;return{width:e.width||e.offsetWidth,height:e.height||e.offsetHeight}}},{key:"mouseup",value:function(e){this.moved||(e.isRightClick?this.callbacks.onRightClick(e,this.hovered):this.callbacks.onClick(e,o(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(e,o(this.pressed)):this.callbacks.onDragCancel(e,o(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(e){for(var t=e.relatedTarget,n=this.domElem;t&&t.parentNode;){if(n===t.parentNode)return;t=t.parentNode}this.hovered&&(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(e),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(e){}},{key:"mousemove",value:function(e){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(e,o(this.pressed));if(this.hovered){var t=o(e.getTarget());t&&t.hash===this.hash?this.callbacks.onMouseMove(e,this.hovered):(this.callbacks.onMouseLeave(e,this.hovered),this.hovered=t,this.hash=t,t&&(this.hash=t.hash,this.callbacks.onMouseEnter(e,this.hovered)))}else this.hovered=o(e.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(e,this.hovered));this.opt.picking||this.callbacks.onMouseMove(e)}},{key:"mousewheel",value:function(e){this.callbacks.onMouseWheel(e)}},{key:"mousedown",value:function(e){this.pressed=e.getTarget(),this.callbacks.onDragStart(e,o(this.pressed))}},{key:"touchstart",value:function(e){this.touched=e.getTarget(),this.touchedLastPosition={x:e.x,y:e.y},this.callbacks.onTouchStart(e,o(this.touched))}},{key:"touchmove",value:function(e){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(e,o(this.touched)))}},{key:"touchend",value:function(e){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(e,o(this.touched)):(e.x=isNaN(e.x)?this.touchedLastPosition.x:e.x,e.y=isNaN(e.y)?this.touchedLastPosition.y:e.y,this.callbacks.onTap(e,o(this.touched)),this.callbacks.onTouchCancel(e,o(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(e){this.callbacks.onKeyDown(e)}},{key:"keyup",value:function(e){this.callbacks.onKeyUp(e)}}]),e}();Object.assign(m.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var b={cachePosition:!0,cacheSize:!0,relative:!0,centerOrigin:!0,disableContextMenu:!0,bind:!1,picking:!1,enableTouch:!0,enableMouse:!0,enableKeyboard:!0,onClick:v.noop,onRightClick:v.noop,onDragStart:v.noop,onDragMove:v.noop,onDragEnd:v.noop,onDragCancel:v.noop,onTouchStart:v.noop,onTouchMove:v.noop,onTouchEnd:v.noop,onTouchCancel:v.noop,onTap:v.noop,onMouseMove:v.noop,onMouseEnter:v.noop,onMouseLeave:v.noop,onMouseWheel:v.noop,onKeyDown:v.noop,onKeyUp:v.noop},g=t.Keys=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(3),u=n(2),s=n(32),l=r(s),c=n(19),f=r(c),h=n(20),d=r(h),v=n(0),y=r(v),p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,i=void 0===r?1:r,s=n.height,l=void 0===s?1:s,c=n.depth,f=void 0===c||c,h=n.minFilter,d=void 0===h?a.GL.NEAREST:h,v=n.magFilter,y=void 0===v?a.GL.NEAREST:v,p=n.format,m=void 0===p?a.GL.RGBA:p,b=n.type,g=void 0===b?a.GL.UNSIGNED_BYTE:b;o(this,e),(0,u.assertWebGLContext)(t),this.gl=t,this.depth=f,this.minFilter=d,this.magFilter=y,this.format=m,this.type=g,this.resize(i,l)}return i(e,[{key:"delete",value:function(){}},{key:"resize",value:function(e,t){if((0,y.default)(e>=0&&t>=0,"Width and height need to be integers"),e!==this.width||t!==this.height){var n=this.gl,r=new l.default(n),o=new d.default(n,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:e,height:t,type:this.type,format:this.format});if(r.attachTexture({attachment:a.GL.COLOR_ATTACHMENT0,texture:o}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=o,this.depth){var i=new f.default(n).storage({internalFormat:a.GL.DEPTH_COMPONENT16,width:e,height:t});r.attachRenderbuffer({attachment:a.GL.DEPTH_ATTACHMENT,renderbuffer:i}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=i}r.checkStatus(),this.width=e,this.height=t,this.fb&&this.fb.delete(),this.fb=r}}},{key:"bind",value:function(){this.fb.bind()}},{key:"unbind",value:function(){this.fb.unbind()}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=t.group,r=t.uniforms,o=t.x,u=t.y,l=t.framebuffer,h=void 0===l?null:l,d=t.pickingFBO,v=void 0===d?null:d;t.pickingProgram,t.pickingColors;(0,a.assertWebGLContext)(e),(0,c.default)(n instanceof s.default,f);var y="undefined"!=typeof window?window.devicePixelRatio:1,p=o*y,m=e.canvas.height-u*y;return h=h||v||new i.Framebuffer(e,{width:e.canvas.width,height:e.canvas.height}),h.resize({width:e.canvas.width,height:e.canvas.height}),(0,i.glContextWithState)(e,{framebuffer:h,scissorTest:{x:p,y:m,w:1,h:1}},function(){var t=!0,a=!1,s=void 0;try{for(var l,c=n.traverseReverse()[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var f=l.value;if(f.isPickable()){e.clear(i.GL.COLOR_BUFFER_BIT|i.GL.DEPTH_BUFFER_BIT),f.setUniforms({renderPickingBuffer:1,enablePicking:!0}),f.render(r),f.setUniforms({renderPickingBuffer:!1,enablePicking:!1});var h=new Uint8Array(4);e.readPixels(p,m,1,1,e.RGBA,e.UNSIGNED_BYTE,h);if(0!==h[0]||0!==h[1]||0!==h[2]||0!==h[3])return{model:f,color:h,x:o,y:u,deviceX:p,deviceY:m}}}}catch(e){a=!0,s=e}finally{try{!t&&c.return&&c.return()}finally{if(a)throw s}}return null})}Object.defineProperty(t,"__esModule",{value:!0}),t.pickModels=o;var i=n(11),a=n(2),u=n(24),s=r(u),l=n(0),c=r(l),f="Illegal argument to pick"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(41);Object.defineProperty(t,"registerShaderModules",{enumerable:!0,get:function(){return o.registerShaderModules}});var i=n(82);Object.defineProperty(t,"assembleShaders",{enumerable:!0,get:function(){return i.assembleShaders}});var a=n(83);Object.defineProperty(t,"ShaderCache",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){var t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if((0,s.default)(a.name,"shader module has no name"),l[a.name])throw new Error("shader module "+a.name+" already registered");l[a.name]=a,a.dependencies=a.dependencies||[]}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}function o(e){var t=l[e];return t||(0,s.default)(!1,"Unknown shader module "+e),t}function i(e){var t={};return a({moduleNames:e,level:0,result:t}),Object.keys(t).sort(function(e,n){return t[e]-t[n]})}function a(e){var t=e.moduleNames,n=e.level,r=e.result;if(n>=5)throw new Error("Possible loop in shader dependency graph");var i=!0,u=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){r[l.value]=n}}catch(e){u=!0,s=e}finally{try{!i&&c.return&&c.return()}finally{if(u)throw s}}var f=!0,h=!1,d=void 0;try{for(var v,y=t[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){a({moduleNames:o(v.value).dependencies,level:n,result:r})}}catch(e){h=!0,d=e}finally{try{!f&&y.return&&y.return()}finally{if(h)throw d}}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.registerShaderModules=r,t.getShaderModule=o,t.getShaderDependencies=i;var u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l={}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,i=void 0===n?1:n,a=e.cap,u=void 0===a||a;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{topRadius:0,topCap:Boolean(u),bottomCap:Boolean(u),bottomRadius:i})))}return i(t,e),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return{indices:new Uint16Array(d),positions:new Float32Array(v),normals:new Float32Array(y),texCoords:new Float32Array(p)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(8),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(1),f="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,i=void 0===n?(0,c.uid)("cube-geometry"):n;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:i,attributes:a()})))}return i(t,e),t}(l.default);t.default=h;var d=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),v=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),y=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),p=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1])},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.radius,i=void 0===n?1:n;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{bottomRadius:i,topRadius:i})))}return i(t,e),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(50),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],h=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n={},i=n.iterations,a=void 0===i?0:i,u=Math.PI,s=2*u,c=[].concat(f),d=[].concat(h);c.push(),d.push();for(var v=(function(){var e={};return function(t,n){t*=3,n*=3;var r=t<n?t:n,o=t>n?t:n,i=r+"|"+o;if(i in e)return e[i];var a=c[t],u=c[t+1],s=c[t+2],l=c[n],f=c[n+1],h=c[n+2],d=(a+l)/2,v=(u+f)/2,y=(s+h)/2,p=Math.sqrt(d*d+v*v+y*y);return d/=p,v/=p,y/=p,c.push(d,v,y),e[i]=c.length/3-1}}()),y=0;y<a;y++){for(var p=[],m=0;m<d.length;m+=3){var b=v(d[m+0],d[m+1]),g=v(d[m+1],d[m+2]),_=v(d[m+2],d[m+0]);p.push(_,d[m+0],b,b,d[m+1],g,g,d[m+2],_,b,g,_)}d=p}for(var E=new Array(3*d.length),S=new Array(2*d.length),M=d.length,A=M-3;A>=0;A-=3){var T=d[A+0],x=d[A+1],I=d[A+2],R=3*T,w=3*x,F=3*I,O=2*T,P=2*x,L=2*I,k=c[R+0],N=c[R+1],C=c[R+2],D=Math.acos(C/Math.sqrt(k*k+N*N+C*C)),j=Math.atan2(N,k)+u,G=D/u,U=1-j/s,B=c[w+0],V=c[w+1],W=c[w+2],X=Math.acos(W/Math.sqrt(B*B+V*V+W*W)),Y=Math.atan2(V,B)+u,z=X/u,Z=1-Y/s,H=c[F+0],q=c[F+1],K=c[F+2],Q=Math.acos(K/Math.sqrt(H*H+q*q+K*K)),J=Math.atan2(q,H)+u,$=Q/u,ee=1-J/s,te=[H-B,q-V,K-W],ne=[k-B,N-V,C-W],re=l.Vector3.cross(te,ne).normalize(),oe=void 0;(0===U||0===Z||0===ee)&&(0===U||U>.5)&&(0===Z||Z>.5)&&(0===ee||ee>.5)&&(c.push(c[R+0],c[R+1],c[R+2]),oe=c.length/3-1,d.push(oe),S[2*oe+0]=1,S[2*oe+1]=G,E[3*oe+0]=re.x,E[3*oe+1]=re.y,E[3*oe+2]=re.z,c.push(c[w+0],c[w+1],c[w+2]),oe=c.length/3-1,d.push(oe),S[2*oe+0]=1,S[2*oe+1]=z,E[3*oe+0]=re.x,E[3*oe+1]=re.y,E[3*oe+2]=re.z,c.push(c[F+0],c[F+1],c[F+2]),oe=c.length/3-1,d.push(oe),S[2*oe+0]=1,S[2*oe+1]=$,E[3*oe+0]=re.x,E[3*oe+1]=re.y,E[3*oe+2]=re.z),E[R+0]=E[w+0]=E[F+0]=re.x,E[R+1]=E[w+1]=E[F+1]=re.y,E[R+2]=E[w+2]=E[F+2]=re.z,S[O+0]=U,S[O+1]=G,S[P+0]=Z,S[P+1]=z,S[L+0]=ee,S[L+1]=$}return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:{positions:new Float32Array(c),normals:new Float32Array(E),texCoords:new Float32Array(S),indices:new Uint16Array(d)}})))}return i(t,e),t}(s.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(8),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=n(1),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.type,i=void 0===n?"x,y":n,a=e.offset,u=void 0===a?0:a,s=e.flipCull,c=void 0!==s&&s,f=e.unpack,h=void 0!==f&&f,d=e.id,v=void 0===d?(0,l.uid)("plane-geometry"):d,y=i.split(","),p=e[y[0]+"len"],m=e[y[1]+"len"],b=e["n"+y[0]]||1,g=e["n"+y[1]]||1,_=(b+1)*(g+1),E=new Float32Array(3*_),S=new Float32Array(3*_),M=new Float32Array(2*_);c&&(p=-p);for(var A=0,T=0,x=0;x<=g;x++)for(var I=0;I<=b;I++){var R=I/b,w=x/g;switch(M[A+0]=c?1-R:R,M[A+1]=w,i){case"x,y":E[T+0]=p*R-.5*p,E[T+1]=m*w-.5*m,E[T+2]=u,S[T+0]=0,S[T+1]=0,S[T+2]=c?1:-1;break;case"x,z":E[T+0]=p*R-.5*p,E[T+1]=u,E[T+2]=m*w-.5*m,S[T+0]=0,S[T+1]=c?1:-1,S[T+2]=0;break;case"y,z":E[T+0]=u,E[T+1]=p*R-.5*p,E[T+2]=m*w-.5*m,S[T+0]=c?1:-1,S[T+1]=0,S[T+2]=0}A+=2,T+=3}for(var F=b+1,O=new Uint16Array(b*g*6),P=0;P<g;P++)for(var L=0;L<b;L++){var k=6*(P*b+L);O[k+0]=(P+0)*F+L,O[k+1]=(P+1)*F+L,O[k+2]=(P+0)*F+L+1,O[k+3]=(P+1)*F+L,O[k+4]=(P+1)*F+L+1,O[k+5]=(P+0)*F+L+1}if(h){for(var N=new Float32Array(3*O.length),C=new Float32Array(3*O.length),D=new Float32Array(2*O.length),j=0;j<O.length;++j){var G=O[j];N[3*j+0]=E[3*G+0],N[3*j+1]=E[3*G+1],N[3*j+2]=E[3*G+2],C[3*j+0]=S[3*G+0],C[3*j+1]=S[3*G+1],C[3*j+2]=S[3*G+2],D[2*j+0]=M[2*G+0],D[2*j+1]=M[2*G+1]}E=N,S=C,M=D,O=void 0}var U={positions:E,normals:S,texCoords:M};return O&&(U.indices=O),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{attributes:U,id:v})))}return i(t,e),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,n){var r=Math.PI,o=r-0,i=2*Math.PI,a=i-0,u=(e+1)*(t+1);if("number"==typeof n){var s=n;n=function(e,t,n,r,o){return s}}for(var l=new Float32Array(3*u),c=new Float32Array(3*u),f=new Float32Array(2*u),h=new Uint16Array(e*t*6),d=0;d<=e;d++)for(var v=0;v<=t;v++){var y=v/t,p=d/e,m=v+d*(t+1),b=2*m,g=3*m,_=a*y,E=o*p,S=Math.sin(_),M=Math.cos(_),A=Math.sin(E),T=Math.cos(E),x=M*A,I=T,R=S*A,w=n(x,I,R,y,p);l[g+0]=w*x,l[g+1]=w*I,l[g+2]=w*R,c[g+0]=x,c[g+1]=I,c[g+2]=R,f[b+0]=y,f[b+1]=p}for(var F=e+1,O=0;O<e;O++)for(var P=0;P<t;P++){var L=6*(O*t+P);h[L+0]=P*F+O,h[L+1]=P*F+O+1,h[L+2]=(P+1)*F+O,h[L+3]=(P+1)*F+O,h[L+4]=P*F+O+1,h[L+5]=(P+1)*F+O+1}return{positions:l,indices:h,normals:c,texCoords:f}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=n(8),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(1),f="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.nlat,i=void 0===n?10:n,u=e.nlong,s=void 0===u?10:u,l=e.radius,f=void 0===l?1:l,h=e.id,d=void 0===h?(0,c.uid)("sphere-geometry"):h;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:d,attributes:a(i,s,f)})))}return i(t,e),t}(l.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.global=void 0;var r=n(30),o=n(52),i=n(53),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=n(115);if(o.global.luma&&o.global.luma.VERSION!==u.version)throw new Error("luma.gl - multiple versions detected: "+o.global.luma.VERSION+" vs "+u.version);o.global.luma||(r.isBrowser&&console.log("luma.gl "+u.version+" - Assign luma.log.priority in console to control logging: 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\nluma.log.break[], set to gl funcs, luma.log.profile[] set to model names"),o.global.luma=o.global.luma||{VERSION:u.version,version:u.version,log:a.default,globals:{headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}}}),t.global=o.global,t.default=o.global.luma},function(e,t,n){"use strict";function r(e){return(0,i.requestFile)(e)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{crossOrigin:"anonymous"};return new Promise(function(n,r){try{var o=new Image;o.onload=function(){return n(o)},o.onerror=function(){return r(new Error("Could not load image "+e+"."))},o.crossOrigin=t.crossOrigin,o.src=e}catch(e){r(e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadFile=r,t.loadImage=o;var i=n(86)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(28);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return r(i).default}});var a=n(18);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return r(a).default}});var u=n(29);Object.defineProperty(t,"Vector4",{enumerable:!0,get:function(){return r(u).default}});var s=n(26);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return r(s).default}});var l=n(27);Object.defineProperty(t,"Quaternion",{enumerable:!0,get:function(){return r(l).default}});var c=n(51);Object.defineProperty(t,"Euler",{enumerable:!0,get:function(){return r(c).default}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return e>=0&&e<6}function u(e){if(e<0&&e>=6)throw new Error(m);return e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(10),h=function(e){return e&&e.__esModule?e:{default:e}}(f),d=n(5),v=n(26),y=n(27),p=n(18),m="Unknown Euler angle order",b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;r(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?u.fromVector3.apply(u,arguments):u.set(e,n,i,a),u}return i(t,e),c(t,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(e){return t.RotationOrders[e]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return t.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),c(t,[{key:"copy",value:function(e){for(var t=0;t<3;++t)this[t]=e[t];return this[3]=Number.isFinite(e[3])||this.order,this.check(),this}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];return this[0]=e,this[1]=t,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check(),this}},{key:"validate",value:function(){return a(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}},{key:"toArray4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}},{key:"toVector3",value:function(e){return e?e.set(this[0],this[1],this[2]):new p.Vector3(this[0],this[1],this[2])}},{key:"fromVector3",value:function(e,t){return this.set(e[0],e[1],e[2],Number.isFinite(t)?t:this[3])}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=e[0+t],this[1]=e[1+t],this[2]=e[2+t],void 0!==e[3]&&(this[3]=e[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(e,n,r){return this.set(e,n,r,t.ZYX)}},{key:"fromQuaternion",value:function(e,t){return this._fromRotationMatrix(v.Matrix4.fromQuaternion(e),t),this.check(),this}},{key:"fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder;return this._fromRotationMatrix(e,n),this.check(),this}},{key:"getRotationMatrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new v.Matrix4;return this._getRotationMatrix(e),e}},{key:"getQuaternion",value:function(){var e=new y.Quaternion;switch(this[4]){case t.XYZ:return e.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case t.YXZ:return e.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case t.ZXY:return e.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case t.ZYX:return e.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case t.YZX:return e.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case t.XZY:return e.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error(m)}}},{key:"_fromRotationMatrix",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.DefaultOrder,r=e.elements,o=r[0],i=r[4],a=r[8],u=r[1],s=r[5],l=r[9],c=r[2],f=r[6],h=r[10];switch(n=n||this[3]){case t.XYZ:this[1]=Math.asin((0,d.clamp)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-l,h),this[2]=Math.atan2(-i,o)):(this[0]=Math.atan2(f,s),this[2]=0);break;case t.YXZ:this[0]=Math.asin(-(0,d.clamp)(l,-1,1)),Math.abs(l)<.99999?(this[1]=Math.atan2(a,h),this[2]=Math.atan2(u,s)):(this[1]=Math.atan2(-c,o),this[2]=0);break;case t.ZXY:this[0]=Math.asin((0,d.clamp)(f,-1,1)),Math.abs(f)<.99999?(this[1]=Math.atan2(-c,h),this[2]=Math.atan2(-i,s)):(this[1]=0,this[2]=Math.atan2(u,o));break;case t.ZYX:this[1]=Math.asin(-(0,d.clamp)(c,-1,1)),Math.abs(c)<.99999?(this[0]=Math.atan2(f,h),this[2]=Math.atan2(u,o)):(this[0]=0,this[2]=Math.atan2(-i,s));break;case t.YZX:this[2]=Math.asin((0,d.clamp)(u,-1,1)),Math.abs(u)<.99999?(this[0]=Math.atan2(-l,s),this[1]=Math.atan2(-c,o)):(this[0]=0,this[1]=Math.atan2(a,h));break;case t.XZY:this[2]=Math.asin(-(0,d.clamp)(i,-1,1)),Math.abs(i)<.99999?(this[0]=Math.atan2(f,s),this[1]=Math.atan2(a,o)):(this[0]=Math.atan2(-l,h),this[1]=0);break;default:throw new Error(m)}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var e=new v.Matrix4,n=this.x,r=this.y,o=this.z,i=Math.cos(n),a=Math.cos(r),u=Math.cos(o),s=Math.sin(n),l=Math.sin(r),c=Math.sin(o);switch(this[3]){case t.XYZ:var f=i*u,h=i*c,d=s*u,y=s*c;e[0]=a*u,e[4]=-a*c,e[8]=l,e[1]=h+d*l,e[5]=f-y*l,e[9]=-s*a,e[2]=y-f*l,e[6]=d+h*l,e[10]=i*a;break;case t.YXZ:var p=a*u,b=a*c,g=l*u,_=l*c;e[0]=p+_*s,e[4]=g*s-b,e[8]=i*l,e[1]=i*c,e[5]=i*u,e[9]=-s,e[2]=b*s-g,e[6]=_+p*s,e[10]=i*a;break;case t.ZXY:var E=a*u,S=a*c,M=l*u,A=l*c;e[0]=E-A*s,e[4]=-i*c,e[8]=M+S*s,e[1]=S+M*s,e[5]=i*u,e[9]=A-E*s,e[2]=-i*l,e[6]=s,e[10]=i*a;break;case t.ZYX:var T=i*u,x=i*c,I=s*u,R=s*c;e[0]=a*u,e[4]=I*l-x,e[8]=T*l+R,e[1]=a*c,e[5]=R*l+T,e[9]=x*l-I,e[2]=-l,e[6]=s*a,e[10]=i*a;break;case t.YZX:var w=i*a,F=i*l,O=s*a,P=s*l;e[0]=a*u,e[4]=P-w*c,e[8]=O*c+F,e[1]=c,e[5]=i*u,e[9]=-s*u,e[2]=-l*u,e[6]=F*c+O,e[10]=w-P*c;break;case t.XZY:var L=i*a,k=i*l,N=s*a,C=s*l;e[0]=a*u,e[4]=-c,e[8]=l*u,e[1]=L*c+C,e[5]=i*u,e[9]=k*c-N,e[2]=N*c-k,e[6]=s*u,e[10]=C*c+L;break;default:throw new Error(m)}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(e){return this[0]=(0,d.checkNumber)(e)}},{key:"y",get:function(){return this[1]},set:function(e){return this[1]=(0,d.checkNumber)(e)}},{key:"z",get:function(){return this[2]},set:function(e){return this[2]=(0,d.checkNumber)(e)}},{key:"alpha",get:function(){return this[0]},set:function(e){return this[0]=(0,d.checkNumber)(e)}},{key:"beta",get:function(){return this[1]},set:function(e){return this[1]=(0,d.checkNumber)(e)}},{key:"gamma",get:function(){return this[2]},set:function(e){return this[2]=(0,d.checkNumber)(e)}},{key:"phi",get:function(){return this[0]},set:function(e){return this[0]=(0,d.checkNumber)(e)}},{key:"theta",get:function(){return this[1]},set:function(e){return this[1]=(0,d.checkNumber)(e)}},{key:"psi",get:function(){return this[2]},set:function(e){return this[2]=(0,d.checkNumber)(e)}},{key:"order",get:function(){return this[3]},set:function(e){return this[3]=u(e)}}]),t}(h.default);t.default=b},function(e,t,n){"use strict";(function(t){e.exports={window:"undefined"!=typeof window?window:t,global:void 0!==t?t:window,document:"undefined"!=typeof document?document:{}}}).call(t,n(15))},function(e,t,n){"use strict";function r(e,t){for(var n=t.maxElts,r=void 0===n?16:n,i=t.size,a=void 0===i?1:i,u="[",s=0;s<e.length&&s<r;++s)s>0&&(u+=","+(s%a==0?" ":"")),u+=o(e[s],t);return u+(e.length>r?"...":"]")}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isInteger,o=void 0!==n&&n;if(Array.isArray(e)||ArrayBuffer.isView(e))return r(e,t);if(!Number.isFinite(e))return String(e);if(o)return e.toFixed(0);if(Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);var i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}Object.defineProperty(t,"__esModule",{value:!0}),t.formatValue=o;var i={},a={priority:0,table:function(e,t){e<=a.priority&&t&&console.table(t)},log:function(e){if(e<=a.priority){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).debug.apply(t,r)}},info:function(e){if(e<=a.priority){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,r)}},warn:function(e){if(e<=a.priority){for(var t,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).warn.apply(t,r)}},once:function(e,t){if(!i[t]){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];a.log.apply(a,[e,t].concat(r))}i[t]=!0}};t.default=a},function(e,t,n){"use strict";function r(e,t){var n=t.drawMode,r=void 0===n?o.GL.TRIANGLES:n,a=t.vertexCount,u=t.offset,s=void 0===u?0:u,l=t.isIndexed,c=void 0!==l&&l,f=t.indexType,h=void 0===f?o.GL.UNSIGNED_SHORT:f,d=t.isInstanced,v=void 0!==d&&d,y=t.instanceCount,p=void 0===y?0:y;if((0,i.assertWebGLContext)(e),r=(0,o.glGet)(r),h=(0,o.glGet)(h),(0,i.assertDrawMode)(r,"in draw"),c&&(0,i.assertIndexType)(h,"in draw"),v){var m=(0,i.isWebGL2Context)(e),b=e.getExtension("ANGLE_instanced_arrays"),g=m?e:b,_=m?"":"ANGLE",E="drawElementsInstanced"+_,S="drawArraysInstanced"+_;c?g[E](r,a,h,s,p):g[S](r,s,a,p)}else c?e.drawElements(r,a,h,s):e.drawArrays(r,s,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.draw=r;var o=(n(31),n(3)),i=n(2),a=n(0);!function(e){e&&e.__esModule}(a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e},a=function(){function e(){r(this,e),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return o(e,[{key:"poll",value:function(e){this.cancelInvalidQueries(e);var t=!0,n=!1,r=void 0;try{for(var o,i=this.pendingQueries.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;if(a.isResultAvailable()){var u=a.getResult();this.resolveQuery(a,u)}}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(e){var t=e.queryType,n=e.errorMessage,r=e.checkInvalid;this.invalidQueryType=t,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;this.cancelInvalidQueries(e.gl),this.cancelQuery(e);var r={};return e.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),Object.assign(e.promise,r),this.pendingQueries.add(e),e.promise.then(t).catch(n)}},{key:"resolveQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise.resolve(t)}},{key:"rejectQuery",value:function(e,t){this.pendingQueries.delete(e),e.promise&&e.promise.reject(new Error(t))}},{key:"deleteQuery",value:function(e){return this.rejectQuery(e,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(e){return this.rejectQuery(e,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(e){e instanceof this.invalidQueryType&&this.rejectQuery(e,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(e){if(this.checkInvalid(e)){var t=!0,n=!1,r=void 0;try{for(var o,i=this.pendingQueries.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this.invalidateQuery(a)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}}}]),e}();t.default=new a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n={},r=t.getUniformCount(),o=0;o<r;o++){var i=t.getUniformInfo(o),a=t.getUniformLocation(i.name),u=(0,v.getUniformSetter)(e,a,i);n[u.name]=u}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.getUniformDescriptors=i;var a=n(3),u=n(2),s=n(61),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),c=n(13),f=r(c),h=n(21),d=r(h),v=n(59),y=n(33),p=n(1),m=n(0),b=r(m),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=n.vs,a=n.fs,s=n.defaultUniforms,l=n.handle;o(this,e),(0,u.assertWebGLContext)(t),this.vs="string"==typeof i?new y.VertexShader(t,i):i,this.fs="string"==typeof i?new y.FragmentShader(t,a):a,(0,b.default)(this.vs instanceof y.VertexShader,"Program: bad vertex shader"),(0,b.default)(this.fs instanceof y.FragmentShader,"Program: bad fragment shader");var c=this.vs.getName()||this.fs.getName();if(c=c?c+"-program":"program",this.id=r||(0,p.uid)(c),this.gl=t,this.defaultUniforms=s,this.handle=l,this.handle||(this.handle=t.createProgram(),this._compileAndLink()),!this.handle)throw new Error("Failed to create program");this._attributeLocations=this._getAttributeLocations(),this._attributeCount=this.getAttributeCount(),this._warn=[],this._filledLocations={},this._uniformSetters=this._getUniformSetters(),this._uniformCount=this.getUniformCount(),this._textureIndexCounter=0,this.userData={},Object.seal(this)}return g(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t).setData({handle:n.handle||n})}}]),g(e,[{key:"delete",value:function(){var e=this.gl;return this.handle&&e.deleteProgram(this.handle),this.handle=null,this}},{key:"use",value:function(){return this.gl.useProgram(this.handle),this}},{key:"clearBuffers",value:function(){return this._filledLocations={},this}},{key:"_print",value:function(e){return"Program "+this.id+": Attribute "+e}},{key:"setBuffers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clear,r=void 0===n||n,o=t.check,i=void 0===o||o,a=t.drawParams,u=void 0===a?{}:a,s=this.gl;if(Array.isArray(e))throw new Error("Program.setBuffers expects map of buffers");r&&this.clearBuffers(),u.isInstanced=!1,u.isIndexed=!1,u.indexType=null;for(var c=this._sortBuffersByLocation(e),f=c.locations,h=c.elements,d=0;d<f.length;++d){var v=f[d],y=e[v];if(y){var p=y.layout.instanced?1:0;l.enable(s,d),l.setBuffer({gl:s,location:d,buffer:y}),l.setDivisor(s,d,p),u.isInstanced=y.layout.instanced>0,this._filledLocations[v]=!0}else l.disable(s,d)}if(h){var m=e[h];m.bind(),u.isIndexed=!0,u.indexType=m.layout.type}return i&&this.checkBuffers(),this}},{key:"checkBuffers",value:function(){for(var e in this._attributeLocations)if(!this._filledLocations[e]&&!this._warn[e]){var t=this._attributeLocations[e];p.log.warn(0,"Program "+this.id+": Attribute "+t+":"+e+" not supplied"),this._warn[e]=!0}return this}},{key:"unsetBuffers",value:function(){for(var e=this.gl,t=this._attributeCount,n=1;n<t;++n)l.disable(e,n);return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(e){for(var t in e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof d.default){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var o=n,i=r.textureIndex;o.bind(i),r(i)}else r(n)}return this}},{key:"getAttachedShadersCount",value:function(){return this.getProgramParameter(a.GL.ATTACHED_SHADERS)}},{key:"getAttributeCount",value:function(){return this.getProgramParameter(a.GL.ACTIVE_ATTRIBUTES)}},{key:"getAttributeInfo",value:function(e){return this.gl.getActiveAttrib(this.handle,e)}},{key:"getAttributeName",value:function(e){return this.getAttributeInfo(e).name}},{key:"getAttributeLocation",value:function(e){return this.gl.getAttribLocation(this.handle,e)}},{key:"getUniformCount",value:function(){return this.getProgramParameter(a.GL.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(e){return this.gl.getActiveUniform(this.handle,e)}},{key:"getUniformLocation",value:function(e){return this.gl.getUniformLocation(this.handle,e)}},{key:"getUniformValue",value:function(e){return this.gl.getUniform(this.handle,e)}},{key:"isFlaggedForDeletion",value:function(){return this.getProgramParameter(a.GL.DELETE_STATUS)}},{key:"getLastLinkStatus",value:function(){return this.getProgramParameter(a.GL.LINK_STATUS)}},{key:"getLastValidationStatus",value:function(){return this.getProgramParameter(a.GL.VALIDATE_STATUS)}},{key:"getTransformFeedbackBufferMode",value:function(){return(0,u.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_BUFFER_MODE)}},{key:"getTransformFeedbackVaryingsCount",value:function(){return(0,u.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_VARYINGS)}},{key:"getActiveUniformBlocksCount",value:function(){return(0,u.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.ACTIVE_UNIFORM_BLOCKS)}},{key:"getFragDataLocation",value:function(e){return(0,u.assertWebGL2Context)(this.gl),this.gl.getFragDataLocation(this.handle,e)}},{key:"getProgramParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),e.linkProgram(this.handle),e.debug){e.validateProgram(this.handle);if(!e.getProgramParameter(this.handle,e.LINK_STATUS))throw new Error("Error linking "+e.getProgramInfoLog(this.handle))}}},{key:"_sortBuffersByLocation",value:function(e){var t=null,n=new Array(this._attributeCount);for(var r in e){var o=f.default.makeFrom(this.gl,e[r]),i=this._attributeLocations[r];if(void 0===i){if(o.target===a.GL.ELEMENT_ARRAY_BUFFER&&t)throw new Error(this._print(r)+" duplicate gl.ELEMENT_ARRAY_BUFFER");o.target===a.GL.ELEMENT_ARRAY_BUFFER?t=r:this._warn[r]||(p.log.warn(2,this._print(r)+" not used"),this._warn[r]=!0)}else{if(o.target===a.GL.ELEMENT_ARRAY_BUFFER)throw new Error(this._print(r)+":"+i+" has both location and type gl.ELEMENT_ARRAY_BUFFER");n[i]=r}}return{locations:n,elements:t}}},{key:"_areAllAttributesEnabled",value:function(){for(var e=this.gl,t=this._attributeCount,n=0;n<t;++n)if(!l.isEnabled(e,n))return!1;return!0}},{key:"_getAttributeLocations",value:function(){for(var e={},t=this.getAttributeCount(),n=0;n<t;n++){var r=this.getAttributeName(n);e[r]=this.getAttributeLocation(r)}return e}},{key:"_getUniformSetters",value:function(){for(var e=this.gl,t={},n=this.getUniformCount(),r=0;r<n;r++){var o=this.getUniformInfo(r),i=(0,v.parseUniformName)(o.name),a=this.getUniformLocation(i.name);t[i.name]=(0,v.getUniformSetter)(e,a,o,i.isArray)}return t}}]),e}();t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(3),s=n(2),l=n(21),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,t),(0,s.assertWebGLContext)(e);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Object.assign({},n,{target:u.GL.TEXTURE_CUBE_MAP})));return i.setCubeMapImageData(n),i}return i(t,e),h(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e,{handle:n.handle||n})}}]),h(t,[{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=this.gl;if(void 0!==t&&n.activeTexture(u.GL.TEXTURE0+t),n.bindTexture(u.GL.TEXTURE_CUBE_MAP,this.handle),void 0===t){return n.getParameter(n.ACTIVE_TEXTURE)-u.GL.TEXTURE0}return t}},{key:"unbind",value:function(){this.gl.bindTexture(u.GL.TEXTURE_CUBE_MAP,null)}},{key:"setCubeMapImageData",value:function(e){var t=e.width,n=e.height,r=e.pixels,o=e.data,i=e.border,a=void 0===i?0:i,s=e.format,l=void 0===s?u.GL.RGBA:s,c=e.type,f=void 0===c?u.GL.UNSIGNED_BYTE:c,h=e.generateMipmap,d=void 0!==h&&h,v=this.gl;return r=r||o,this.bind(),this.width||this.height?(v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,l,t,n,a,l,f,r.pos.x),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,l,t,n,a,l,f,r.pos.y),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,l,t,n,a,l,f,r.pos.z),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,l,t,n,a,l,f,r.neg.x),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,l,t,n,a,l,f,r.neg.y),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,l,t,n,a,l,f,r.neg.z)):(v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,l,l,f,r.pos.x),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,l,l,f,r.pos.y),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,l,l,f,r.pos.z),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,l,l,f,r.neg.x),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,l,l,f,r.neg.y),v.texImage2D(u.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,l,l,f,r.neg.z)),this.unbind(),d&&this.generateMipmap(),this}}]),t}(c.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(2),i=n(55),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e){return e},l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.onComplete,a=void 0===i?s:i,u=n.onError,l=void 0===u?s:u;r(this,e),(0,o.assertWebGLContext)(t),this.gl=t,this.ext=this.gl.getExtension("EXT_disjoint_timer_query"),this.handle=this.ext?this.ext.createQueryEXT():null,this.target=null,this.userData={},this.onComplete=a,this.onError=l,this.promise=null,Object.seal(this)}return u(e,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.requireTimestamps,r=void 0!==n&&n;(0,o.assertWebGLContext)(e);var i=e.getExtension("EXT_disjoint_timer_query"),a=i?i.getQueryEXT(36392,34916):0,u=a>0;return Boolean(i)&&(!r||u)}}]),u(e,[{key:"delete",value:function(){return this.handle&&(a.default.deleteQuery(this),this.ext.deleteQueryEXT(this.handle),(0,o.glCheckError)(this.gl),this.handle=null),this}},{key:"begin",value:function(){return a.default.beginQuery(this,this.onComplete,this.onError),this.ext?(this.target=35007,this.ext.beginQueryEXT(this.target,this.handle)):a.default.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension'),this}},{key:"end",value:function(){return this.target&&(this.ext.endQueryEXT(this.target),this.target=null),this}},{key:"timestamp",value:function(){return a.default.beginQuery(this,this.onComplete,this.onError),this.ext?this.ext.queryCounterEXT(this.handle,36392):a.default.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension'),this}},{key:"cancel",value:function(){return this.end(),a.default.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.ext&&this.ext.getQueryObjectEXT(this.handle,34919)}},{key:"getResult",value:function(){return this.ext?this.ext.getQueryObjectEXT(this.handle,34918)/1e6:0}}]),e}();t.default=l,a.default.setInvalidator({queryType:l,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(e){return e.getParameter(36795)}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.match(/([^\[]*)(\[[0-9]+\])?/);if(!t||t.length<2)throw new Error("Failed to parse GLSL uniform name "+e);return{name:t[1],length:t[2]||1,isArray:Boolean(t[2])}}function a(e,t,n){var r=m[n.type];if(!r)throw new Error("Unknown GLSL uniform type "+n.type);var o=e[r.function].bind(e),i=r.type,a=n.size*(r.elements||1);return a>1?function(e){if(!(e instanceof i)){var n=new i(a);n.set(e),e=n}(0,p.default)(e.length===a),r.matrix?o(t,!1,e):o(t,e)}:function(e){return o(t,e)}}function u(e,t){for(var n in e){var r=e[n];if(!s(r))throw t=t?t+" ":"",console.error(t+" Bad uniform "+n,r),new Error(t+" Bad uniform "+n)}return!0}function s(e){var t=!0;if(e instanceof d.default)t=!0;else if(Array.isArray(e)){var n=!0,r=!1,o=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;isFinite(u)||(t=!1)}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}t=t&&e.length>0}else ArrayBuffer.isView(e)?t=e.length>0:isFinite(e)||(t=!1);return t}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,r=e.program,i=e.uniforms;(0,p.default)(r);var a=r._uniformSetters,u=o({},n,{});for(var s in a){var l=i[s];void 0!==l&&(u[s]={Type:l,Value:(0,v.formatValue)(l)})}for(var c in a){void 0===i[c]&&(u[c]={Type:"NOT PROVIDED",Value:"N/A"})}var f={},h=0;for(var d in i){var y=i[d];u[d]||(h++,f[d]={Type:"NOT USED: "+y,Value:(0,v.formatValue)(y)})}return{table:u,unusedTable:f,unusedCount:h}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseUniformName=i,t.getUniformSetter=a,t.checkUniformValues=u,t.getUniformsTable=l;var c,f=n(3),h=n(21),d=r(h),v=n(1),y=n(0),p=r(y),m=(c={},o(c,f.GL.FLOAT,{function:"uniform1f",type:Float32Array}),o(c,f.GL.INT,{function:"uniform1i",type:Uint16Array}),o(c,f.GL.BOOL,{function:"uniform1i",type:Uint16Array}),o(c,f.GL.FLOAT_VEC2,{function:"uniform2fv",type:Float32Array,elements:2}),o(c,f.GL.FLOAT_VEC3,{function:"uniform3fv",type:Float32Array,elements:3}),o(c,f.GL.FLOAT_VEC4,{function:"uniform4fv",type:Float32Array,elements:4}),o(c,f.GL.INT_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),o(c,f.GL.INT_VEC3,{function:"uniform3iv",type:Uint16Array,elements:3}),o(c,f.GL.INT_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),o(c,f.GL.BOOL_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),o(c,f.GL.BOOL_VEC3,{function:"uniform3fv",type:Uint16Array,elements:3}),o(c,f.GL.BOOL_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),o(c,f.GL.FLOAT_MAT2,{function:"uniformMatrix2fv",type:Float32Array,matrix:!0,elements:4}),o(c,f.GL.FLOAT_MAT3,{mfunction:"uniformMatrix3fv",type:Float32Array,matrix:!0,elements:9}),o(c,f.GL.FLOAT_MAT4,{function:"uniformMatrix4fv",type:Float32Array,matrix:!0,elements:16}),o(c,f.GL.SAMPLER_2D,{function:"uniform1i",type:Uint16Array,texture:!0}),o(c,f.GL.SAMPLER_CUBE,{function:"uniform1i",type:Uint16Array,texture:!0}),c)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(e instanceof s.WebGL2RenderingContext)return e.createVertexArray();var t=e.getExtension(d);return t?t.createVertexArrayOES():null}function i(e,t){e instanceof s.WebGL2RenderingContext&&e.deleteVertexArray(t);var n=e.getExtension(d);n&&n.deleteVertexArrayOES(t)}function a(e,t){if(e instanceof s.WebGL2RenderingContext)return e.isVertexArray(t);var n=e.getExtension(d);return!!n&&n.isVertexArrayOES(t)}function u(e,t){e instanceof s.WebGL2RenderingContext&&e.bindVertexArray(t);var n=e.getExtension(d);n&&n.bindVertexArrayOES(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.isVertexArray=a;var s=n(22),l=n(2),c=n(0),f=function(e){return e&&e.__esModule?e:{default:e}}(c),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d="OES_vertex_array_object",v=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.handle;if(r(this,e),(0,l.assertWebGLContext)(t),(0,f.default)(e.isSupported(t),"VertexArrayObject: WebGL2 or OES_vertex_array_object required"),!(i=i||o(t)))throw new Error("Could not create VertexArrayObject");this.gl=t,this.handle=i,this.userData={},Object.seal(this)}return h(e,null,[{key:"isSupported",value:function(e){return(0,l.assertWebGLContext)(e),e instanceof s.WebGL2RenderingContext||e.getExtension("OES_vertex_array_object")}},{key:"wrap",value:function(t,n){return n instanceof e?n:new e(t,{handle:n.handle||n})}}]),h(e,[{key:"delete",value:function(){return i(this.gl,this.handle),this}},{key:"bind",value:function(){return u(this.gl,this.handle),this}},{key:"unbind",value:function(){return u(this.gl,null),this}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e.luma||(e.luma={extensions:{}}),void 0===e.luma.extensions.ANGLE_instanced_arrays&&(e.luma.extensions.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays")),e.luma}function i(e){return(0,T.assertWebGLContext)(e),e.getParameter(e.MAX_VERTEX_ATTRIBS)}function a(e){return(0,T.assertWebGLContext)(e),Boolean((0,T.isWebGL2Context)(e)||e.getExtension(e,"ANGLE_instanced_arrays"))}function u(e,t){return Boolean(p(e,t,e.VERTEX_ATTRIB_ARRAY_ENABLED))}function s(e,t){return p(e,t,e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING)}function l(e,t){return p(e,e.CURRENT_VERTEX_ATTRIB)}function c(e,t){return p(t,e.VERTEX_ATTRIB_ARRAY_SIZE)}function f(e,t){return p(t,e.VERTEX_ATTRIB_ARRAY_TYPE)}function h(e,t){return p(t,e.VERTEX_ATTRIB_ARRAY_NORMALIZED)}function d(e,t){return(0,T.assertWebGL2Context)(e),p(t,e.VERTEX_ATTRIB_ARRAY_INTEGER)}function v(e,t){return p(t,e.VERTEX_ATTRIB_ARRAY_STRIDE)}function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.VERTEX_ATTRIB_ARRAY_POINTER;return e.getVertexAttribOffset(t,n)}function p(e,t,n){return(0,T.assertWebGLContext)(e),e.getVertexAttrib(t,n)}function m(e,t){e.enableVertexAttribArray(t)}function b(e,t){t>0&&e.disableVertexAttribArray(t)}function g(e,t,n){if((0,T.isWebGL2Context)(e))return void e.vertexAttribDivisor(t,n);var r=o(e).extensions.ANGLE_instanced_arrays;if(r)return void r.vertexAttribDivisorANGLE(t,n);if(0!==n)throw new Error("WebGL instanced rendering not supported")}function _(e,t){if((0,F.default)(t>0),(0,T.isWebGL2Context)(e)){return p(t,e.VERTEX_ATTRIB_ARRAY_DIVISOR)}var n=o(e).extensions.ANGLE_instanced_arrays;if(n){return p(t,n.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)}return 0}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gl,n=e.location,r=e.buffer,o=e.target,i=e.layout;(0,T.assertWebGLContext)(t),r=I.default.makeFrom(t,r),o=(0,A.glGet)(void 0!==o?o:r.target),i=void 0!==i?i:r.layout,(0,F.default)(o,"setBuffer needs target"),(0,F.default)(i,"setBuffer called on uninitialized buffer"),r.bind({target:t.ARRAY_BUFFER}),i.integer?((0,T.assertWebGL2Context)(t),t.vertexAttribIPointer(n,i.size,(0,A.glGet)(i.type),i.stride,i.offset)):t.vertexAttribPointer(n,i.size,(0,A.glGet)(i.type),i.normalized,i.stride,i.offset),r.unbind({target:t.ARRAY_BUFFER})}function S(e){var t=e.gl,n=e.location,r=e.array;R.log.warn(0,"VertexAttributes.setGeneric is not well tested"),r instanceof Float32Array?t.vertexAttrib4fv(n,r):r instanceof Int32Array?((0,T.assertWebGL2Context)(t),t.vertexAttribI4iv(n,r)):r instanceof Uint32Array&&((0,T.assertWebGL2Context)(t),t.vertexAttribI4uiv(n,r))}function M(e,t,n,r,o,i){switch(R.log.warn(0,"VertexAttributes.setGenericValues is not well tested"),arguments.length-1){case 1:e.vertexAttrib1f(t,n);break;case 2:e.vertexAttrib2f(t,n,r);break;case 3:e.vertexAttrib3f(t,n,r,o);break;case 4:e.vertexAttrib4f(t,n,r,o,i);break;default:throw new Error("vertex attribute size must be between 1 and 4")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxAttributes=i,t.hasDivisor=a,t.isEnabled=u,t.getBuffer=s,t.getGeneric=l,t.getSize=c,t.getType=f,t.isNormalized=h,t.isInteger=d,t.getStride=v,t.getOffset=y,t.enable=m,t.disable=b,t.setDivisor=g,t.getDivisor=_,t.setBuffer=E,t.setGeneric=S,t.setGenericValues=M;var A=n(3),T=n(2),x=n(13),I=r(x),R=n(1),w=n(0),F=r(w)},function(e,t,n){"use strict";function r(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return a.default.FLOAT;case Uint16Array:return a.default.UNSIGNED_SHORT;case Uint32Array:return a.default.UNSIGNED_INT;case Uint8Array:case Uint8ClampedArray:return a.default.UNSIGNED_BYTE;case Int8Array:return a.default.BYTE;case Int16Array:return a.default.SHORT;case Int32Array:return a.default.INT;default:throw new Error("Failed to deduce type from array/array type")}}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clamped,r=void 0===n||n;switch(e){case a.default.FLOAT:return Float32Array;case a.default.UNSIGNED_SHORT:case a.default.UNSIGNED_SHORT_5_6_5:case a.default.UNSIGNED_SHORT_4_4_4_4:case a.default.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case a.default.UNSIGNED_INT:return Uint32Array;case a.default.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case a.default.BYTE:return Int8Array;case a.default.SHORT:return Int16Array;case a.default.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}Object.defineProperty(t,"__esModule",{value:!0}),t.glArrayFromType=void 0,t.glTypeFromArray=r,t.glTypeToArray=o;var i=n(14),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.glArrayFromType=o},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,i,a,u,s,l){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=i,c[5]=a,c[6]=u,c[7]=s,c[8]=l,c},o.set=function(e,t,n,r,o,i,a,u,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=u,e[7]=s,e[8]=l,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*a-u*l,h=-c*i+u*s,d=l*i-a*s,v=n*f+r*h+o*d;return v?(v=1/v,e[0]=f*v,e[1]=(-c*r+o*l)*v,e[2]=(u*r-o*a)*v,e[3]=h*v,e[4]=(c*n-o*s)*v,e[5]=(-u*n+o*i)*v,e[6]=d*v,e[7]=(-l*n+r*s)*v,e[8]=(a*n-r*i)*v,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=a*c-u*l,e[1]=o*l-r*c,e[2]=r*u-o*a,e[3]=u*s-i*c,e[4]=n*c-o*s,e[5]=o*i-n*u,e[6]=i*l-a*s,e[7]=r*s-n*l,e[8]=n*a-r*i,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],s=e[7],l=e[8];return t*(l*i-a*s)+n*(-l*o+a*u)+r*(s*o-i*u)},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1],v=n[2],y=n[3],p=n[4],m=n[5],b=n[6],g=n[7],_=n[8];return e[0]=h*r+d*a+v*l,e[1]=h*o+d*u+v*c,e[2]=h*i+d*s+v*f,e[3]=y*r+p*a+m*l,e[4]=y*o+p*u+m*c,e[5]=y*i+p*s+m*f,e[6]=b*r+g*a+_*l,e[7]=b*o+g*u+_*c,e[8]=b*i+g*s+_*f,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=s,e[6]=h*r+d*a+l,e[7]=h*o+d*u+c,e[8]=h*i+d*s+f,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*a,e[1]=d*o+h*u,e[2]=d*i+h*s,e[3]=d*a-h*r,e[4]=d*u-h*o,e[5]=d*s-h*i,e[6]=l,e[7]=c,e[8]=f,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,s=o+o,l=n*a,c=r*a,f=r*u,h=o*a,d=o*u,v=o*s,y=i*a,p=i*u,m=i*s;return e[0]=1-f-v,e[3]=c-m,e[6]=h+p,e[1]=c+m,e[4]=1-l-v,e[7]=d-y,e[2]=h-p,e[5]=d+y,e[8]=1-l-f,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],v=t[12],y=t[13],p=t[14],m=t[15],b=n*u-r*a,g=n*s-o*a,_=n*l-i*a,E=r*s-o*u,S=r*l-i*u,M=o*l-i*s,A=c*y-f*v,T=c*p-h*v,x=c*m-d*v,I=f*p-h*y,R=f*m-d*y,w=h*m-d*p,F=b*w-g*R+_*I+E*x-S*T+M*A;return F?(F=1/F,e[0]=(u*w-s*R+l*I)*F,e[1]=(s*x-a*w-l*T)*F,e[2]=(a*R-u*x+l*A)*F,e[3]=(o*R-r*w-i*I)*F,e[4]=(n*w-o*x+i*T)*F,e[5]=(r*x-n*R-i*A)*F,e[6]=(y*M-p*S+m*E)*F,e[7]=(p*_-v*M-m*g)*F,e[8]=(v*S-y*_+m*b)*F,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],v=t[2],y=t[3],p=t[4],m=t[5],b=e[6],g=t[7],_=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(a-y)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(u-p)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))},e.exports=o},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=n*n+r*r+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2];return e[0]=o*s-i*u,e[1]=i*a-r*s,e[2]=r*u-o*a,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e},o.hermite=function(e,t,n,r,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,l=a*(i-1),c=a*(3-2*i);return e[0]=t[0]*u+n[0]*s+r[0]*l+o[0]*c,e[1]=t[1]*u+n[1]*s+r[1]*l+o[1]*c,e[2]=t[2]*u+n[2]*s+r[2]*l+o[2]*c,e},o.bezier=function(e,t,n,r,o,i){var a=1-i,u=a*a,s=i*i,l=u*a,c=3*i*u,f=3*s*a,h=s*i;return e[0]=t[0]*l+n[0]*c+r[0]*f+o[0]*h,e[1]=t[1]*l+n[1]*c+r[1]*f+o[1]*h,e[2]=t[2]*l+n[2]*c+r[2]*f+o[2]*h,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[3]*r+n[7]*o+n[11]*i+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*o+n[8]*i+n[12])/a,e[1]=(n[1]*r+n[5]*o+n[9]*i+n[13])/a,e[2]=(n[2]*r+n[6]*o+n[10]*i+n[14])/a,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],i=t[2];return e[0]=r*n[0]+o*n[3]+i*n[6],e[1]=r*n[1]+o*n[4]+i*n[7],e[2]=r*n[2]+o*n[5]+i*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*i-s*o,f=l*o+s*r-a*i,h=l*i+a*o-u*r,d=-a*r-u*o-s*i;return e[0]=c*l+d*-a+f*-s-h*-u,e[1]=f*l+d*-u+h*-a-c*-s,e[2]=h*l+d*-s+c*-u-f*-a,e},o.rotateX=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0],i[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),i[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),i[1]=o[1],i[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],i=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],i[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),i[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),i[2]=o[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=3),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],i(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var i=o.dot(n,r);return i>1?0:Math.acos(i)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=t[0],u=t[1],s=t[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))},e.exports=o},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+i*i)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return n*n+r*r+o*o+i*i},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=n*a,e[1]=r*a,e[2]=o*a,e[3]=i*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e[2]=a+r*(n[2]-a),e[3]=u+r*(n[3]-u),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*i+n[12]*a,e[1]=n[1]*r+n[5]*o+n[9]*i+n[13]*a,e[2]=n[2]*r+n[6]*o+n[10]*i+n[14]*a,e[3]=n[3]*r+n[7]*o+n[11]*i+n[15]*a,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*i-s*o,f=l*o+s*r-a*i,h=l*i+a*o-u*r,d=-a*r-u*o-s*i;return e[0]=c*l+d*-a+f*-s-h*-u,e[1]=f*l+d*-u+h*-a-c*-s,e[2]=h*l+d*-s+c*-u-f*-a,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],i(e,e,a),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Fx=t.Shaders=t.FramebufferObject=t.pickModels=t.Scene=t.Group=t.Object3D=t.Mat4=t.Vec4=t.Vec3=t.experimental=t.parseModel=t.loadModel=t.loadProgram=t.loadTextures=t.loadImages=t.loadFiles=t.loadImage=t.loadFile=t.Euler=t.Quaternion=t.Matrix4=t.Vector4=t.Vector3=t.Vector2=t.degrees=t.radians=t.ClipSpaceQuad=t.TruncatedCone=t.Sphere=t.Plane=t.IcoSphere=t.Cylinder=t.Cube=t.Cone=t.TruncatedConeGeometry=t.SphereGeometry=t.PlaneGeometry=t.IcoSphereGeometry=t.CylinderGeometry=t.CubeGeometry=t.ConeGeometry=t.Geometry=t.addEvents=t.AnimationFrame=t.Model=t.VertexArrayObject=t.TimerQuery=t.isWebGL2Context=t.isWebGLContext=t.draw=t.TextureCube=t.Texture2D=t.Renderbuffer=t.Framebuffer=t.Program=t.FragmentShader=t.VertexShader=t.Shader=t.Buffer=t.glGetDebugInfo=t.glContextWithState=t.getGLExtension=t.createGLContext=t.GL=void 0;var o=n(14);Object.defineProperty(t,"GL",{enumerable:!0,get:function(){return r(o).default}});var i=n(31);Object.defineProperty(t,"createGLContext",{enumerable:!0,get:function(){return i.createGLContext}}),Object.defineProperty(t,"getGLExtension",{enumerable:!0,get:function(){return i.getGLExtension}}),Object.defineProperty(t,"glContextWithState",{enumerable:!0,get:function(){return i.glContextWithState}}),Object.defineProperty(t,"glGetDebugInfo",{enumerable:!0,get:function(){return i.glGetDebugInfo}});var a=n(13);Object.defineProperty(t,"Buffer",{enumerable:!0,get:function(){return r(a).default}});var u=n(33);Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(t,"VertexShader",{enumerable:!0,get:function(){return u.VertexShader}}),Object.defineProperty(t,"FragmentShader",{enumerable:!0,get:function(){return u.FragmentShader}});var s=n(56);Object.defineProperty(t,"Program",{enumerable:!0,get:function(){return r(s).default}});var l=n(32);Object.defineProperty(t,"Framebuffer",{enumerable:!0,get:function(){return r(l).default}});var c=n(19);Object.defineProperty(t,"Renderbuffer",{enumerable:!0,get:function(){return r(c).default}});var f=n(20);Object.defineProperty(t,"Texture2D",{enumerable:!0,get:function(){return r(f).default}});var h=n(57);Object.defineProperty(t,"TextureCube",{enumerable:!0,get:function(){return r(h).default}});var d=n(54);Object.defineProperty(t,"draw",{enumerable:!0,get:function(){return d.draw}});var v=n(2);Object.defineProperty(t,"isWebGLContext",{enumerable:!0,get:function(){return v.isWebGLContext}}),Object.defineProperty(t,"isWebGL2Context",{enumerable:!0,get:function(){return v.isWebGL2Context}});var y=n(58);Object.defineProperty(t,"TimerQuery",{enumerable:!0,get:function(){return r(y).default}});var p=n(60);Object.defineProperty(t,"VertexArrayObject",{enumerable:!0,get:function(){return r(p).default}});var m=n(16);Object.defineProperty(t,"Model",{enumerable:!0,get:function(){return r(m).default}});var b=n(36);Object.defineProperty(t,"AnimationFrame",{enumerable:!0,get:function(){return r(b).default}});var g=n(37);Object.defineProperty(t,"addEvents",{enumerable:!0,get:function(){return g.addEvents}});var _=n(8);Object.defineProperty(t,"Geometry",{enumerable:!0,get:function(){return r(_).default}});var E=n(42);Object.defineProperty(t,"ConeGeometry",{enumerable:!0,get:function(){return r(E).default}});var S=n(43);Object.defineProperty(t,"CubeGeometry",{enumerable:!0,get:function(){return r(S).default}});var M=n(44);Object.defineProperty(t,"CylinderGeometry",{enumerable:!0,get:function(){return r(M).default}});var A=n(45);Object.defineProperty(t,"IcoSphereGeometry",{enumerable:!0,get:function(){return r(A).default}});var T=n(46);Object.defineProperty(t,"PlaneGeometry",{enumerable:!0,get:function(){return r(T).default}});var x=n(47);Object.defineProperty(t,"SphereGeometry",{enumerable:!0,get:function(){return r(x).default}});var I=n(17);Object.defineProperty(t,"TruncatedConeGeometry",{enumerable:!0,get:function(){return r(I).default}});var R=n(90);Object.defineProperty(t,"Cone",{enumerable:!0,get:function(){return r(R).default}});var w=n(91);Object.defineProperty(t,"Cube",{enumerable:!0,get:function(){return r(w).default}});var F=n(92);Object.defineProperty(t,"Cylinder",{enumerable:!0,get:function(){return r(F).default}});var O=n(93);Object.defineProperty(t,"IcoSphere",{enumerable:!0,get:function(){return r(O).default}});var P=n(94);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return r(P).default}});var L=n(95);Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return r(L).default}});var k=n(96);Object.defineProperty(t,"TruncatedCone",{enumerable:!0,get:function(){return r(k).default}});var N=n(89);Object.defineProperty(t,"ClipSpaceQuad",{enumerable:!0,get:function(){return r(N).default}});var C=n(5);Object.defineProperty(t,"radians",{enumerable:!0,get:function(){return C.radians}}),Object.defineProperty(t,"degrees",{enumerable:!0,get:function(){return C.degrees}});var D=n(28);Object.defineProperty(t,"Vector2",{enumerable:!0,get:function(){return r(D).default}});var j=n(18);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function(){return r(j).default}});var G=n(29);Object.defineProperty(t,"Vector4",{enumerable:!0,get:function(){return r(G).default}});var U=n(26);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function(){return r(U).default}});var B=n(27);Object.defineProperty(t,"Quaternion",{enumerable:!0,get:function(){return r(B).default}});var V=n(51);Object.defineProperty(t,"Euler",{enumerable:!0,get:function(){return r(V).default}});var W=n(87);Object.defineProperty(t,"loadFile",{enumerable:!0,get:function(){return W.loadFile}}),Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return W.loadImage}}),Object.defineProperty(t,"loadFiles",{enumerable:!0,get:function(){return W.loadFiles}}),Object.defineProperty(t,"loadImages",{enumerable:!0,get:function(){return W.loadImages}}),Object.defineProperty(t,"loadTextures",{enumerable:!0,get:function(){return W.loadTextures}}),Object.defineProperty(t,"loadProgram",{enumerable:!0,get:function(){return W.loadProgram}}),Object.defineProperty(t,"loadModel",{enumerable:!0,get:function(){return W.loadModel}}),Object.defineProperty(t,"parseModel",{enumerable:!0,get:function(){return W.parseModel}});var X=n(23);Object.defineProperty(t,"Vec3",{enumerable:!0,get:function(){return X.Vec3}}),Object.defineProperty(t,"Vec4",{enumerable:!0,get:function(){return X.Vec4}}),Object.defineProperty(t,"Mat4",{enumerable:!0,get:function(){return X.Mat4}});var Y=n(72);Object.defineProperty(t,"Object3D",{enumerable:!0,get:function(){return Y.Object3D}}),Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return Y.Group}}),Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return Y.Scene}}),Object.defineProperty(t,"pickModels",{enumerable:!0,get:function(){return Y.pickModels}});var z=n(38);Object.defineProperty(t,"FramebufferObject",{enumerable:!0,get:function(){return r(z).default}});var Z=n(75);Object.defineProperty(t,"Shaders",{enumerable:!0,get:function(){return r(Z).default}});var H=n(68);Object.defineProperty(t,"Fx",{enumerable:!0,get:function(){return r(H).default}}),n(48);var q=n(40);n(79);t.experimental={registerShaderModules:q.registerShaderModules,assembleShaders:q.assembleShaders,ShaderCache:q.ShaderCache}},function(e,t,n){"use strict";function r(e){for(var t=[],n=0;n<i;n++)for(var r=3*(1-i)/2+3*n,a=0;a<i;a++){var u=3*(1-i)/2+3*a;t.push(r,u)}t=new Float32Array(t);var s=new Float32Array(i*i*3).map(function(){return.75*Math.random()+.25});return new o.Cube({gl:e,isInstanced:1,instanceCount:i*i,attributes:{instanceOffsets:{value:t,size:2,instanced:1},instanceColors:{value:s,size:3,instanced:1}},vs:"attribute vec3 positions;\nattribute vec3 normals;\nattribute vec2 instanceOffsets;\nattribute vec3 instanceColors;\n\nuniform mat4 uModel;\nuniform mat4 uView;\nuniform mat4 uProjection;\nuniform float uTime;\n\nvarying vec3 color;\nvarying vec3 normal;\n\nvoid main(void) {\n  float d = length(instanceOffsets);\n  vec4 offset = vec4(instanceOffsets, sin((uTime + d) * 0.1) * 16.0, 0);\n  gl_Position = uProjection * uView * (uModel * vec4(positions, 1.0) + offset);\n\n  normal = vec3(uModel * vec4(normals, 1.0));\n  color = instanceColors;\n}\n",fs:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 color;\nvarying vec3 normal;\n\nvoid main(void) {\n  float d = abs(dot(normalize(normal), normalize(vec3(1,1,2))));\n  gl_FragColor = vec4(d * color,1);\n}\n"})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(66),i=256,a=(new o.AnimationFrame).context(function(){return(0,o.createGLContext)({canvas:"render-canvas"})}).init(function(e){var t=e.gl;return t.clearColor(1,1,1,1),t.clearDepth(1),t.enable(o.GL.DEPTH_TEST),t.depthFunc(o.GL.LEQUAL),{cube:r(t)}}).frame(function(e){var t=e.gl,n=e.tick,r=e.aspect,a=e.cube;t.clear(o.GL.COLOR_BUFFER_BIT|o.GL.DEPTH_BUFFER_BIT),a.render({uTime:.1*n,uModel:(new o.Matrix4).rotateX(.01*n).rotateY(.013*n),uView:o.Matrix4.lookAt({center:[0,0,0],eye:[Math.cos(.005*n)*i/2,Math.sin(.006*n)*i/2,(Math.sin(.0035*n)+1)*i/4+32]}),uProjection:o.Matrix4.perspective({fov:(0,o.radians)(60),aspect:r,near:1,far:2048})})});t.default=a,"undefined"!=typeof window&&(window.app=a)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return t=(0,i.splat)(t),Object.assign(e,{easeIn:function(n){return e(n,t)},easeOut:function(n){return 1-e(1-n,t)},easeInOut:function(n){return n<=.5?e(2*n,t)/2:(2-e(2*(1-n),t))/2}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(1),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=[],s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.opt=(0,i.merge)({delay:0,duration:1e3,transition:function(e){return e},onCompute:i.noop,onComplete:i.noop},t)}return a(e,[{key:"start",value:function(e){this.opt=(0,i.merge)(this.opt,e||{}),this.time=Date.now(),this.animating=!0,u.push(this)}},{key:"step",value:function(){if(this.animating){var e=Date.now(),t=this.time,n=this.opt,r=n.delay,o=n.duration,i=0;if(e<t+r)return void n.onCompute.call(this,i);e<t+r+o?(i=n.transition((e-t-r)/o),n.onCompute.call(this,i)):(this.animating=!1,n.onCompute.call(this,1),n.onComplete.call(this))}}}],[{key:"compute",value:function(e,t,n){return e+(t-e)*n}}]),e}();t.default=s,s.Queue=u,s.Transition={linear:function(e){return e}};var l=s.Transition;s.prototype.time=null;var c={Pow:function(e,t){return Math.pow(e,t[0]||6)},Expo:function(e){return Math.pow(2,8*(e-1))},Circ:function(e){return 1-Math.sin(Math.acos(e))},Sine:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Back:function(e,t){return t=t[0]||1.618,Math.pow(e,2)*((t+1)*e-t)},Bounce:function(e){for(var t,n=0,r=1;1;n+=r,r/=2)if(e>=(7-4*n)/11){t=r*r-Math.pow((11-6*n-11*e)/4,2);break}return t},Elastic:function(e,t){return Math.pow(2,10*--e)*Math.cos(20*e*Math.PI*(t[0]||1)/3)}};for(var f in c)l[f]=o(c[f]);["Quad","Cubic","Quart","Quint"].forEach(function(e,t){l[e]=o(function(e){return Math.pow(e,[t+2])})});var h;try{h=window}catch(e){h=null}var d=function(){var e=u;if(u=[],e.length){for(var t,n=0,r=e.length;n<r;n++)t=e[n],t.step(),t.animating&&u.push(t);s.Queue=u}};if(h){var v=!1;["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"].forEach(function(e){e in h&&(s.animationTime=function(){return h[e]},v=!0)}),v||(s.animationTime=Date.now),v=!1,["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"].forEach(function(e){e in h&&(s.requestAnimationFrame=function(t){h[e](function(){d(),t()})},v=!0)}),v||(s.requestAnimationFrame=function(e){setTimeout(function(){d(),e()},1e3/60)})}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.OrthoCamera=t.PerspectiveCamera=t.Camera=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(71),s=n(1),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=t.Camera=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),t=(0,s.merge)({fov:45,near:.1,far:500,aspect:1,position:new u.Vec3(0,0,0),target:new u.Vec3(0,0,-1),up:new u.Vec3(0,1,0)},t),this.fov=t.fov,this.near=t.near,this.far=t.far,this.aspect=t.aspect,this.position=t.position,this.target=t.target,this.up=t.up,this.view=new u.Mat4,this.uniforms={},this.projection=new u.Mat4,Object.seal(this),this.update()}return c(e,[{key:"project",value:function(){return null}},{key:"unproject",value:function(){return null}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"_updateUniforms",value:function(){var e=this.view.mulMat4(this.projection),t=e.invert();this.uniforms={cameraPosition:this.position,projectionMatrix:this.projection,viewMatrix:this.view,viewProjectionMatrix:e,viewInverseMatrix:this.view.invert(),viewProjectionInverseMatrix:t}}}]),e}();t.PerspectiveCamera=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"update",value:function(){this.projection=(new u.Mat4).perspective(this.fov,this.aspect,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),t}(f),t.OrthoCamera=function(){function e(){i(this,e)}return c(e,[{key:"update",value:function(){var e=this.near*Math.tan(this.fov*Math.PI/360),t=-e,n=t*this.aspect,r=e*this.aspect;this.projection=(new u.Mat4).ortho(n,r,t,e,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MAX_TEXTURES=10,t.MAX_POINT_LIGHTS=4,t.PICKING_RES=4},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(23);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(38);Object.defineProperty(t,"FramebufferObject",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(25);Object.defineProperty(t,"Object3D",{enumerable:!0,get:function(){return r(o).default}});var i=n(24);Object.defineProperty(t,"Group",{enumerable:!0,get:function(){return r(i).default}});var a=n(73);Object.defineProperty(t,"Scene",{enumerable:!0,get:function(){return r(a).default}});var u=n(39);Object.defineProperty(t,"pickModels",{enumerable:!0,get:function(){return u.pickModels}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":s(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="function"==typeof Symbol&&"symbol"===u(Symbol.iterator)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":u(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(70),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),h=n(50),d=n(1),v=n(24),y=r(v),p=n(39),m=n(0),b=r(m),g="LumaGL.Scene invalid argument",_={lights:{enable:!1,ambient:{r:.2,g:.2,b:.2},directional:{direction:{x:1,y:1,z:1},color:{r:0,g:0,b:0}}},effects:{fog:!1},clearColor:!0,clearDepth:!0,backgroundColor:{r:0,g:0,b:0,a:1},backgroundDepth:1},E=function(e){function t(e,n){o(this,t),(0,b.default)(e,g),n=(0,d.merge)(_,n);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.gl=e,r.config=n,r.needsRedraw=!1,Object.seal(r),r}return a(t,e),l(t,[{key:"setNeedsRedraw",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=e,this}},{key:"getNeedsRedraw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clearRedrawFlags,n=void 0!==t&&t,r=!1;r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n;var o=!0,i=!1,a=void 0;try{for(var u,s=this.traverse()[Symbol.iterator]();!(o=(u=s.next()).done);o=!0){var l=u.value;r=r||l.getNeedsRedraw({clearRedrawFlags:n})}}catch(e){i=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(i)throw a}}return r}},{key:"clear",value:function(){var e=this.gl;if(this.config.clearColor){var t=this.config.backgroundColor;e.clearColor(t.r,t.g,t.b,t.a)}return this.config.clearDepth&&e.clearDepth(this.config.backgroundDepth),this.config.clearColor&&this.config.clearDepth?e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT):this.config.clearColor?e.clear(e.COLOR_BUFFER_BIT):this.config.clearDepth&&e.clear(e.DEPTH_BUFFER_BIT),this}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clear();var t=!0,n=!1,r=void 0;try{for(var o,i=this.traverse()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;a.display&&this.renderObject({model:a,uniforms:e})}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return this}},{key:"renderObject",value:function(e){var t=e.model,n=e.uniforms;return t.render(Object.assign({},this.getSceneUniforms(),{uniforms:n})),this}},{key:"pickModels",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.x,n=e.y,r=e.uniforms,o=void 0===r?{}:r;return(0,p.pickModels)(this.gl,Object.assign({group:this,x:t,y:n,uniforms:o},e))}},{key:"getSceneUniforms",value:function(){var e=this.config.lights,t=e.enable,n=e.ambient,r=e.directional,o=e.points;return Object.assign({},this.getEffectsUniforms(),{enableLights:t},t&&n?this.getAmbientUniforms(n):{},t&&r?this.getDirectionalUniforms(r):{},t&&o?this.getPointUniforms(o):{})}},{key:"getAmbientUniforms",value:function(e){return{ambientColor:[e.r,e.g,e.b]}}},{key:"getDirectionalUniforms",value:function(e){var t=e.color,n=e.direction,r=new h.Vector3(n.x,n.y,n.z).normalize().scale(-1,-1,-1);return{directionalColor:[t.r,t.g,t.b],lightingDirection:[r.x,r.y,r.z]}}},{key:"getPointUniforms",value:function(e){e=e instanceof Array?e:[e];var t=e.length,n={numberPoints:t},r=[],o=[],i=[],a=[],u=!0,s=!1,l=void 0;try{for(var c,f=e[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,d=h.position,v=h.color,y=h.diffuse,p=h.specular,m=v||y;r.push(d.x,d.y,d.z),o.push(m.r,m.g,m.b),i.push(Number(Boolean(p))),p?a.push(p.r,p.g,p.b):a.push(0,0,0)}}catch(e){s=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw l}}return r.length&&Object.assign(n,{pointLocation:r,pointColor:o,enableSpecular:i,pointSpecularColor:a}),n}},{key:"getEffectsUniforms",value:function(){var e=this.config.effects.fog;if(e){var t=e.color,n=void 0===t?{r:.5,g:.5,b:.5}:t;return{hasFog:!0,fogNear:e.near,fogFar:e.far,fogColor:[n.r,n.g,n.b]}}return{hasFog:!1}}}]),t}(y.default);t.default=E,E.MAX_TEXTURES=f.MAX_TEXTURES,E.MAX_POINT_LIGHTS=f.MAX_POINT_LIGHTS,E.PICKING_RES=f.PICKING_RES},function(e,t,n){"use strict";e.exports={hasTexture1:!1,hasTextureCube1:!1,enableLights:!1,useReflection:!1,enablePicking:!1,hasPickingColors:!1,hasFog:!1}},function(e,t,n){"use strict";var r=(n(12),n(74));e.exports={default:{vs:"#define SHADER_NAME luma-default-vertex\n\n#define LIGHT_MAX 4\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec4 pickingColors;\nattribute vec2 texCoords;\n\n// camera and object matrices\nuniform mat4 viewMatrix;\nuniform mat4 viewInverseMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\n\n// objectMatrix * viewMatrix = worldMatrix\nuniform mat4 worldMatrix;\nuniform mat4 worldInverseMatrix;\nuniform mat4 worldInverseTransposeMatrix;\nuniform mat4 objectMatrix;\nuniform vec3 cameraPosition;\n\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n\n// varyings\nvarying vec3 vReflection;\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec4 vNormal;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(positions, 1.0);\n  vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normals, 1.0);\n\n  // lighting code\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    float directionalLightWeighting =\n      max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize(\n          (viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n         pointWeight += max(\n          dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n       } else {\n         break;\n       }\n     }\n\n    lightWeighting = ambientColor +\n      (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  // refraction / reflection code\n  if (useReflection) {\n    vReflection =\n      (viewInverseMatrix[3] - (worldMatrix * vec4(positions, 1.0))).xyz;\n  } else {\n    vReflection = vec3(1.0, 1.0, 1.0);\n  }\n\n  // pass results to varyings\n  vColor = colors;\n  vPickingColor = pickingColors;\n  vTexCoord = texCoords;\n  vNormal = transformedNormal;\n  gl_Position = projectionMatrix * worldMatrix * vec4(positions, 1.0);\n}\n",fs:"#define SHADER_NAME luma-default-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\nvarying vec3 vReflection;\nvarying vec4 vNormal;\n\n// texture configs\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\nuniform bool hasTextureCube1;\nuniform samplerCube samplerCube1;\n\n// picking configs\nuniform bool enablePicking;\nuniform bool hasPickingColors;\nuniform vec3 pickColor;\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n// fog configuration\nuniform bool hasFog;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main(){\n  // set color from texture\n  if (!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor =\n      vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb *\n      lightWeighting, 1.0);\n  }\n\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n\n  // set picking\n  if (enablePicking) {\n    if (hasPickingColors) {\n      gl_FragColor = vPickingColor;\n    } else {\n      gl_FragColor = vec4(pickColor, 1.0);\n    }\n  }\n\n  // handle fog\n  // if (hasFog) {\n  //   float depth = gl_FragCoord.z / gl_FragCoord.w;\n  //   float fogFactor = smoothstep(fogNear, fogFar, depth);\n  //   gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n  // }\n}\n",defaultUniforms:r}}},function(e,t,n){"use strict";(function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fogEnable,n=void 0!==t&&t,r=e.fogColor,o=void 0===r?[.5,.5,.5]:r,i=e.fogNear,a=void 0===i?1:i,u=e.fogFar;return{fog_uEnable:n,fog_uColor:o,fog_uNear:a,fog_uFar:void 0===u?100:u}}Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentShader=t.vertexShader=t.name=void 0,t.getUniforms=r;n(12),t.name="fog",t.vertexShader="",t.fragmentShader=e("Ly8gZm9nIGNvbmZpZ3VyYXRpb24KdW5pZm9ybSBib29sIGZvZ191RW5hYmxlOwp1bmlmb3JtIHZlYzMgZm9nX3VDb2xvcjsKdW5pZm9ybSBmbG9hdCBmb2dfdU5lYXI7CnVuaWZvcm0gZmxvYXQgZm9nX3VGYXI7CgovKgogKiBBcHBsaWVzIGxpbmVhciBmb2cgdG8gYSBjb2xvcgogKiBwYXJhbSAtIHVuZm9nZ2VkIGNvbG9yCiAqIHJldHVybiAtIGZvZ2dlZCBjb2xvcgogKi8KdmVjNCBmb2dfZmlsdGVyQ29sb3IodmVjNCBjb2xvcikgewogIGlmIChmb2dfdUVuYWJsZSkgewogICAgZmxvYXQgZGVwdGggPSBnbF9GcmFnQ29vcmQueiAvIGdsX0ZyYWdDb29yZC53OwogICAgZmxvYXQgZm9nRmFjdG9yID0gc21vb3Roc3RlcChmb2dfdU5lYXIsIGZvZ191RmFyLCBkZXB0aCk7CiAgICByZXR1cm4gbWl4KGNvbG9yLCB2ZWM0KGZvZ191Q29sb3IsIGdsX0ZyYWdDb2xvci53KSwgZm9nRmFjdG9yKTsKICB9IGVsc2UgewogIAlyZXR1cm4gY29sb3I7CiAgfQp9CgovLyBPdGhlciBmb2cgc2hhZGVycywgZXhwb25lbnRpYWwgZXRjLCBzZWUKLy8gaHR0cDovL2luMmdwdS5jb20vMjAxNC8wNy8yMi9jcmVhdGUtZm9nLXNoYWRlci8K","base64")}).call(t,n(34).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertexShader=t.name=void 0;var r=n(78);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});n(12),t.name="fp64",t.vertexShader='// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nuniform float ONE;\n\nconst vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#else\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 quickTwoSum(float a, float b) {\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n  return vec2(sum, err);\n}\n#else\nvec2 quickTwoSum(float a, float b) {\n  float sum = a + b;\n  float err = b - (sum - a);\n  return vec2(sum, err);\n}\n#endif\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSum(float a, float b) {\n  float s = (a + b) * ONE;\n  float v = (s - a);\n  float err = (a - (s - v) * ONE) * ONE + (b - v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSum(float a, float b) {\n  float s = a + b;\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n  return vec2(s, err);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSub(float a, float b) {\n  float s = (a - b) * ONE;\n  float v = (s - a);\n  float err = (a - (s - v) * ONE) * ONE - (b + v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSub(float a, float b) {\n  float s = a - b;\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n  return vec2(s, err);\n}\n#endif\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x * a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n  return vec2(prod, err);\n}\n#else\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n  return vec2(prod, err);\n}\n#endif\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n  prod.y += a.y * b.x;\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n  vec2 yn = a * xn;\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n  return sum_fp64(vec2(yn, 0.0), prod);\n}\n\nvec2 exp_fp64(vec2 a) {\n  const float k = 512.0;\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  // Range reduction using assume a = kr + m * log(2), k and m being integers.\n  // Set k = 9 (we can choose other k to trade accuracy with performance.\n  // we only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n\n  // We can add more iterations here and increase k.\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  s = sum_fp64(s * 2.0, mul_fp64(s, s));\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(1.0, 0.0) * ONE);\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), vec2(1.0, 0.0));\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can\'t get PI/16 * 3.0 very accurately.\n    // so let\'s just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else if (k == 3) {\n        t = sub_fp64(t, PI_16_3_FP64);\n    } else if (k == -3) {\n        t = sum_fp64(t, PI_16_3_FP64);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return div_fp64(mul_fp64(degree, PI_FP64), vec2(180.0, 0.0));\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])), mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n'},function(e,t,n){"use strict";function r(e){var t=Math.fround(e),n=e-Math.fround(e);return new Float32Array([t,n])}Object.defineProperty(t,"__esModule",{value:!0}),t.fp64ify=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}var o=n(40),i=n(77),a=r(i),u=n(76),s=r(u),l=n(81),c=r(l),f=n(80),h=r(f);(0,o.registerShaderModules)([a,s,c,h])},function(e,t,n){"use strict";(function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable;return{picking_enable:void 0===t||t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentShader=t.vertexShader=t.name=void 0,t.getUniforms=r;n(12),t.name="material",t.vertexShader=e("Ci8qIFNldCB0aGUgVVYgY29vcmRpbmF0ZSBmcm9tIGF0dHJpYnV0ZXMgKi8Kdm9pZCBtYXRlcmlhbF9zZXRVVnMoZGlmZnVzZVVWLCBzcGVjdWxhclVWKSB7CiAgbWF0ZXJpYWxfdkRpZmZ1c2VVViA9IGRpZmZ1c2VVVjsKICBtYXRlcmlhbF92U3BlY3VsYXJVViA9IHNwZWN1bGFyVVY7Cn0K","base64"),t.fragmentShader=e("dW5pZm9ybSB2ZWMzIG1hdGVyaWFsX3VBbWJpZW50Q29sb3I7CnVuaWZvcm0gdmVjMyBtYXRlcmlhbF91RGlmZnVzZUNvbG9yOwp1bmlmb3JtIHZlYzMgbWF0ZXJpYWxfdVNwZWN1bGFyQ29sb3I7CnVuaWZvcm0gdmVjMyBtYXRlcmlhbF91RW1pc3NpdmVDb2xvcjsKCi8vIHJlZmxlY3Rpb24gLyByZWZyYWN0aW9uIGNvbmZpZ3MKdW5pZm9ybSBmbG9hdCBtYXRlcmlhbF91UmVmbGVjdGlvbjsKdW5pZm9ybSBmbG9hdCBtYXRlcmlhbF91UmVmcmFjdGlvbjsKCnVuaWZvcm0gYm9vbCBtYXRlcmlhbF9lbmFibGVEaWZmdXNlTWFwOwp1bmlmb3JtIGJvb2wgbWF0ZXJpYWxfZW5hYmxlU3BlY3VsYXJNYXA7CnVuaWZvcm0gYm9vbCBtYXRlcmlhbF9lbmFibGVFbnZpcm9ubWVudE1hcDsKCnVuaWZvcm0gc2FtcGxlcjJEIG1hdGVyaWFsX2RpZmZ1c2VNYXA7CnVuaWZvcm0gc2FtcGxlcjJEIG1hdGVyaWFsX3NwZWN1bGFyTWFwOwp1bmlmb3JtIHNhbXBsZXJDdWJlIG1hdGVyaWFsX2Vudmlyb25tZW50TWFwOwoKdmFyeWluZyB2ZWMyIG1hdGVyaWFsX3ZEaWZmdXNlVGV4dHVyZUNvb3JkaW5hdGU7CnZhcnlpbmcgdmVjMiBtYXRlcmlhbF92U3BlY3VsYXJUZXh0dXJlQ29vcmRpbmF0ZTsKCi8vIEdldCBzaGluaW5lc3MgZnJvbSB1bmlmb3JtIG9yIHNwZWN1bGFyIG1hcApmbG9hdCBtYXRlcmlhbF9nZXRTaGluaW5lc3MoKSB7CiAgZmxvYXQgc2hpbmluZXNzID0gbWF0ZXJpYWxfdVNoaW5pbmVzczsKICBpZiAobWF0ZXJpYWxfZW5hYmxlU3BlY3VsYXJNYXApIHsKICAgIHNoaW5pbmVzcyA9IHRleHR1cmUyRChzYW1wbGVyMiwgdmVjMih2VGV4Q29vcmQxLnMsIHZUZXhDb29yZDEudCkpLnIgKiAyNTUuMDsKICB9CgogIGlmIChzaGluaW5lc3NWYWwgPiAyNTUuMCkgewogICAgc2hpbmluZXNzVmFsID0gc2hpbmluZXNzOwogIH0KCiAgcmV0dXJuIHNoaW5pbmVzczsKfQoKLy8gSWYgd2UgaGF2ZSBhIHN0YW5kYXJkIChkaWZmdXNlKSB0ZXh0dXJlLCBzZXQgY29sb3IgdG8gdGV4dHVyZQp2ZWM0IG1hdGVyaWFsX2ZpbHRlckNvbG9yX2RpZmZ1c2VNYXAodmVjNCBjb2xvcikgewogIGlmIChtYXRlcmlhbF9lbmFibGVEaWZmdXNlVGV4dHVyZSkgewogICAgY29sb3IgPSB0ZXh0dXJlMkQobWF0ZXJpYWxfdURpZmZ1c2VUZXh0dXJlLCBtYXRlcmlhbF92RGlmZnVzZVRleHR1cmVDb29yZGluYXRlKTsKICB9CiAgcmV0dXJuIGNvbG9yOwp9CgovLyBFbnZpcm9ubWVudCBtYXAgLSBjdWJlIHRleHR1cmUKdmVjNCBtYXRlcmlhbF9maWx0ZXJDb2xvcl9lbnZpcm9ubWVudE1hcChjb2xvcikKICBpZiAobWF0ZXJpYWxfZW5hYmxlRW52aXJvbm1lbnRNYXApIHsKICAgIHZlYzMgblJlZmxlY3Rpb24gPSBub3JtYWxpemUobWF0ZXJpYWxfdlJlZmxlY3Rpb24pOwogICAgdmVjMyByZWZsZWN0aW9uVmFsdWU7CiAgICBpZiAobWF0ZXJpYWxfdVJlZnJhY3Rpb24gPiAwLjApIHsKICAgICByZWZsZWN0aW9uVmFsdWUgPSByZWZyYWN0KG5SZWZsZWN0aW9uLCBtYXRlcmlhbF92Tm9ybWFsLCBtYXRlcmlhbF91UmVmcmFjdGlvbik7CiAgICB9IGVsc2UgewogICAgIHJlZmxlY3Rpb25WYWx1ZSA9IC1yZWZsZWN0KG5SZWZsZWN0aW9uLCBtYXRlcmlhbF92Tm9ybWFsKTsKICAgIH0KCiAgICB2ZWM0IGN1YmVDb2xvciA9IHRleHR1cmVDdWJlKG1hdGVyaWFsX3VFbnZpcm9ubWVudE1hcCwKICAgICAgdmVjMygtcmVmbGVjdGlvblZhbHVlLngsIC1yZWZsZWN0aW9uVmFsdWUueSwgcmVmbGVjdGlvblZhbHVlLnopKTsKICAgIGNvbG9yID0gdmVjNChtaXgoY29sb3IucmdiLCBjdWJlQ29sb3IucmdiLCByZWZsZWN0aW9uKSwgY29sb3IuYSk7CiAgfQogIHJldHVybiBjb2xvcjsKfQoKdmVjNCBtYXRlcmlhbF9maWx0ZXJDb2xvcih2ZWM0IGNvbG9yKSB7CiAgY29sb3IgPSBtYXRlcmlhbF9maWx0ZXJDb2xvcl9kaWZmdXNlTWFwKGNvbG9yKTsKICBjb2xvciA9IG1hdGVyaWFsX2ZpbHRlckNvbG9yX2Vudmlyb25tZW50TWFwKGNvbG9yKTsKICByZXR1cm4gY29sb3I7Cn0K","base64")}).call(t,n(34).Buffer)},function(e,t,n){"use strict";(function(e){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enable;return{picking_enable:void 0===t||t}}Object.defineProperty(t,"__esModule",{value:!0}),t.fragmentShader=t.vertexShader=t.name=void 0,t.getUniforms=r;n(12),t.name="picking",t.vertexShader=e("dmFyeWluZyB2ZWM0IHZDb2xvcjsKdmFyeWluZyB2ZWM0IHBpY2tpbmdfdkNvbG9yOwoKLy8gU3RvcmVzIHRoZSBwaWNraW5nIGNvbG9yCnZvaWQgcGlja2luZ19zZXRQaWNraW5nQ29sb3IodmVjMyBwaWNraW5nQ29sb3IpIHsKICB2UGlja2luZ0NvbG9yID0gcGlja2luZ0NvbG9yczsKfQo=","base64"),t.fragmentShader=e("Ly8gcGlja2luZyBjb25maWdzCnVuaWZvcm0gYm9vbCBwaWNraW5nX3VFbmFibGVkOwp2YXJ5aW5nIHZlYzMgcGlja2luZ192UGlja2luZ0NvbG9yOwoKLyoKICogUmV0dXJucyBwaWNraW5nIGNvbG9yIGlmIHBpY2tpbmcgZW5hYmxlZAogKiBOb3RlOiBTaG91bGQgYmUgY2FsbGVkIGxhc3QsIHBpY2tpbmcgY29sb3IgbXVzdCBub3QgYmUgbW9kaWZpZWQuCiAqLwp2ZWM0IHBpY2tpbmdfZmlsdGVyQ29sb3IodmVjNCBjb2xvcikgewogIC8vIHNldCBwaWNraW5nCiAgaWYgKHBpY2tpbmdfdUVuYWJsZWQpIHsKICAJcmV0dXJuIHBpY2tpbmdfdlBpY2tpbmdDb2xvcjsKICB9IGVsc2UgewogIAlyZXR1cm4gY29sb3I7CiAgfQp9Cg==","base64")}).call(t,n(34).Buffer)},function(e,t,n){"use strict";function r(e,t){var n=e.vendor,r=e.renderer,o=void 0;switch(t){case"nvidia":o=n.match(/NVIDIA/i)||r.match(/NVIDIA/i);break;case"intel":o=n.match(/INTEL/i)||r.match(/INTEL/i);break;case"amd":o=n.match(/AMD/i)||r.match(/AMD/i)||n.match(/ATI/i)||r.match(/ATI/i);break;default:o=!1}return o}function o(e){var t="",n=(0,s.glGetDebugInfo)(e);return r(n,"nvidia")?t+="#define NVIDIA_GPU\n#define NVIDIA_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n":r(n,"intel")?t+="#define INTEL_GPU\n#define INTEL_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n #define INTEL_TAN_WORKAROUND 1\n":r(n,"amd")?t+="#define AMD_GPU\n":t+="#define DEFAULT_GPU\n",t}function i(e,t){var n=t.source,r=t.type,i=t.modules,a=void 0===i?[]:i;(0,c.default)("string"==typeof n,"shader source must be a string");var s=o(e)+"\n",l=!0,f=!1,h=void 0;try{for(var d,v=a[Symbol.iterator]();!(l=(d=v.next()).done);l=!0){var y=d.value,p=(0,u.getShaderModule)(y);p||(0,c.default)(p,"shader module is not defined");var m=p[r];s+="// BEGIN SHADER MODULE "+y+"\n#define MODULE_"+y.toUpperCase()+"\n"+m+"\n// END SHADER MODULE "+y}}catch(e){f=!0,h=e}finally{try{!l&&v.return&&v.return()}finally{if(f)throw h}}return s+=n}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,r=t.fs,o=(0,u.getShaderDependencies)(t.modules||[]);return{gl:e,vs:i(e,Object.assign({},t,{source:n,type:f,modules:o})),fs:i(e,Object.assign({},t,{source:r,type:h,modules:o}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkRendererVendor=r,t.getPlatformShaderDefines=o,t.assembleShaders=a;var u=n(41),s=n(11),l=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(l),f="vertexShader",h="fragmentShader"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(11),i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s="ShaderCache expects source strings",l="ShaderCache does not support caching across multiple contexts",c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.gl;r(this,e),this.gl=n,this.vertexShaders={},this.fragmentShaders={}}return u(e,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(e,t){(0,a.default)("string"==typeof t,s);var n=this.vertexShaders[t];return(0,a.default)(!n||n.gl===e,l),n||(n=new o.VertexShader(e,t),this.vertexShaders[t]=n),n}},{key:"getFragmentShader",value:function(e,t){(0,a.default)("string"==typeof t,s);var n=this.fragmentShaders[t];return(0,a.default)(!n||n.gl===e,l),n||(n=new o.FragmentShader(e,t),this.fragmentShaders[t]=n),n}}]),e}();t.default=c},function(e,t,n){"use strict";e.exports={hasTexture1:!1,hasTextureCube1:!1,enableLights:!1,useReflection:!1,enablePicking:!1,hasPickingColors:!1,hasFog:!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHADERS=void 0;var r=(n(12),n(84));t.SHADERS={vs:"#define SHADER_NAME luma-default-vs\n\n#define LIGHT_MAX 4\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec4 color;\nattribute vec2 texCoord1;\n\nuniform mat4 worldMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 worldInverseTransposeMatrix;\n\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(position, 1.0);\n\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normal, 1.0);\n    float directionalLightWeighting = max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize((viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n        pointWeight += max(dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n      } else {\n        break;\n      }\n    }\n\n    lightWeighting = ambientColor + (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  vColor = color;\n  vTexCoord = texCoord1;\n  gl_Position = projectionMatrix * worldMatrix * vec4(position, 1.0);\n}\n",fs:"#ifdef GL_ES\nprecision highp float;\n#endif\n\n#define SHADER_NAME luma-default-fs\n\nvarying vec4 vColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\n\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\n\nuniform bool enablePicking;\nuniform vec3 pickColor;\n\nuniform bool hasFog;\nuniform vec3 fogColor;\n\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main() {\n  if(!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor = vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb * lightWeighting, 1.0);\n  }\n\n  if (enablePicking) {\n    gl_FragColor = vec4(pickColor, 1.0);\n  }\n\n  /* handle fog */\n  if (hasFog) {\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep(fogNear, fogFar, depth);\n    gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n  }\n}\n",defaultUniforms:r}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){}function i(e){return new s(e).sendAsync()}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.requestFile=i;var u={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},s=function(){function e(t){var n=t.url,i=t.path,a=void 0===i?null:i,u=t.method,s=void 0===u?"GET":u,l=t.asynchronous,c=void 0===l||l,f=t.noCache,h=void 0!==f&&f,d=t.sendAsBinary,v=void 0!==d&&d,y=t.responseType,p=void 0!==y&&y,m=t.onProgress,b=void 0===m?o:m,g=t.onError,_=void 0===g?o:g,E=t.onAbort,S=void 0===E?o:E,M=t.onComplete,A=void 0===M?o:M;r(this,e),this.url=a?a.join(a,n):n,this.method=s,this.async=c,this.noCache=h,this.sendAsBinary=v,this.responseType=p,this.req=new XMLHttpRequest,this.req.onload=function(e){return A(e)},this.req.onerror=function(e){return _(e)},this.req.onabort=function(e){return S(e)},this.req.onprogress=function(e){e.lengthComputable?b(e,Math.round(e.loaded/e.total*100)):b(e,-1)}}return a(e,[{key:"setRequestHeader",value:function(e,t){return this.req.setRequestHeader(e,t),this}},{key:"sendAsync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,r){try{var o=e.req,i=e.method,a=e.noCache,s=e.sendAsBinary,l=e.responseType,c=a?e.url+(e.url.indexOf("?")>=0?"&":"?")+Date.now():e.url;o.open(i,c,e.async),l&&(o.responseType=l),e.async&&(o.onreadystatechange=function(e){o.readyState===u.COMPLETED&&(200===o.status?n(o.responseType?o.response:o.responseText):r(new Error(o.status+": "+c)))}),s?o.sendAsBinary(t):o.send(t),e.async||(200===o.status?n(o.responseType?o.response:o.responseText):r(new Error(o.status+": "+c)))}catch(e){r(e)}})}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(49);Object.defineProperty(t,"loadFile",{enumerable:!0,get:function(){return r.loadFile}}),Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return r.loadImage}});var o=n(88);Object.defineProperty(t,"loadFiles",{enumerable:!0,get:function(){return o.loadFiles}}),Object.defineProperty(t,"loadImages",{enumerable:!0,get:function(){return o.loadImages}}),Object.defineProperty(t,"loadTextures",{enumerable:!0,get:function(){return o.loadTextures}}),Object.defineProperty(t,"loadProgram",{enumerable:!0,get:function(){return o.loadProgram}}),Object.defineProperty(t,"loadModel",{enumerable:!0,get:function(){return o.loadModel}}),Object.defineProperty(t,"parseModel",{enumerable:!0,get:function(){return o.parseModel}})},function(e,t,n){"use strict";function r(){}function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,o=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(n){var r=(0,v.loadFile)(Object.assign({url:n},e));return r.then(function(e){return o({progress:++i/t.length,count:i,total:t.length,url:n})}),r}))}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.urls,n=e.onProgress,o=void 0===n?r:n;(0,d.default)(t.every(function(e){return"string"==typeof e}),"loadImages: {urls} must be array of strings");var i=0;return Promise.all(t.map(function(e){var n=(0,v.loadImage)(e);return n.then(function(n){return o({progress:++i/t.length,count:i,total:t.length,url:e})}),n}))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.urls,o=t.onProgress,a=void 0===o?r:o;return(0,d.default)(n.every(function(e){return"string"==typeof e}),"loadTextures: {urls} must be array of strings"),i(Object.assign({urls:n,onProgress:a},t)).then(function(r){return r.map(function(r,o){var i=Array.isArray(t.parameters)?t.parameters[o]:t.parameters;return i=void 0===i?{}:i,new y.Texture2D(e,Object.assign({id:n[o]},i,{data:r}))})})}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.vs,i=t.fs,a=t.onProgress,u=void 0===a?r:a;return o(Object.assign({urls:[n,i],onProgress:u},t)).then(function(n){var r=f(n,2),o=r[0],i=r[1];return new y.Program(e,Object.assign({vs:o,fs:i},t))})}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,i=t.onProgress,a=void 0===i?r:i;return o(Object.assign({urls:[n],onProgress:a},t)).then(function(n){var r=f(n,1),o=r[0];return l(e,Object.assign({file:o},t))})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.file,r=t.program,o=void 0===r?new y.Program(e):r,i="string"==typeof n?c(n):n,a={},u={};for(var s in i){var l=i[s];Array.isArray(l)?a[s]="indices"===s?new Uint16Array(l):new Float32Array(l):u[s]=l}return new p.Model(Object.assign({program:o,geometry:new p.Geometry({attributes:a})},u,t))}function c(e){try{return JSON.parse(e)}catch(e){throw new Error("Failed to parse JSON: "+e)}}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.loadFiles=o,t.loadImages=i,t.loadTextures=a,t.loadProgram=u,t.loadModel=s,t.parseModel=l;var h=n(0),d=function(e){return e&&e.__esModule?e:{default:e}}(h),v=n(49),y=n(11),p=n(7)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(7),s=n(4),l=n(11),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f="attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",h=[-1,-1,1,-1,-1,1,1,1],d=h.map(function(e){return-1===e?0:e}),v=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{vs:f,geometry:new s.Geometry({drawMode:l.GL.TRIANGLE_STRIP,attributes:{aClipSpacePosition:{value:new Float32Array(h),size:2},aTexCoord:{value:new Float32Array(d),size:2},aCoordinate:{value:new Float32Array(d),size:2}}})})));return n.setVertexCount(4),n}return i(t,e),t}(u.Model);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(4),s=n(7),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{geometry:new u.ConeGeometry(e)})))}return i(t,e),t}(s.Model);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(4),s=n(7),l=n(1),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,i=void 0===n?(0,l.uid)("cube"):n;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:i,geometry:new u.CubeGeometry(e)})))}return i(t,e),t}(s.Model);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(4),s=n(16),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{geometry:new u.CylinderGeometry(e)})))}return i(t,e),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(7),s=n(4),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{geometry:new s.IcoSphereGeometry(e)})))}return i(t,e),t}(u.Model);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":f(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":f(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(4),s=n(16),l=function(e){return e&&e.__esModule?e:{default:e}}(s),c=n(1),f="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,i=void 0===n?(0,c.uid)("plane"):n;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:i,geometry:new u.PlaneGeometry(e)})))}return i(t,e),t}(l.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":c(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(7),s=n(4),l=n(1),c="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var n=e.id,i=void 0===n?(0,l.uid)("sphere"):n;return o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{id:i,geometry:new s.SphereGeometry(e)})))}return i(t,e),t}(u.Model);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":l(t))&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":l(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(4),s=n(7),l="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Object.assign({},e,{geometry:new u.TruncatedConeGeometry(e)})))}return i(t,e),t}(s.Model);t.default=c},function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(void 0===t[r])throw new Error("Invalid math argument")}function o(e){return 2===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])}function i(e){if(_.glMatrix.debug&&!o(e))throw new Error("Invalid Vector2")}function a(e){return 3===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])}function u(e){if(_.glMatrix.debug&&!a(e))throw new Error("Invalid Vector3")}function s(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function l(e){if(_.glMatrix.debug&&!s(e))throw new Error("Invalid Vector4")}function c(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function f(e){if(_.glMatrix.debug&&!c(e))throw new Error("Invalid Quaternion")}function h(e){return 4===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])}function d(e){if(_.glMatrix.debug&&!h(e))throw new Error("Invalid Matrix2")}function v(e){return 6===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])}function y(e){if(_.glMatrix.debug&&!v(e))throw new Error("Invalid Matrix2d")}function p(e){return 9===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])}function m(e){if(_.glMatrix.debug&&!p(e))throw new Error("Invalid Matrix3")}function b(e){return 16===e.length&&Number.isFinite(e[0])&&Number.isFinite(e[1])&&Number.isFinite(e[2])&&Number.isFinite(e[3])&&Number.isFinite(e[4])&&Number.isFinite(e[5])&&Number.isFinite(e[6])&&Number.isFinite(e[7])&&Number.isFinite(e[8])&&Number.isFinite(e[9])&&Number.isFinite(e[10])&&Number.isFinite(e[11])&&Number.isFinite(e[12])&&Number.isFinite(e[13])&&Number.isFinite(e[14])&&Number.isFinite(e[15])}function g(e){if(_.glMatrix.debug&&!b(e))throw new Error("Invalid Matrix4")}Object.defineProperty(t,"__esModule",{value:!0}),t.checkArguments=r,t.validateVector2=o,t.checkVector2=i,t.validateVector3=a,t.checkVector3=u,t.validateVector4=s,t.checkVector4=l,t.validateQuaternion=c,t.checkQuaternion=f,t.validateMatrix2=h,t.checkMatrix2=d,t.validateMatrix2d=v,t.checkMatrix2d=y,t.validateMatrix3=p,t.checkMatrix3=m,t.validateMatrix4=b,t.checkMatrix4=g;var _=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageLoadPromise=t.isPageLoaded=void 0;var r=n(30),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=t.isPageLoaded=!1;t.pageLoadPromise=o.default?new Promise(function(e,n){window.onload=function(){t.isPageLoaded=i=!0,e(document)}}):Promise.resolve({})},function(e,t,n){"use strict";function r(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return new Promise(function(t,r){function o(e,n){try{e?r(e):t(n)}catch(e){r(e)}}e.apply(void 0,n.concat([o]))})}}Object.defineProperty(t,"__esModule",{value:!0}),t.promisify=r},function(e,t,n){"use strict";function r(e){return e?Array.isArray(e)?e:[e]:[]}function o(){}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return s[e]=s[e]||1,e+"-"+s[e]++}function a(e){for(var t={},n=0,r=arguments.length;n<r;n++){var o=arguments[n];if(o&&"Object"===o.constructor.name)for(var i in o){var s=o[i],l=t[i];l&&"Object"===s.constructor.name&&"Object"===l.constructor.name?t[i]=a(l,s):t[i]=u(s)}}return t}function u(e){var t=e.constructor.name,n=void 0;if("Object"===t){n={};for(var r in e)n[r]=u(e[r])}else if("Array"===t){n=[];for(var o=0,i=e.length;o<i;o++)n[o]=u(e[o])}else n=e;return n}Object.defineProperty(t,"__esModule",{value:!0}),t.splat=r,t.noop=o,t.uid=i,t.merge=a;var s={}},function(e,t,n){"use strict";function r(e){return"unnamed"}function o(e,t,n){for(var o=e.split(/\r?\n/),a={},s=0;s<o.length;s++){var l=o[s];if(!(l.length<=1)){var c=parseInt(l.split(":")[2],10);if(isNaN(c))return"Could not parse GLSL compiler error: "+e;a[c]=l}}for(var f="",h=i(t).split(/\r?\n/),d=0;d<h.length;d++){var v=h[d];if((a[d+3]||a[d+2]||a[d+1])&&(f+=v+"\n",a[d+1])){var y=a[d+1];y=y.substr(y.split(":",3).join(":").length+1).trim(),f+="^^^ "+y+"\n\n"}}var p=r(t)||"unknown name";return"GLSL error in "+u(n)+" shader "+p+"\n"+f}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),o=String(r.length+t-1).length;return r.map(function(e,r){var i=r+t,u=String(i).length;return a(i,o-u)+n+e}).join("\n")}function a(e,t){for(var n="",r=0;r<t;++r)n+=" ";return""+n+e}function u(e){switch(e){case l.default.FRAGMENT_SHADER:return"fragment";case l.default.VERTEX_SHADER:return"vertex";default:return"unknown type"}}Object.defineProperty(t,"__esModule",{value:!0}),t.getShaderName=r,t.formatGLSLCompilerError=o;var s=n(14),l=function(e){return e&&e.__esModule?e:{default:e}}(s)},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-r(e)}function i(e){var t,n,o,i,a,u,s=e.length;a=r(e),u=new f(3*s/4-a),o=a>0?s-4:s;var l=0;for(t=0,n=0;t<o;t+=4,n+=3)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],u[l++]=i>>16&255,u[l++]=i>>8&255,u[l++]=255&i;return 2===a?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,u[l++]=255&i):1===a&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,u[l++]=i>>8&255,u[l++]=255&i),u}function a(e){return l[e>>18&63]+l[e>>12&63]+l[e>>6&63]+l[63&e]}function u(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(r));return o.join("")}function s(e){for(var t,n=e.length,r=n%3,o="",i=[],a=0,s=n-r;a<s;a+=16383)i.push(u(e,a,a+16383>s?s:a+16383));return 1===r?(t=e[n-1],o+=l[t>>2],o+=l[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=l[t>>10],o+=l[t>>4&63],o+=l[t<<2&63],o+="="),i.push(o),i.join("")}t.byteLength=o,t.toByteArray=i,t.fromByteArray=s;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,v=h.length;d<v;++d)l[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,u=8*o-r-1,s=(1<<u)-1,l=s>>1,c=-7,f=n?o-1:0,h=n?-1:1,d=e[t+f];for(f+=h,i=d&(1<<-c)-1,d>>=-c,c+=u;c>0;i=256*i+e[t+f],f+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===i)i=1-l;else{if(i===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),i-=l}return(d?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,u,s,l=8*i-o-1,c=(1<<l)-1,f=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,v=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),t+=a+f>=1?h/s:h*Math.pow(2,1-f),t*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*s-1)*Math.pow(2,o),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+d]=255&u,d+=v,u/=256,o-=8);for(a=a<<o|u,l+=o;l>0;e[n+d]=255&a,d+=v,a/=256,l-=8);e[n+d-v]|=128*y}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,n){(function(e,r){function o(e,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&t._extend(r,n),E(r.showHidden)&&(r.showHidden=!1),E(r.depth)&&(r.depth=2),E(r.colors)&&(r.colors=!1),E(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),s(r,e,r.depth)}function i(e,t){var n=o.styles[t];return n?"["+o.colors[n][0]+"m"+e+"["+o.colors[n][1]+"m":e}function a(e,t){return e}function u(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function s(e,n,r){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return g(o)||(o=s(e,o,r)),o}var i=l(e,n);if(i)return i;var a=Object.keys(n),y=u(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(n);if(0===a.length){if(x(n)){var p=n.name?": "+n.name:"";return e.stylize("[Function"+p+"]","special")}if(S(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return e.stylize(Date.prototype.toString.call(n),"date");if(T(n))return c(n)}var m="",b=!1,_=["{","}"];if(v(n)&&(b=!0,_=["[","]"]),x(n)){m=" [Function"+(n.name?": "+n.name:"")+"]"}if(S(n)&&(m=" "+RegExp.prototype.toString.call(n)),A(n)&&(m=" "+Date.prototype.toUTCString.call(n)),T(n)&&(m=" "+c(n)),0===a.length&&(!b||0==n.length))return _[0]+m+_[1];if(r<0)return S(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var E;return E=b?f(e,n,r,y,a):a.map(function(t){return h(e,n,r,y,t,b)}),e.seen.pop(),d(E,m,_)}function l(e,t){if(E(t))return e.stylize("undefined","undefined");if(g(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return b(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,o){for(var i=[],a=0,u=t.length;a<u;++a)O(t,String(a))?i.push(h(e,t,n,r,String(a),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(h(e,t,n,r,o,!0))}),i}function h(e,t,n,r,o,i){var a,u,l;if(l=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},l.get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),O(r,o)||(a="["+o+"]"),u||(e.seen.indexOf(l.value)<0?(u=p(n)?s(e,l.value,null):s(e,l.value,n-1),u.indexOf("\n")>-1&&(u=i?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),E(a)){if(i&&o.match(/^\d+$/))return u;a=JSON.stringify(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+u}function d(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function v(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function p(e){return null===e}function m(e){return null==e}function b(e){return"number"==typeof e}function g(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function E(e){return void 0===e}function S(e){return M(e)&&"[object RegExp]"===R(e)}function M(e){return"object"==typeof e&&null!==e}function A(e){return M(e)&&"[object Date]"===R(e)}function T(e){return M(e)&&("[object Error]"===R(e)||e instanceof Error)}function x(e){return"function"==typeof e}function I(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function R(e){return Object.prototype.toString.call(e)}function w(e){return e<10?"0"+e.toString(10):e.toString(10)}function F(){var e=new Date,t=[w(e.getHours()),w(e.getMinutes()),w(e.getSeconds())].join(":");return[e.getDate(),k[e.getMonth()],t].join(" ")}function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.format=function(e){if(!g(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(o(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,a=String(e).replace(/%[sdj%]/g,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),u=r[n];n<i;u=r[++n])p(u)||!M(u)?a+=" "+u:a+=" "+o(u);return a},t.deprecate=function(n,o){function i(){if(!a){if(r.throwDeprecation)throw new Error(o);r.traceDeprecation?console.trace(o):console.error(o),a=!0}return n.apply(this,arguments)}if(E(e.process))return function(){return t.deprecate(n,o).apply(this,arguments)};if(!0===r.noDeprecation)return n;var a=!1;return i};var P,L={};t.debuglog=function(e){if(E(P)&&(P=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!L[e])if(new RegExp("\\b"+e+"\\b","i").test(P)){var n=r.pid;L[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else L[e]=function(){};return L[e]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=v,t.isBoolean=y,t.isNull=p,t.isNullOrUndefined=m,t.isNumber=b,t.isString=g,t.isSymbol=_,t.isUndefined=E,t.isRegExp=S,t.isObject=M,t.isDate=A,t.isError=T,t.isFunction=x,t.isPrimitive=I,t.isBuffer=n(106);var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",F(),t.format.apply(t,arguments))},t.inherits=n(105),t._extend=function(e,t){if(!t||!M(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(15),n(35))},function(e,t){e.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var i=new r.ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=o,i},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*i-o*r;return a?(a=1/a,e[0]=i*a,e[1]=-r*a,e[2]=-o*a,e[3]=n*a,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*u+i*s,e[1]=o*u+a*s,e[2]=r*l+i*c,e[3]=o*l+a*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=o*s+a*u,e[2]=r*-u+i*s,e[3]=o*-u+a*s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=o*u,e[2]=i*s,e[3]=a*s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,i,a){var u=new r.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=o,u[4]=i,u[5]=a,u},o.set=function(e,t,n,r,o,i,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=n*i-r*o;return s?(s=1/s,e[0]=i*s,e[1]=-r*s,e[2]=-o*s,e[3]=n*s,e[4]=(o*u-i*a)*s,e[5]=(r*a-n*u)*s,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=n[0],c=n[1],f=n[2],h=n[3],d=n[4],v=n[5];return e[0]=r*l+i*c,e[1]=o*l+a*c,e[2]=r*f+i*h,e[3]=o*f+a*h,e[4]=r*d+i*v+u,e[5]=o*d+a*v+s,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+i*l,e[1]=o*c+a*l,e[2]=r*-l+i*c,e[3]=o*-l+a*c,e[4]=u,e[5]=s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=o*l,e[2]=i*c,e[3]=a*c,e[4]=u,e[5]=s,e},o.translate=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=r*l+i*c+u,e[5]=o*l+a*c+s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],l=t[0],c=t[1],f=t[2],h=t[3],d=t[4],v=t[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))},e.exports=o},function(e,t,n){var r=n(6),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,i,a,u,s,l,c,f,h,d,v,y,p){var m=new r.ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=o,m[4]=i,m[5]=a,m[6]=u,m[7]=s,m[8]=l,m[9]=c,m[10]=f,m[11]=h,m[12]=d,m[13]=v,m[14]=y,m[15]=p,m},o.set=function(e,t,n,r,o,i,a,u,s,l,c,f,h,d,v,y,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=i,e[5]=a,e[6]=u,e[7]=s,e[8]=l,e[9]=c,e[10]=f,e[11]=h,e[12]=d,e[13]=v,e[14]=y,e[15]=p,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],i=t[6],a=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=o,e[13]=a,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,i,a,u,s,l,c,f;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,i,0,1,4,5),s=SIMD.Float32x4.shuffle(a,u,0,2,4,6),l=SIMD.Float32x4.shuffle(a,u,1,3,5,7),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,l),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,i,2,3,6,7),c=SIMD.Float32x4.shuffle(a,u,0,2,4,6),f=SIMD.Float32x4.shuffle(a,u,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,f),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],v=t[12],y=t[13],p=t[14],m=t[15],b=n*u-r*a,g=n*s-o*a,_=n*l-i*a,E=r*s-o*u,S=r*l-i*u,M=o*l-i*s,A=c*y-f*v,T=c*p-h*v,x=c*m-d*v,I=f*p-h*y,R=f*m-d*y,w=h*m-d*p,F=b*w-g*R+_*I+E*x-S*T+M*A;return F?(F=1/F,e[0]=(u*w-s*R+l*I)*F,e[1]=(o*R-r*w-i*I)*F,e[2]=(y*M-p*S+m*E)*F,e[3]=(h*S-f*M-d*E)*F,e[4]=(s*x-a*w-l*T)*F,e[5]=(n*w-o*x+i*T)*F,e[6]=(p*_-v*M-m*g)*F,e[7]=(c*M-h*_+d*g)*F,e[8]=(a*R-u*x+l*A)*F,e[9]=(r*x-n*R-i*A)*F,e[10]=(v*S-y*_+m*b)*F,e[11]=(f*_-c*S-d*b)*F,e[12]=(u*T-a*I-s*A)*F,e[13]=(n*I-r*T+o*A)*F,e[14]=(y*g-v*E-p*b)*F,e[15]=(c*E-f*g+h*b)*F,e):null},o.SIMD.invert=function(e,t){var n,r,o,i,a,u,s,l,c,f,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),v=SIMD.Float32x4.load(t,8),y=SIMD.Float32x4.load(t,12);return a=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(v,y,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(h,d,2,3,6,7),i=SIMD.Float32x4.shuffle(v,y,2,3,6,7),o=SIMD.Float32x4.shuffle(a,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,a,1,3,5,7),a=SIMD.Float32x4.mul(o,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.mul(r,a),s=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),a=SIMD.Float32x4.mul(r,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),f=SIMD.Float32x4.mul(n,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],v=t[12],y=t[13],p=t[14],m=t[15];return e[0]=u*(h*m-d*p)-f*(s*m-l*p)+y*(s*d-l*h),e[1]=-(r*(h*m-d*p)-f*(o*m-i*p)+y*(o*d-i*h)),e[2]=r*(s*m-l*p)-u*(o*m-i*p)+y*(o*l-i*s),e[3]=-(r*(s*d-l*h)-u*(o*d-i*h)+f*(o*l-i*s)),e[4]=-(a*(h*m-d*p)-c*(s*m-l*p)+v*(s*d-l*h)),e[5]=n*(h*m-d*p)-c*(o*m-i*p)+v*(o*d-i*h),e[6]=-(n*(s*m-l*p)-a*(o*m-i*p)+v*(o*l-i*s)),e[7]=n*(s*d-l*h)-a*(o*d-i*h)+c*(o*l-i*s),e[8]=a*(f*m-d*y)-c*(u*m-l*y)+v*(u*d-l*f),e[9]=-(n*(f*m-d*y)-c*(r*m-i*y)+v*(r*d-i*f)),e[10]=n*(u*m-l*y)-a*(r*m-i*y)+v*(r*l-i*u),e[11]=-(n*(u*d-l*f)-a*(r*d-i*f)+c*(r*l-i*u)),e[12]=-(a*(f*p-h*y)-c*(u*p-s*y)+v*(u*h-s*f)),e[13]=n*(f*p-h*y)-c*(r*p-o*y)+v*(r*h-o*f),e[14]=-(n*(u*p-s*y)-a*(r*p-o*y)+v*(r*s-o*u)),e[15]=n*(u*h-s*f)-a*(r*h-o*f)+c*(r*s-o*u),e},o.SIMD.adjoint=function(e,t){var n,r,o,i,a,u,s,l,c,f,h,d,v,n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12);return c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,i,0,1,4,5),a=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(o,i,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),v=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(a,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(a,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),v),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(a,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(a,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),v),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,v),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=e[4],a=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],v=e[13],y=e[14],p=e[15];return(t*a-n*i)*(f*p-h*y)-(t*u-r*i)*(c*p-h*v)+(t*s-o*i)*(c*y-f*v)+(n*u-r*a)*(l*p-h*d)-(n*s-o*a)*(l*y-f*d)+(r*s-o*u)*(l*v-c*d)},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),a))));SIMD.Float32x4.store(e,0,s);var l=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),a))));SIMD.Float32x4.store(e,4,c);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(n,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),i),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),a))));return SIMD.Float32x4.store(e,12,v),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],v=t[11],y=t[12],p=t[13],m=t[14],b=t[15],g=n[0],_=n[1],E=n[2],S=n[3];return e[0]=g*r+_*u+E*f+S*y,e[1]=g*o+_*s+E*h+S*p,e[2]=g*i+_*l+E*d+S*m,e[3]=g*a+_*c+E*v+S*b,g=n[4],_=n[5],E=n[6],S=n[7],e[4]=g*r+_*u+E*f+S*y,e[5]=g*o+_*s+E*h+S*p,e[6]=g*i+_*l+E*d+S*m,e[7]=g*a+_*c+E*v+S*b,g=n[8],_=n[9],E=n[10],S=n[11],e[8]=g*r+_*u+E*f+S*y,e[9]=g*o+_*s+E*h+S*p,e[10]=g*i+_*l+E*d+S*m,e[11]=g*a+_*c+E*v+S*b,g=n[12],_=n[13],E=n[14],S=n[15],e[12]=g*r+_*u+E*f+S*y,e[13]=g*o+_*s+E*h+S*p,e[14]=g*i+_*l+E*d+S*m,e[15]=g*a+_*c+E*v+S*b,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,i,a,u,s,l,c,f,h,d,v,y=n[0],p=n[1],m=n[2];return t===e?(e[12]=t[0]*y+t[4]*p+t[8]*m+t[12],e[13]=t[1]*y+t[5]*p+t[9]*m+t[13],e[14]=t[2]*y+t[6]*p+t[10]*m+t[14],e[15]=t[3]*y+t[7]*p+t[11]*m+t[15]):(r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],v=t[11],e[0]=r,e[1]=o,e[2]=i,e[3]=a,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=d,e[11]=v,e[12]=r*y+u*p+f*m+t[12],e[13]=o*y+s*p+h*m+t[13],e[14]=i*y+l*p+d*m+t[14],e[15]=a*y+c*p+v*m+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(i,a)));return SIMD.Float32x4.store(e,12,s),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,i,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,1,1,1,1))),i=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var i,a,u,s,l,c,f,h,d,v,y,p,m,b,g,_,E,S,M,A,T,x,I,R,w=o[0],F=o[1],O=o[2],P=Math.sqrt(w*w+F*F+O*O);return Math.abs(P)<r.EPSILON?null:(P=1/P,w*=P,F*=P,O*=P,i=Math.sin(n),a=Math.cos(n),u=1-a,s=t[0],l=t[1],c=t[2],f=t[3],h=t[4],d=t[5],v=t[6],y=t[7],p=t[8],m=t[9],b=t[10],g=t[11],_=w*w*u+a,E=F*w*u+O*i,S=O*w*u-F*i,M=w*F*u-O*i,A=F*F*u+a,T=O*F*u+w*i,x=w*O*u+F*i,I=F*O*u-w*i,R=O*O*u+a,e[0]=s*_+h*E+p*S,e[1]=l*_+d*E+m*S,e[2]=c*_+v*E+b*S,e[3]=f*_+y*E+g*S,e[4]=s*M+h*A+p*T,e[5]=l*M+d*A+m*T,e[6]=c*M+v*A+b*T,e[7]=f*M+y*A+g*T,e[8]=s*x+h*I+p*R,e[9]=l*x+d*I+m*R,e[10]=c*x+v*I+b*R,e[11]=f*x+y*I+g*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[4],a=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*o+l*r,e[5]=a*o+c*r,e[6]=u*o+f*r,e[7]=s*o+h*r,e[8]=l*o-i*r,e[9]=c*o-a*r,e[10]=f*o-u*r,e[11]=h*o-s*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],s=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o-l*r,e[1]=a*o-c*r,e[2]=u*o-f*r,e[3]=s*o-h*r,e[8]=i*r+l*o,e[9]=a*r+c*o,e[10]=u*r+f*o,e[11]=s*r+h*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,r),SIMD.Float32x4.mul(a,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),i=t[0],a=t[1],u=t[2],s=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*o+l*r,e[1]=a*o+c*r,e[2]=u*o+f*r,e[3]=s*o+h*r,e[4]=l*o-i*r,e[5]=c*o-a*r,e[6]=f*o-u*r,e[7]=h*o-s*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var i=SIMD.Float32x4.load(t,0),a=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,i,a,u=n[0],s=n[1],l=n[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,o=Math.sin(t),i=Math.cos(t),a=1-i,e[0]=u*u*a+i,e[1]=s*u*a+l*o,e[2]=l*u*a-s*o,e[3]=0,e[4]=u*s*a-l*o,e[5]=s*s*a+i,e[6]=l*s*a+u*o,e[7]=0,e[8]=u*l*a+s*o,e[9]=s*l*a-u*o,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=r+r,s=o+o,l=i+i,c=r*u,f=r*s,h=r*l,d=o*s,v=o*l,y=i*l,p=a*u,m=a*s,b=a*l;return e[0]=1-(d+y),e[1]=f+b,e[2]=h-m,e[3]=0,e[4]=f-b,e[5]=1-(c+y),e[6]=v+p,e[7]=0,e[8]=h+m,e[9]=v-p,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],i=t[1],a=t[2],u=t[3],s=o+o,l=i+i,c=a+a,f=o*s,h=o*l,d=o*c,v=i*l,y=i*c,p=a*c,m=u*s,b=u*l,g=u*c,_=r[0],E=r[1],S=r[2];return e[0]=(1-(v+p))*_,e[1]=(h+g)*_,e[2]=(d-b)*_,e[3]=0,e[4]=(h-g)*E,e[5]=(1-(f+p))*E,e[6]=(y+m)*E,e[7]=0,e[8]=(d+b)*S,e[9]=(y-m)*S,e[10]=(1-(f+v))*S,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var i=t[0],a=t[1],u=t[2],s=t[3],l=i+i,c=a+a,f=u+u,h=i*l,d=i*c,v=i*f,y=a*c,p=a*f,m=u*f,b=s*l,g=s*c,_=s*f,E=r[0],S=r[1],M=r[2],A=o[0],T=o[1],x=o[2];return e[0]=(1-(y+m))*E,e[1]=(d+_)*E,e[2]=(v-g)*E,e[3]=0,e[4]=(d-_)*S,e[5]=(1-(h+m))*S,e[6]=(p+b)*S,e[7]=0,e[8]=(v+g)*M,e[9]=(p-b)*M,e[10]=(1-(h+y))*M,e[11]=0,e[12]=n[0]+A-(e[0]*A+e[4]*T+e[8]*x),e[13]=n[1]+T-(e[1]*A+e[5]*T+e[9]*x),e[14]=n[2]+x-(e[2]*A+e[6]*T+e[10]*x),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n+n,u=r+r,s=o+o,l=n*a,c=r*a,f=r*u,h=o*a,d=o*u,v=o*s,y=i*a,p=i*u,m=i*s;return e[0]=1-f-v,e[1]=c+m,e[2]=h-p,e[3]=0,e[4]=c-m,e[5]=1-l-v,e[6]=d+y,e[7]=0,e[8]=h+p,e[9]=d-y,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,i,a){var u=1/(n-t),s=1/(o-r),l=1/(i-a);return e[0]=2*i*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*i*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(o+r)*s,e[10]=(a+i)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*i*2*l,e[15]=0,e},o.perspective=function(e,t,n,r,o){var i=1/Math.tan(t/2),a=1/(r-o);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*a,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(a+u),l=2/(o+i);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(a-u)*s*.5,e[9]=(o-i)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,i,a){var u=1/(t-n),s=1/(r-o),l=1/(i-a);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(o+r)*s,e[14]=(a+i)*l,e[15]=1,e},o.lookAt=function(e,t,n,i){var a,u,s,l,c,f,h,d,v,y,p=t[0],m=t[1],b=t[2],g=i[0],_=i[1],E=i[2],S=n[0],M=n[1],A=n[2];return Math.abs(p-S)<r.EPSILON&&Math.abs(m-M)<r.EPSILON&&Math.abs(b-A)<r.EPSILON?o.identity(e):(h=p-S,d=m-M,v=b-A,y=1/Math.sqrt(h*h+d*d+v*v),h*=y,d*=y,v*=y,a=_*v-E*d,u=E*h-g*v,s=g*d-_*h,y=Math.sqrt(a*a+u*u+s*s),y?(y=1/y,a*=y,u*=y,s*=y):(a=0,u=0,s=0),l=d*s-v*u,c=v*a-h*s,f=h*u-d*a,y=Math.sqrt(l*l+c*c+f*f),y?(y=1/y,l*=y,c*=y,f*=y):(l=0,c=0,f=0),e[0]=a,e[1]=l,e[2]=h,e[3]=0,e[4]=u,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=f,e[10]=v,e[11]=0,e[12]=-(a*p+u*m+s*b),e[13]=-(l*p+c*m+f*b),e[14]=-(h*p+d*m+v*b),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],v=e[11],y=e[12],p=e[13],m=e[14],b=e[15],g=t[0],_=t[1],E=t[2],S=t[3],M=t[4],A=t[5],T=t[6],x=t[7],I=t[8],R=t[9],w=t[10],F=t[11],O=t[12],P=t[13],L=t[14],k=t[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(i-E)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(a-S)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(u-M)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(s-A)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-T)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(h-R)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-w)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(v-F)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(F))&&Math.abs(y-O)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(p-P)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-L)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(b-k)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(k))},e.exports=o},function(e,t,n){var r=n(6),o=n(63),i=n(64),a=n(65),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=i.create(),t=i.fromValues(1,0,0),n=i.fromValues(0,1,0);return function(r,o,a){var s=i.dot(o,a);return s<-.999999?(i.cross(e,t,o),i.length(e)<1e-6&&i.cross(e,n,o),i.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(i.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=a.clone,u.fromValues=a.fromValues,u.copy=a.copy,u.set=a.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},u.add=a.add,u.multiply=function(e,t,n){var r=t[0],o=t[1],i=t[2],a=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*c+a*u+o*l-i*s,e[1]=o*c+a*s+i*u-r*l,e[2]=i*c+a*l+r*s-o*u,e[3]=a*c-r*u-o*s-i*l,e},u.mul=u.multiply,u.scale=a.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=o*s+i*u,e[2]=i*s-o*u,e[3]=a*s-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-i*u,e[1]=o*s+a*u,e[2]=i*s+r*u,e[3]=a*s-o*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],i=t[2],a=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=o*s-r*u,e[2]=i*s+a*u,e[3]=a*s-i*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},u.dot=a.dot,u.lerp=a.lerp,u.slerp=function(e,t,n,r){var o,i,a,u,s,l=t[0],c=t[1],f=t[2],h=t[3],d=n[0],v=n[1],y=n[2],p=n[3];return i=l*d+c*v+f*y+h*p,i<0&&(i=-i,d=-d,v=-v,y=-y,p=-p),1-i>1e-6?(o=Math.acos(i),a=Math.sin(o),u=Math.sin((1-r)*o)/a,s=Math.sin(r*o)/a):(u=1-r,s=r),e[0]=u*l+s*d,e[1]=u*c+s*v,e[2]=u*f+s*y,e[3]=u*h+s*p,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,o,i,a,s){return u.slerp(e,r,a,s),u.slerp(t,o,i,s),u.slerp(n,e,t,2*s*(1-s)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],o=t[2],i=t[3],a=n*n+r*r+o*o+i*i,u=a?1/a:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-o*u,e[3]=i*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=a.length,u.len=u.length,u.squaredLength=a.squaredLength,u.sqrLen=u.squaredLength,u.normalize=a.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var i=(o+1)%3,a=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*i+i]-t[3*a+a]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*i+a]-t[3*a+i])*n,e[i]=(t[3*i+o]+t[3*o+i])*n,e[a]=(t[3*a+o]+t[3*o+a])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.exactEquals=a.exactEquals,u.equals=a.equals,e.exports=u},function(e,t,n){var r=n(6),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],i=t[1];return e[0]=o+r*(n[0]-o),e[1]=i+r*(n[1]-i),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,i,a){var u,s;for(n||(n=2),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],i(e,e,a),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-a)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))},e.exports=o},function(e,t,n){(function(t){WebGLDebugUtils=function(){function e(e){if(null==v){v={},y={};for(var t in e)"number"==typeof e[t]&&(v[e[t]]=t,y[t]=e[t])}}function n(){if(null==v)throw"WebGLDebugUtils.init(ctx) not called"}function r(e){return n(),void 0!==v[e]}function o(e){n();var t=v[e];return void 0!==t?"gl."+t:"/*UNKNOWN WebGL ENUM*/ 0x"+e.toString(16)}function i(e,t,n,r){var i=d[e];if(void 0!==i){var i=i[t];if(void 0!==i&&i[n]){if("object"==typeof i[n]&&void 0!==i[n].enumBitwiseOr){for(var a=i[n].enumBitwiseOr,u=0,s=[],l=0;l<a.length;++l){var c=y[a[l]];0!=(r&c)&&(u|=c,s.push(o(c)))}return u===r?s.join(" | "):o(r)}return o(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function a(e,t){for(var n="",r=t.length,o=0;o<r;++o)n+=(0==o?"":", ")+i(e,r,o,t[o]);return n}function u(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function s(t,n,r,a){function l(e,t){return function(){r&&r(t,arguments);var o=e[t].apply(e,arguments),i=a.getError();return 0!=i&&(c[i]=!0,n(i,t,arguments)),o}}a=a||t,e(t),n=n||function(e,t,n){for(var r="",a=n.length,u=0;u<a;++u)r+=(0==u?"":", ")+i(t,a,u,n[u]);h("WebGL error "+o(e)+" in "+t+"("+r+")")};var c={},f={};for(var d in t)if("function"==typeof t[d])if("getExtension"!=d)f[d]=l(t,d);else{var v=l(t,d);f[d]=function(){return s(v.apply(t,arguments),n,r,a)}}else u(f,t,d);return f.getError=function(){for(var e in c)if(c.hasOwnProperty(e)&&c[e])return c[e]=!1,e;return t.NO_ERROR},f}function l(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;r<t;++r)e.disableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(r,0);e.deleteBuffer(n);for(var o=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),r=0;r<o;++r)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}function c(e){function t(e){return"function"==typeof e?e:function(t){e.handleEvent(t)}}function n(){for(var e=Object.keys(E),t=0;t<e.length;++t)delete E[e]}function r(){++b,y||m==b&&e.loseContext()}function o(e,t){var n=e[t];return function(){if(r(),!y){return n.apply(e,arguments)}}}function i(){for(var e=0;e<p.length;++e){var t=p[e];t instanceof WebGLBuffer?c.deleteBuffer(t):t instanceof WebGLFramebuffer?c.deleteFramebuffer(t):t instanceof WebGLProgram?c.deleteProgram(t):t instanceof WebGLRenderbuffer?c.deleteRenderbuffer(t):t instanceof WebGLShader?c.deleteShader(t):t instanceof WebGLTexture&&c.deleteTexture(t)}}function a(e){return{statusMessage:e,preventDefault:function(){g=!0}}}function s(e){for(var t in e)"function"==typeof e[t]?f[t]=o(e,t):u(f,e,t);f.getError=function(){if(r(),!y)for(var e;e=c.getError();)E[e]=!0;for(var e in E)if(E[e])return delete E[e],e;return f.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],i=0;i<n.length;++i){var a=n[i];f[a]=function(t){return function(){if(r(),y)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=v,p.push(n),n}}(e[a])}for(var s=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],i=0;i<s.length;++i){var a=s[i];f[a]=function(t){return function(){return r(),y?null:t.apply(e,arguments)}}(f[a])}for(var l=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],i=0;i<l.length;++i){var a=l[i];f[a]=function(t){return function(){return r(),!y&&t.apply(e,arguments)}}(f[a])}return f.checkFramebufferStatus=function(t){return function(){return r(),y?f.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(f.checkFramebufferStatus),f.getAttribLocation=function(t){return function(){return r(),y?-1:t.apply(e,arguments)}}(f.getAttribLocation),f.getVertexAttribOffset=function(t){return function(){return r(),y?0:t.apply(e,arguments)}}(f.getVertexAttribOffset),f.isContextLost=function(){return y},f}var c,f,h=[],d=[],f={},v=1,y=!1,p=[],m=0,b=0,g=!1,_=0,E={};e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=c){if(c)throw"got different context";c=n,f=s(c)}return f}return n}}(e.getContext);var S=function(e){h.push(t(e))},M=function(e){d.push(t(e))};return function(e){var t=e.addEventListener;e.addEventListener=function(n,r,o){switch(n){case"webglcontextlost":S(r);break;case"webglcontextrestored":M(r);break;default:t.apply(e,arguments)}}}(e),e.loseContext=function(){if(!y){for(y=!0,m=0,++v;c.getError(););n(),E[c.CONTEXT_LOST_WEBGL]=!0;var t=a("context lost"),r=h.slice();setTimeout(function(){for(var n=0;n<r.length;++n)r[n](t);_>=0&&setTimeout(function(){e.restoreContext()},_)},0)}},e.restoreContext=function(){y&&d.length&&setTimeout(function(){if(!g)throw"can not restore. webglcontestlost listener did not call event.preventDefault";i(),l(c),y=!1,b=0,g=!1;for(var e=d.slice(),t=a("context restored"),n=0;n<e.length;++n)e[n](t)},0)},e.loseContextInNCalls=function(e){if(y)throw"You can not ask a lost contet to be lost";m=b+e},e.getNumCalls=function(){return b},e.setRestoreTimeout=function(e){_=e},e}"undefined"==typeof window&&(window=t);var f=function(e){window.console&&window.console.log&&window.console.log(e)},h=function(e){window.console&&window.console.error?window.console.error(e):f(e)},d={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},v=null,y=null;return{init:e,mightBeEnum:r,glEnumToString:o,glFunctionArgToString:i,glFunctionArgsToString:a,makeDebugContext:s,makeLostContextSimulatingCanvas:c,resetToInitialState:l}}(),e.exports=WebGLDebugUtils}).call(t,n(15))},function(e,t){e.exports={name:"luma.gl",version:"3.1.0-alpha.1",description:"A WebGL JavaScript visualization library.",license:"MIT",contributors:["Ib Green <ib@uber.com>","Nicolas Belmonte <nico@uber.com>","Rye Terrell <ryeterrell@ryeterrell.net","Shan He <shan@uber.com>","Mikola Lysenko <mikolalysenko@gmail.com","Wesam Manassra <manassra@uber.com>"],repository:{type:"git",url:"https://github.com/uber/luma.gl"},keywords:["webgl","visualization","animation","3d"],main:"dist/index.js",module:"dist-es6/index.js",files:["src","dist","dist-es6","headless.js"],scripts:{"start-webpack":"(cd examples/main && yarn && npm run start-local)",start:"npm run build-watch && budo dist/bundle.js:dist/lumagl.js --live --open --port 3000 --watch-glob '**/*.{html,css,js,glsl}' ","build-clean":"rm -fr dist dist-es6 && mkdir -p dist dist-es6 ","build-es6":"rm -fr dist-es6 && babel src --out-dir dist-es6 --plugins=static-fs --source-maps","build-es5":"rm -fr dist && babel src --out-dir dist --plugins=static-fs,transform-es2015-modules-commonjs --source-maps","build-buble":"rm -fr dist-buble && mkdir -p dist-buble && buble src -o dist-buble --no modules --y dangerousForOf --objectAssign",build:"npm run build-es6 && npm run build-es5","build-shaders":'find . -name \'*.glsl\' -type f -exec bash -c \'echo "export default `\\" "$1" "`;"\' -- {} \\;',"build-shaders2":'find . -name \'*.glsl\' -type f -exec bash -c \'echo "export default `\\" ; cat "$1" ; echo "`;" "${1/glsl/glsl.js}"\' -- {} \\;',"build-shader":"echo 'export default `\\' ; cat \"$1\" ; echo '`;'",lint:"eslint src test","publish-prod":"npm run build && npm run test-fast && npm publish","publish-beta":"npm run build && npm run test-fast && npm publish --tag beta",test:"npm run lint && npm run test-node","test-fast":"npm run lint && node test/node.js | faucet","test-node":"node test/node.js","test-browser":"webpack-dev-server --config webpack.config.test-browser.js --progress --hot --open","test-shader":"npm run build-dist && budo src/test/fp64-shader.spec.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,scss,js,glsl}' -- -t babelify -t brfs-babel",docs:"npm run docs-build && open ./_docs/docs/index.html","docs-build":"rm -fr _docs/* && jekyll build --config=docs/_config.yml --layouts docs/_layouts","docs-gh-pages":"git subtree push --prefix _docs origin gh-pages","docs-gh-pages-force":"git push origin `git subtree split --prefix _docs dev`:gh-pages --force","docs-publish":"npm run docs-build && git add _docs -f && git commit -m 'UPDATE DOCS' --no-verify && npm run docs-gh-pages"},dependencies:{"gl-constants":"^1.0.0","gl-matrix":"^2.3.2","webgl-debug":"^1.0.2"},devDependencies:{"babel-cli":"^6.18","babel-core":"^6.18","babel-eslint":"^6.0.0","babel-plugin-static-fs":"^1.1.0","babel-plugin-transform-builtin-extend":"^1.1.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-preset-es2015":"^6.18","babel-preset-stage-2":"^6.18",babelify:"^7.2.0","blue-tape":"^0.2.0","brfs-babel":"^1.0.0",browserify:"^13.0.0",buble:"^0.15.1","buble-loader":"^0.4.0",budo:"^8.0.3",disc:"^1.3.2","electron-prebuilt":"^0.37.2",eslint:"^3.0","eslint-config-uber-es2015":"^3.0.0","eslint-config-uber-jsx":"^3.0.0","eslint-plugin-babel":"^4.0.0","eslint-plugin-react":"~6.7.0",faucet:"0.0.1",gl:"^4.0.2",jsdom:"^9.9.1","luma.gl":"3.0.0-alpha.3",mkdirp:"^0.5.1","module-alias":"^2.0.0","pre-commit":"^1.2.2","raw-loader":"^0.5.1",react:"^15.4.0","react-addons-test-utils":"^15.4.2","react-dom":"^15.4.0",reify:"^0.4.4",sinon:"^1.17.7","source-map-support":"^0.4.2","tap-browser-color":"^0.1.2",tape:"^4.6.3","tape-catch":"^1.0.4","tape-promise":"^1.1.0",testron:"^1.2.0","transform-loader":"^0.2.3","uglify-js":"^2.6.1",webpack:"^2.2.0-rc.3","webpack-dev-server":"^2.2.0-rc.0"}}}]);